(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();function eh(r,t){const e=Object.create(null),i=r.split(",");for(let s=0;s<i.length;s++)e[i[s]]=!0;return t?s=>!!e[s.toLowerCase()]:s=>!!e[s]}const Mt={},Fi=[],Ee=()=>{},pg=()=>!1,mg=/^on[^a-z]/,Ao=r=>mg.test(r),rh=r=>r.startsWith("onUpdate:"),Kt=Object.assign,ih=(r,t)=>{const e=r.indexOf(t);e>-1&&r.splice(e,1)},gg=Object.prototype.hasOwnProperty,Et=(r,t)=>gg.call(r,t),ft=Array.isArray,As=r=>To(r)==="[object Map]",yg=r=>To(r)==="[object Set]",mt=r=>typeof r=="function",Zt=r=>typeof r=="string",Eo=r=>typeof r=="symbol",Ut=r=>r!==null&&typeof r=="object",sf=r=>(Ut(r)||mt(r))&&mt(r.then)&&mt(r.catch),_g=Object.prototype.toString,To=r=>_g.call(r),vg=r=>To(r).slice(8,-1),xg=r=>To(r)==="[object Object]",sh=r=>Zt(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,Bn=eh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),wo=r=>{const t=Object.create(null);return e=>t[e]||(t[e]=r(e))},bg=/-(\w)/g,je=wo(r=>r.replace(bg,(t,e)=>e?e.toUpperCase():"")),Ag=/\B([A-Z])/g,Ji=wo(r=>r.replace(Ag,"-$1").toLowerCase()),So=wo(r=>r.charAt(0).toUpperCase()+r.slice(1)),zo=wo(r=>r?`on${So(r)}`:""),si=(r,t)=>!Object.is(r,t),jo=(r,t)=>{for(let e=0;e<r.length;e++)r[e](t)},jn=(r,t,e)=>{Object.defineProperty(r,t,{configurable:!0,enumerable:!1,value:e})},Eg=r=>{const t=parseFloat(r);return isNaN(t)?r:t};let Zh;const $a=()=>Zh||(Zh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function nh(r){if(ft(r)){const t={};for(let e=0;e<r.length;e++){const i=r[e],s=Zt(i)?Cg(i):nh(i);if(s)for(const n in s)t[n]=s[n]}return t}else if(Zt(r)||Ut(r))return r}const Tg=/;(?![^(]*\))/g,wg=/:([^]+)/,Sg=/\/\*[^]*?\*\//g;function Cg(r){const t={};return r.replace(Sg,"").split(Tg).forEach(e=>{if(e){const i=e.split(wg);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function oh(r){let t="";if(Zt(r))t=r;else if(ft(r))for(let e=0;e<r.length;e++){const i=oh(r[e]);i&&(t+=i+" ")}else if(Ut(r))for(const e in r)r[e]&&(t+=e+" ");return t.trim()}const Ig="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Rg=eh(Ig);function nf(r){return!!r||r===""}let he;class of{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=he,!t&&he&&(this.index=(he.scopes||(he.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=he;try{return he=this,t()}finally{he=e}}}on(){he=this}off(){he=this.parent}stop(t){if(this._active){let e,i;for(e=0,i=this.effects.length;e<i;e++)this.effects[e].stop();for(e=0,i=this.cleanups.length;e<i;e++)this.cleanups[e]();if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function af(r){return new of(r)}function Pg(r,t=he){t&&t.active&&t.effects.push(r)}function Mg(){return he}function Bg(r){he&&he.cleanups.push(r)}const ah=r=>{const t=new Set(r);return t.w=0,t.n=0,t},lf=r=>(r.w&Rr)>0,hf=r=>(r.n&Rr)>0,Fg=({deps:r})=>{if(r.length)for(let t=0;t<r.length;t++)r[t].w|=Rr},Dg=r=>{const{deps:t}=r;if(t.length){let e=0;for(let i=0;i<t.length;i++){const s=t[i];lf(s)&&!hf(s)?s.delete(r):t[e++]=s,s.w&=~Rr,s.n&=~Rr}t.length=e}},Yn=new WeakMap;let fs=0,Rr=1;const Wa=30;let xe;const Zr=Symbol(""),Va=Symbol("");class lh{constructor(t,e=null,i){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,Pg(this,i)}run(){if(!this.active)return this.fn();let t=xe,e=Sr;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=xe,xe=this,Sr=!0,Rr=1<<++fs,fs<=Wa?Fg(this):Qh(this),this.fn()}finally{fs<=Wa&&Dg(this),Rr=1<<--fs,xe=this.parent,Sr=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){xe===this?this.deferStop=!0:this.active&&(Qh(this),this.onStop&&this.onStop(),this.active=!1)}}function Qh(r){const{deps:t}=r;if(t.length){for(let e=0;e<t.length;e++)t[e].delete(r);t.length=0}}let Sr=!0;const cf=[];function ts(){cf.push(Sr),Sr=!1}function es(){const r=cf.pop();Sr=r===void 0?!0:r}function oe(r,t,e){if(Sr&&xe){let i=Yn.get(r);i||Yn.set(r,i=new Map);let s=i.get(e);s||i.set(e,s=ah()),uf(s)}}function uf(r,t){let e=!1;fs<=Wa?hf(r)||(r.n|=Rr,e=!lf(r)):e=!r.has(xe),e&&(r.add(xe),xe.deps.push(r))}function lr(r,t,e,i,s,n){const o=Yn.get(r);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(e==="length"&&ft(r)){const l=Number(i);o.forEach((h,c)=>{(c==="length"||!Eo(c)&&c>=l)&&a.push(h)})}else switch(e!==void 0&&a.push(o.get(e)),t){case"add":ft(r)?sh(e)&&a.push(o.get("length")):(a.push(o.get(Zr)),As(r)&&a.push(o.get(Va)));break;case"delete":ft(r)||(a.push(o.get(Zr)),As(r)&&a.push(o.get(Va)));break;case"set":As(r)&&a.push(o.get(Zr));break}if(a.length===1)a[0]&&Xa(a[0]);else{const l=[];for(const h of a)h&&l.push(...h);Xa(ah(l))}}function Xa(r,t){const e=ft(r)?r:[...r];for(const i of e)i.computed&&Jh(i);for(const i of e)i.computed||Jh(i)}function Jh(r,t){(r!==xe||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}function Og(r,t){var e;return(e=Yn.get(r))==null?void 0:e.get(t)}const Ng=eh("__proto__,__v_isRef,__isVue"),df=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(Eo)),tc=Lg();function Lg(){const r={};return["includes","indexOf","lastIndexOf"].forEach(t=>{r[t]=function(...e){const i=Tt(this);for(let n=0,o=this.length;n<o;n++)oe(i,"get",n+"");const s=i[t](...e);return s===-1||s===!1?i[t](...e.map(Tt)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{r[t]=function(...e){ts();const i=Tt(this)[t].apply(this,e);return es(),i}}),r}function kg(r){const t=Tt(this);return oe(t,"has",r),t.hasOwnProperty(r)}class ff{constructor(t=!1,e=!1){this._isReadonly=t,this._shallow=e}get(t,e,i){const s=this._isReadonly,n=this._shallow;if(e==="__v_isReactive")return!s;if(e==="__v_isReadonly")return s;if(e==="__v_isShallow")return n;if(e==="__v_raw"&&i===(s?n?Zg:yf:n?gf:mf).get(t))return t;const o=ft(t);if(!s){if(o&&Et(tc,e))return Reflect.get(tc,e,i);if(e==="hasOwnProperty")return kg}const a=Reflect.get(t,e,i);return(Eo(e)?df.has(e):Ng(e))||(s||oe(t,"get",e),n)?a:qt(a)?o&&sh(e)?a:a.value:Ut(a)?s?vf(a):li(a):a}}class pf extends ff{constructor(t=!1){super(!1,t)}set(t,e,i,s){let n=t[e];if(Vi(n)&&qt(n)&&!qt(i))return!1;if(!this._shallow&&(!qn(i)&&!Vi(i)&&(n=Tt(n),i=Tt(i)),!ft(t)&&qt(n)&&!qt(i)))return n.value=i,!0;const o=ft(t)&&sh(e)?Number(e)<t.length:Et(t,e),a=Reflect.set(t,e,i,s);return t===Tt(s)&&(o?si(i,n)&&lr(t,"set",e,i):lr(t,"add",e,i)),a}deleteProperty(t,e){const i=Et(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&i&&lr(t,"delete",e,void 0),s}has(t,e){const i=Reflect.has(t,e);return(!Eo(e)||!df.has(e))&&oe(t,"has",e),i}ownKeys(t){return oe(t,"iterate",ft(t)?"length":Zr),Reflect.ownKeys(t)}}class Ug extends ff{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const Gg=new pf,Hg=new Ug,$g=new pf(!0),hh=r=>r,Co=r=>Reflect.getPrototypeOf(r);function Zs(r,t,e=!1,i=!1){r=r.__v_raw;const s=Tt(r),n=Tt(t);e||(si(t,n)&&oe(s,"get",t),oe(s,"get",n));const{has:o}=Co(s),a=i?hh:e?fh:Fs;if(o.call(s,t))return a(r.get(t));if(o.call(s,n))return a(r.get(n));r!==s&&r.get(t)}function Qs(r,t=!1){const e=this.__v_raw,i=Tt(e),s=Tt(r);return t||(si(r,s)&&oe(i,"has",r),oe(i,"has",s)),r===s?e.has(r):e.has(r)||e.has(s)}function Js(r,t=!1){return r=r.__v_raw,!t&&oe(Tt(r),"iterate",Zr),Reflect.get(r,"size",r)}function ec(r){r=Tt(r);const t=Tt(this);return Co(t).has.call(t,r)||(t.add(r),lr(t,"add",r,r)),this}function rc(r,t){t=Tt(t);const e=Tt(this),{has:i,get:s}=Co(e);let n=i.call(e,r);n||(r=Tt(r),n=i.call(e,r));const o=s.call(e,r);return e.set(r,t),n?si(t,o)&&lr(e,"set",r,t):lr(e,"add",r,t),this}function ic(r){const t=Tt(this),{has:e,get:i}=Co(t);let s=e.call(t,r);s||(r=Tt(r),s=e.call(t,r)),i&&i.call(t,r);const n=t.delete(r);return s&&lr(t,"delete",r,void 0),n}function sc(){const r=Tt(this),t=r.size!==0,e=r.clear();return t&&lr(r,"clear",void 0,void 0),e}function tn(r,t){return function(i,s){const n=this,o=n.__v_raw,a=Tt(o),l=t?hh:r?fh:Fs;return!r&&oe(a,"iterate",Zr),o.forEach((h,c)=>i.call(s,l(h),l(c),n))}}function en(r,t,e){return function(...i){const s=this.__v_raw,n=Tt(s),o=As(n),a=r==="entries"||r===Symbol.iterator&&o,l=r==="keys"&&o,h=s[r](...i),c=e?hh:t?fh:Fs;return!t&&oe(n,"iterate",l?Va:Zr),{next(){const{value:u,done:d}=h.next();return d?{value:u,done:d}:{value:a?[c(u[0]),c(u[1])]:c(u),done:d}},[Symbol.iterator](){return this}}}}function fr(r){return function(...t){return r==="delete"?!1:r==="clear"?void 0:this}}function Wg(){const r={get(n){return Zs(this,n)},get size(){return Js(this)},has:Qs,add:ec,set:rc,delete:ic,clear:sc,forEach:tn(!1,!1)},t={get(n){return Zs(this,n,!1,!0)},get size(){return Js(this)},has:Qs,add:ec,set:rc,delete:ic,clear:sc,forEach:tn(!1,!0)},e={get(n){return Zs(this,n,!0)},get size(){return Js(this,!0)},has(n){return Qs.call(this,n,!0)},add:fr("add"),set:fr("set"),delete:fr("delete"),clear:fr("clear"),forEach:tn(!0,!1)},i={get(n){return Zs(this,n,!0,!0)},get size(){return Js(this,!0)},has(n){return Qs.call(this,n,!0)},add:fr("add"),set:fr("set"),delete:fr("delete"),clear:fr("clear"),forEach:tn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{r[n]=en(n,!1,!1),e[n]=en(n,!0,!1),t[n]=en(n,!1,!0),i[n]=en(n,!0,!0)}),[r,e,t,i]}const[Vg,Xg,zg,jg]=Wg();function ch(r,t){const e=t?r?jg:zg:r?Xg:Vg;return(i,s,n)=>s==="__v_isReactive"?!r:s==="__v_isReadonly"?r:s==="__v_raw"?i:Reflect.get(Et(e,s)&&s in i?e:i,s,n)}const Yg={get:ch(!1,!1)},qg={get:ch(!1,!0)},Kg={get:ch(!0,!1)},mf=new WeakMap,gf=new WeakMap,yf=new WeakMap,Zg=new WeakMap;function Qg(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Jg(r){return r.__v_skip||!Object.isExtensible(r)?0:Qg(vg(r))}function li(r){return Vi(r)?r:uh(r,!1,Gg,Yg,mf)}function _f(r){return uh(r,!1,$g,qg,gf)}function vf(r){return uh(r,!0,Hg,Kg,yf)}function uh(r,t,e,i,s){if(!Ut(r)||r.__v_raw&&!(t&&r.__v_isReactive))return r;const n=s.get(r);if(n)return n;const o=Jg(r);if(o===0)return r;const a=new Proxy(r,o===2?i:e);return s.set(r,a),a}function Di(r){return Vi(r)?Di(r.__v_raw):!!(r&&r.__v_isReactive)}function Vi(r){return!!(r&&r.__v_isReadonly)}function qn(r){return!!(r&&r.__v_isShallow)}function xf(r){return Di(r)||Vi(r)}function Tt(r){const t=r&&r.__v_raw;return t?Tt(t):r}function dh(r){return jn(r,"__v_skip",!0),r}const Fs=r=>Ut(r)?li(r):r,fh=r=>Ut(r)?vf(r):r;function bf(r){Sr&&xe&&(r=Tt(r),uf(r.dep||(r.dep=ah())))}function Af(r,t){r=Tt(r);const e=r.dep;e&&Xa(e)}function qt(r){return!!(r&&r.__v_isRef===!0)}function Pr(r){return Ef(r,!1)}function Qr(r){return Ef(r,!0)}function Ef(r,t){return qt(r)?r:new t0(r,t)}class t0{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Tt(t),this._value=e?t:Fs(t)}get value(){return bf(this),this._value}set value(t){const e=this.__v_isShallow||qn(t)||Vi(t);t=e?t:Tt(t),si(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:Fs(t),Af(this))}}function Oi(r){return qt(r)?r.value:r}const e0={get:(r,t,e)=>Oi(Reflect.get(r,t,e)),set:(r,t,e,i)=>{const s=r[t];return qt(s)&&!qt(e)?(s.value=e,!0):Reflect.set(r,t,e,i)}};function Tf(r){return Di(r)?r:new Proxy(r,e0)}function r0(r){const t=ft(r)?new Array(r.length):{};for(const e in r)t[e]=s0(r,e);return t}class i0{constructor(t,e,i){this._object=t,this._key=e,this._defaultValue=i,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Og(Tt(this._object),this._key)}}function s0(r,t,e){const i=r[t];return qt(i)?i:new i0(r,t,e)}class n0{constructor(t,e,i,s){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new lh(t,()=>{this._dirty||(this._dirty=!0,Af(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const t=Tt(this);return bf(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function o0(r,t,e=!1){let i,s;const n=mt(r);return n?(i=r,s=Ee):(i=r.get,s=r.set),new n0(i,s,n||!s,e)}function Cr(r,t,e,i){let s;try{s=i?r(...i):r()}catch(n){Io(n,t,e)}return s}function Te(r,t,e,i){if(mt(r)){const n=Cr(r,t,e,i);return n&&sf(n)&&n.catch(o=>{Io(o,t,e)}),n}const s=[];for(let n=0;n<r.length;n++)s.push(Te(r[n],t,e,i));return s}function Io(r,t,e,i=!0){const s=t?t.vnode:null;if(t){let n=t.parent;const o=t.proxy,a=e;for(;n;){const h=n.ec;if(h){for(let c=0;c<h.length;c++)if(h[c](r,o,a)===!1)return}n=n.parent}const l=t.appContext.config.errorHandler;if(l){Cr(l,null,10,[r,o,a]);return}}a0(r,e,s,i)}function a0(r,t,e,i=!0){console.error(r)}let Ds=!1,za=!1;const Jt=[];let Ge=0;const Ni=[];let tr=null,jr=0;const wf=Promise.resolve();let ph=null;function mh(r){const t=ph||wf;return r?t.then(this?r.bind(this):r):t}function l0(r){let t=Ge+1,e=Jt.length;for(;t<e;){const i=t+e>>>1,s=Jt[i],n=Os(s);n<r||n===r&&s.pre?t=i+1:e=i}return t}function gh(r){(!Jt.length||!Jt.includes(r,Ds&&r.allowRecurse?Ge+1:Ge))&&(r.id==null?Jt.push(r):Jt.splice(l0(r.id),0,r),Sf())}function Sf(){!Ds&&!za&&(za=!0,ph=wf.then(If))}function h0(r){const t=Jt.indexOf(r);t>Ge&&Jt.splice(t,1)}function c0(r){ft(r)?Ni.push(...r):(!tr||!tr.includes(r,r.allowRecurse?jr+1:jr))&&Ni.push(r),Sf()}function nc(r,t=Ds?Ge+1:0){for(;t<Jt.length;t++){const e=Jt[t];e&&e.pre&&(Jt.splice(t,1),t--,e())}}function Cf(r){if(Ni.length){const t=[...new Set(Ni)];if(Ni.length=0,tr){tr.push(...t);return}for(tr=t,tr.sort((e,i)=>Os(e)-Os(i)),jr=0;jr<tr.length;jr++)tr[jr]();tr=null,jr=0}}const Os=r=>r.id==null?1/0:r.id,u0=(r,t)=>{const e=Os(r)-Os(t);if(e===0){if(r.pre&&!t.pre)return-1;if(t.pre&&!r.pre)return 1}return e};function If(r){za=!1,Ds=!0,Jt.sort(u0);const t=Ee;try{for(Ge=0;Ge<Jt.length;Ge++){const e=Jt[Ge];e&&e.active!==!1&&Cr(e,null,14)}}finally{Ge=0,Jt.length=0,Cf(),Ds=!1,ph=null,(Jt.length||Ni.length)&&If()}}function d0(r,t,...e){if(r.isUnmounted)return;const i=r.vnode.props||Mt;let s=e;const n=t.startsWith("update:"),o=n&&t.slice(7);if(o&&o in i){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:u,trim:d}=i[c]||Mt;d&&(s=e.map(f=>Zt(f)?f.trim():f)),u&&(s=e.map(Eg))}let a,l=i[a=zo(t)]||i[a=zo(je(t))];!l&&n&&(l=i[a=zo(Ji(t))]),l&&Te(l,r,6,s);const h=i[a+"Once"];if(h){if(!r.emitted)r.emitted={};else if(r.emitted[a])return;r.emitted[a]=!0,Te(h,r,6,s)}}function Rf(r,t,e=!1){const i=t.emitsCache,s=i.get(r);if(s!==void 0)return s;const n=r.emits;let o={},a=!1;if(!mt(r)){const l=h=>{const c=Rf(h,t,!0);c&&(a=!0,Kt(o,c))};!e&&t.mixins.length&&t.mixins.forEach(l),r.extends&&l(r.extends),r.mixins&&r.mixins.forEach(l)}return!n&&!a?(Ut(r)&&i.set(r,null),null):(ft(n)?n.forEach(l=>o[l]=null):Kt(o,n),Ut(r)&&i.set(r,o),o)}function Ro(r,t){return!r||!Ao(t)?!1:(t=t.slice(2).replace(/Once$/,""),Et(r,t[0].toLowerCase()+t.slice(1))||Et(r,Ji(t))||Et(r,t))}let de=null,Pf=null;function Kn(r){const t=de;return de=r,Pf=r&&r.type.__scopeId||null,t}function f0(r,t=de,e){if(!t||r._n)return r;const i=(...s)=>{i._d&&gc(-1);const n=Kn(t);let o;try{o=r(...s)}finally{Kn(n),i._d&&gc(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Yo(r){const{type:t,vnode:e,proxy:i,withProxy:s,props:n,propsOptions:[o],slots:a,attrs:l,emit:h,render:c,renderCache:u,data:d,setupState:f,ctx:p,inheritAttrs:m}=r;let g,y;const A=Kn(r);try{if(e.shapeFlag&4){const b=s||i,C=b;g=Le(c.call(C,b,u,n,f,d,p)),y=l}else{const b=t;g=Le(b.length>1?b(n,{attrs:l,slots:a,emit:h}):b(n,null)),y=t.props?l:p0(l)}}catch(b){ws.length=0,Io(b,r,1),g=kt(Ns)}let _=g;if(y&&m!==!1){const b=Object.keys(y),{shapeFlag:C}=_;b.length&&C&7&&(o&&b.some(rh)&&(y=m0(y,o)),_=Xi(_,y))}return e.dirs&&(_=Xi(_),_.dirs=_.dirs?_.dirs.concat(e.dirs):e.dirs),e.transition&&(_.transition=e.transition),g=_,Kn(A),g}const p0=r=>{let t;for(const e in r)(e==="class"||e==="style"||Ao(e))&&((t||(t={}))[e]=r[e]);return t},m0=(r,t)=>{const e={};for(const i in r)(!rh(i)||!(i.slice(9)in t))&&(e[i]=r[i]);return e};function g0(r,t,e){const{props:i,children:s,component:n}=r,{props:o,children:a,patchFlag:l}=t,h=n.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return i?oc(i,o,h):!!o;if(l&8){const c=t.dynamicProps;for(let u=0;u<c.length;u++){const d=c[u];if(o[d]!==i[d]&&!Ro(h,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?oc(i,o,h):!0:!!o;return!1}function oc(r,t,e){const i=Object.keys(t);if(i.length!==Object.keys(r).length)return!0;for(let s=0;s<i.length;s++){const n=i[s];if(t[n]!==r[n]&&!Ro(e,n))return!0}return!1}function y0({vnode:r,parent:t},e){for(;t&&t.subTree===r;)(r=t.vnode).el=e,t=t.parent}const Mf="components";function _0(r,t){return x0(Mf,r,!0,t)||r}const v0=Symbol.for("v-ndc");function x0(r,t,e=!0,i=!1){const s=de||jt;if(s){const n=s.type;if(r===Mf){const a=py(n,!1);if(a&&(a===t||a===je(t)||a===So(je(t))))return n}const o=ac(s[r]||n[r],t)||ac(s.appContext[r],t);return!o&&i?n:o}}function ac(r,t){return r&&(r[t]||r[je(t)]||r[So(je(t))])}const b0=r=>r.__isSuspense;function A0(r,t){t&&t.pendingBranch?ft(r)?t.effects.push(...r):t.effects.push(r):c0(r)}function yh(r,t){return _h(r,null,t)}const rn={};function We(r,t,e){return _h(r,t,e)}function _h(r,t,{immediate:e,deep:i,flush:s,onTrack:n,onTrigger:o}=Mt){var a;const l=Mg()===((a=jt)==null?void 0:a.scope)?jt:null;let h,c=!1,u=!1;if(qt(r)?(h=()=>r.value,c=qn(r)):Di(r)?(h=()=>r,i=!0):ft(r)?(u=!0,c=r.some(b=>Di(b)||qn(b)),h=()=>r.map(b=>{if(qt(b))return b.value;if(Di(b))return Pi(b);if(mt(b))return Cr(b,l,2)})):mt(r)?t?h=()=>Cr(r,l,2):h=()=>{if(!(l&&l.isUnmounted))return d&&d(),Te(r,l,3,[f])}:h=Ee,t&&i){const b=h;h=()=>Pi(b())}let d,f=b=>{d=A.onStop=()=>{Cr(b,l,4),d=A.onStop=void 0}},p;if(ks)if(f=Ee,t?e&&Te(t,l,3,[h(),u?[]:void 0,f]):h(),s==="sync"){const b=yy();p=b.__watcherHandles||(b.__watcherHandles=[])}else return Ee;let m=u?new Array(r.length).fill(rn):rn;const g=()=>{if(A.active)if(t){const b=A.run();(i||c||(u?b.some((C,N)=>si(C,m[N])):si(b,m)))&&(d&&d(),Te(t,l,3,[b,m===rn?void 0:u&&m[0]===rn?[]:m,f]),m=b)}else A.run()};g.allowRecurse=!!t;let y;s==="sync"?y=g:s==="post"?y=()=>ie(g,l&&l.suspense):(g.pre=!0,l&&(g.id=l.uid),y=()=>gh(g));const A=new lh(h,y);t?e?g():m=A.run():s==="post"?ie(A.run.bind(A),l&&l.suspense):A.run();const _=()=>{A.stop(),l&&l.scope&&ih(l.scope.effects,A)};return p&&p.push(_),_}function E0(r,t,e){const i=this.proxy,s=Zt(r)?r.includes(".")?Bf(i,r):()=>i[r]:r.bind(i,i);let n;mt(t)?n=t:(n=t.handler,e=t);const o=jt;zi(this);const a=_h(s,n.bind(i),e);return o?zi(o):Jr(),a}function Bf(r,t){const e=t.split(".");return()=>{let i=r;for(let s=0;s<e.length&&i;s++)i=i[e[s]];return i}}function Pi(r,t){if(!Ut(r)||r.__v_skip||(t=t||new Set,t.has(r)))return r;if(t.add(r),qt(r))Pi(r.value,t);else if(ft(r))for(let e=0;e<r.length;e++)Pi(r[e],t);else if(yg(r)||As(r))r.forEach(e=>{Pi(e,t)});else if(xg(r))for(const e in r)Pi(r[e],t);return r}function Nr(r,t,e,i){const s=r.dirs,n=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];n&&(a.oldValue=n[o].value);let l=a.dir[i];l&&(ts(),Te(l,e,8,[r.el,a,r,t]),es())}}/*! #__NO_SIDE_EFFECTS__ */function vh(r,t){return mt(r)?(()=>Kt({name:r.name},t,{setup:r}))():r}const Fn=r=>!!r.type.__asyncLoader,Ff=r=>r.type.__isKeepAlive;function T0(r,t){Df(r,"a",t)}function w0(r,t){Df(r,"da",t)}function Df(r,t,e=jt){const i=r.__wdc||(r.__wdc=()=>{let s=e;for(;s;){if(s.isDeactivated)return;s=s.parent}return r()});if(Po(t,i,e),e){let s=e.parent;for(;s&&s.parent;)Ff(s.parent.vnode)&&S0(i,t,e,s),s=s.parent}}function S0(r,t,e,i){const s=Po(t,r,i,!0);Of(()=>{ih(i[t],s)},e)}function Po(r,t,e=jt,i=!1){if(e){const s=e[r]||(e[r]=[]),n=t.__weh||(t.__weh=(...o)=>{if(e.isUnmounted)return;ts(),zi(e);const a=Te(t,e,r,o);return Jr(),es(),a});return i?s.unshift(n):s.push(n),n}}const dr=r=>(t,e=jt)=>(!ks||r==="sp")&&Po(r,(...i)=>t(...i),e),C0=dr("bm"),I0=dr("m"),R0=dr("bu"),P0=dr("u"),M0=dr("bum"),Of=dr("um"),B0=dr("sp"),F0=dr("rtg"),D0=dr("rtc");function O0(r,t=jt){Po("ec",r,t)}const ja=r=>r?Yf(r)?wh(r)||r.proxy:ja(r.parent):null,Es=Kt(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>ja(r.parent),$root:r=>ja(r.root),$emit:r=>r.emit,$options:r=>xh(r),$forceUpdate:r=>r.f||(r.f=()=>gh(r.update)),$nextTick:r=>r.n||(r.n=mh.bind(r.proxy)),$watch:r=>E0.bind(r)}),qo=(r,t)=>r!==Mt&&!r.__isScriptSetup&&Et(r,t),N0={get({_:r},t){const{ctx:e,setupState:i,data:s,props:n,accessCache:o,type:a,appContext:l}=r;let h;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return i[t];case 2:return s[t];case 4:return e[t];case 3:return n[t]}else{if(qo(i,t))return o[t]=1,i[t];if(s!==Mt&&Et(s,t))return o[t]=2,s[t];if((h=r.propsOptions[0])&&Et(h,t))return o[t]=3,n[t];if(e!==Mt&&Et(e,t))return o[t]=4,e[t];Ya&&(o[t]=0)}}const c=Es[t];let u,d;if(c)return t==="$attrs"&&oe(r,"get",t),c(r);if((u=a.__cssModules)&&(u=u[t]))return u;if(e!==Mt&&Et(e,t))return o[t]=4,e[t];if(d=l.config.globalProperties,Et(d,t))return d[t]},set({_:r},t,e){const{data:i,setupState:s,ctx:n}=r;return qo(s,t)?(s[t]=e,!0):i!==Mt&&Et(i,t)?(i[t]=e,!0):Et(r.props,t)||t[0]==="$"&&t.slice(1)in r?!1:(n[t]=e,!0)},has({_:{data:r,setupState:t,accessCache:e,ctx:i,appContext:s,propsOptions:n}},o){let a;return!!e[o]||r!==Mt&&Et(r,o)||qo(t,o)||(a=n[0])&&Et(a,o)||Et(i,o)||Et(Es,o)||Et(s.config.globalProperties,o)},defineProperty(r,t,e){return e.get!=null?r._.accessCache[t]=0:Et(e,"value")&&this.set(r,t,e.value,null),Reflect.defineProperty(r,t,e)}};function lc(r){return ft(r)?r.reduce((t,e)=>(t[e]=null,t),{}):r}let Ya=!0;function L0(r){const t=xh(r),e=r.proxy,i=r.ctx;Ya=!1,t.beforeCreate&&hc(t.beforeCreate,r,"bc");const{data:s,computed:n,methods:o,watch:a,provide:l,inject:h,created:c,beforeMount:u,mounted:d,beforeUpdate:f,updated:p,activated:m,deactivated:g,beforeDestroy:y,beforeUnmount:A,destroyed:_,unmounted:b,render:C,renderTracked:N,renderTriggered:P,errorCaptured:I,serverPrefetch:W,expose:Z,inheritAttrs:ct,components:H,directives:T,filters:F}=t;if(h&&k0(h,i,null),o)for(const $ in o){const j=o[$];mt(j)&&(i[$]=j.bind(e))}if(s){const $=s.call(e,e);Ut($)&&(r.data=li($))}if(Ya=!0,n)for(const $ in n){const j=n[$],wt=mt(j)?j.bind(e,e):mt(j.get)?j.get.bind(e,e):Ee,k=!mt(j)&&mt(j.set)?j.set.bind(e):Ee,L=Dt({get:wt,set:k});Object.defineProperty(i,$,{enumerable:!0,configurable:!0,get:()=>L.value,set:ht=>L.value=ht})}if(a)for(const $ in a)Nf(a[$],i,e,$);if(l){const $=mt(l)?l.call(e):l;Reflect.ownKeys($).forEach(j=>{Ts(j,$[j])})}c&&hc(c,r,"c");function Q($,j){ft(j)?j.forEach(wt=>$(wt.bind(e))):j&&$(j.bind(e))}if(Q(C0,u),Q(I0,d),Q(R0,f),Q(P0,p),Q(T0,m),Q(w0,g),Q(O0,I),Q(D0,N),Q(F0,P),Q(M0,A),Q(Of,b),Q(B0,W),ft(Z))if(Z.length){const $=r.exposed||(r.exposed={});Z.forEach(j=>{Object.defineProperty($,j,{get:()=>e[j],set:wt=>e[j]=wt})})}else r.exposed||(r.exposed={});C&&r.render===Ee&&(r.render=C),ct!=null&&(r.inheritAttrs=ct),H&&(r.components=H),T&&(r.directives=T)}function k0(r,t,e=Ee){ft(r)&&(r=qa(r));for(const i in r){const s=r[i];let n;Ut(s)?"default"in s?n=Ve(s.from||i,s.default,!0):n=Ve(s.from||i):n=Ve(s),qt(n)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>n.value,set:o=>n.value=o}):t[i]=n}}function hc(r,t,e){Te(ft(r)?r.map(i=>i.bind(t.proxy)):r.bind(t.proxy),t,e)}function Nf(r,t,e,i){const s=i.includes(".")?Bf(e,i):()=>e[i];if(Zt(r)){const n=t[r];mt(n)&&We(s,n)}else if(mt(r))We(s,r.bind(e));else if(Ut(r))if(ft(r))r.forEach(n=>Nf(n,t,e,i));else{const n=mt(r.handler)?r.handler.bind(e):t[r.handler];mt(n)&&We(s,n,r)}}function xh(r){const t=r.type,{mixins:e,extends:i}=t,{mixins:s,optionsCache:n,config:{optionMergeStrategies:o}}=r.appContext,a=n.get(t);let l;return a?l=a:!s.length&&!e&&!i?l=t:(l={},s.length&&s.forEach(h=>Zn(l,h,o,!0)),Zn(l,t,o)),Ut(t)&&n.set(t,l),l}function Zn(r,t,e,i=!1){const{mixins:s,extends:n}=t;n&&Zn(r,n,e,!0),s&&s.forEach(o=>Zn(r,o,e,!0));for(const o in t)if(!(i&&o==="expose")){const a=U0[o]||e&&e[o];r[o]=a?a(r[o],t[o]):t[o]}return r}const U0={data:cc,props:uc,emits:uc,methods:ps,computed:ps,beforeCreate:ee,created:ee,beforeMount:ee,mounted:ee,beforeUpdate:ee,updated:ee,beforeDestroy:ee,beforeUnmount:ee,destroyed:ee,unmounted:ee,activated:ee,deactivated:ee,errorCaptured:ee,serverPrefetch:ee,components:ps,directives:ps,watch:H0,provide:cc,inject:G0};function cc(r,t){return t?r?function(){return Kt(mt(r)?r.call(this,this):r,mt(t)?t.call(this,this):t)}:t:r}function G0(r,t){return ps(qa(r),qa(t))}function qa(r){if(ft(r)){const t={};for(let e=0;e<r.length;e++)t[r[e]]=r[e];return t}return r}function ee(r,t){return r?[...new Set([].concat(r,t))]:t}function ps(r,t){return r?Kt(Object.create(null),r,t):t}function uc(r,t){return r?ft(r)&&ft(t)?[...new Set([...r,...t])]:Kt(Object.create(null),lc(r),lc(t??{})):t}function H0(r,t){if(!r)return t;if(!t)return r;const e=Kt(Object.create(null),r);for(const i in t)e[i]=ee(r[i],t[i]);return e}function Lf(){return{app:null,config:{isNativeTag:pg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let $0=0;function W0(r,t){return function(i,s=null){mt(i)||(i=Kt({},i)),s!=null&&!Ut(s)&&(s=null);const n=Lf(),o=new WeakSet;let a=!1;const l=n.app={_uid:$0++,_component:i,_props:s,_container:null,_context:n,_instance:null,version:_y,get config(){return n.config},set config(h){},use(h,...c){return o.has(h)||(h&&mt(h.install)?(o.add(h),h.install(l,...c)):mt(h)&&(o.add(h),h(l,...c))),l},mixin(h){return n.mixins.includes(h)||n.mixins.push(h),l},component(h,c){return c?(n.components[h]=c,l):n.components[h]},directive(h,c){return c?(n.directives[h]=c,l):n.directives[h]},mount(h,c,u){if(!a){const d=kt(i,s);return d.appContext=n,c&&t?t(d,h):r(d,h,u),a=!0,l._container=h,h.__vue_app__=l,wh(d.component)||d.component.proxy}},unmount(){a&&(r(null,l._container),delete l._container.__vue_app__)},provide(h,c){return n.provides[h]=c,l},runWithContext(h){Qn=l;try{return h()}finally{Qn=null}}};return l}}let Qn=null;function Ts(r,t){if(jt){let e=jt.provides;const i=jt.parent&&jt.parent.provides;i===e&&(e=jt.provides=Object.create(i)),e[r]=t}}function Ve(r,t,e=!1){const i=jt||de;if(i||Qn){const s=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Qn._context.provides;if(s&&r in s)return s[r];if(arguments.length>1)return e&&mt(t)?t.call(i&&i.proxy):t}}function V0(r,t,e,i=!1){const s={},n={};jn(n,Bo,1),r.propsDefaults=Object.create(null),kf(r,t,s,n);for(const o in r.propsOptions[0])o in s||(s[o]=void 0);e?r.props=i?s:_f(s):r.type.props?r.props=s:r.props=n,r.attrs=n}function X0(r,t,e,i){const{props:s,attrs:n,vnode:{patchFlag:o}}=r,a=Tt(s),[l]=r.propsOptions;let h=!1;if((i||o>0)&&!(o&16)){if(o&8){const c=r.vnode.dynamicProps;for(let u=0;u<c.length;u++){let d=c[u];if(Ro(r.emitsOptions,d))continue;const f=t[d];if(l)if(Et(n,d))f!==n[d]&&(n[d]=f,h=!0);else{const p=je(d);s[p]=Ka(l,a,p,f,r,!1)}else f!==n[d]&&(n[d]=f,h=!0)}}}else{kf(r,t,s,n)&&(h=!0);let c;for(const u in a)(!t||!Et(t,u)&&((c=Ji(u))===u||!Et(t,c)))&&(l?e&&(e[u]!==void 0||e[c]!==void 0)&&(s[u]=Ka(l,a,u,void 0,r,!0)):delete s[u]);if(n!==a)for(const u in n)(!t||!Et(t,u))&&(delete n[u],h=!0)}h&&lr(r,"set","$attrs")}function kf(r,t,e,i){const[s,n]=r.propsOptions;let o=!1,a;if(t)for(let l in t){if(Bn(l))continue;const h=t[l];let c;s&&Et(s,c=je(l))?!n||!n.includes(c)?e[c]=h:(a||(a={}))[c]=h:Ro(r.emitsOptions,l)||(!(l in i)||h!==i[l])&&(i[l]=h,o=!0)}if(n){const l=Tt(e),h=a||Mt;for(let c=0;c<n.length;c++){const u=n[c];e[u]=Ka(s,l,u,h[u],r,!Et(h,u))}}return o}function Ka(r,t,e,i,s,n){const o=r[e];if(o!=null){const a=Et(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&mt(l)){const{propsDefaults:h}=s;e in h?i=h[e]:(zi(s),i=h[e]=l.call(null,t),Jr())}else i=l}o[0]&&(n&&!a?i=!1:o[1]&&(i===""||i===Ji(e))&&(i=!0))}return i}function Uf(r,t,e=!1){const i=t.propsCache,s=i.get(r);if(s)return s;const n=r.props,o={},a=[];let l=!1;if(!mt(r)){const c=u=>{l=!0;const[d,f]=Uf(u,t,!0);Kt(o,d),f&&a.push(...f)};!e&&t.mixins.length&&t.mixins.forEach(c),r.extends&&c(r.extends),r.mixins&&r.mixins.forEach(c)}if(!n&&!l)return Ut(r)&&i.set(r,Fi),Fi;if(ft(n))for(let c=0;c<n.length;c++){const u=je(n[c]);dc(u)&&(o[u]=Mt)}else if(n)for(const c in n){const u=je(c);if(dc(u)){const d=n[c],f=o[u]=ft(d)||mt(d)?{type:d}:Kt({},d);if(f){const p=mc(Boolean,f.type),m=mc(String,f.type);f[0]=p>-1,f[1]=m<0||p<m,(p>-1||Et(f,"default"))&&a.push(u)}}}const h=[o,a];return Ut(r)&&i.set(r,h),h}function dc(r){return r[0]!=="$"}function fc(r){const t=r&&r.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:r===null?"null":""}function pc(r,t){return fc(r)===fc(t)}function mc(r,t){return ft(t)?t.findIndex(e=>pc(e,r)):mt(t)&&pc(t,r)?0:-1}const Gf=r=>r[0]==="_"||r==="$stable",bh=r=>ft(r)?r.map(Le):[Le(r)],z0=(r,t,e)=>{if(t._n)return t;const i=f0((...s)=>bh(t(...s)),e);return i._c=!1,i},Hf=(r,t,e)=>{const i=r._ctx;for(const s in r){if(Gf(s))continue;const n=r[s];if(mt(n))t[s]=z0(s,n,i);else if(n!=null){const o=bh(n);t[s]=()=>o}}},$f=(r,t)=>{const e=bh(t);r.slots.default=()=>e},j0=(r,t)=>{if(r.vnode.shapeFlag&32){const e=t._;e?(r.slots=Tt(t),jn(t,"_",e)):Hf(t,r.slots={})}else r.slots={},t&&$f(r,t);jn(r.slots,Bo,1)},Y0=(r,t,e)=>{const{vnode:i,slots:s}=r;let n=!0,o=Mt;if(i.shapeFlag&32){const a=t._;a?e&&a===1?n=!1:(Kt(s,t),!e&&a===1&&delete s._):(n=!t.$stable,Hf(t,s)),o=t}else t&&($f(r,t),o={default:1});if(n)for(const a in s)!Gf(a)&&o[a]==null&&delete s[a]};function Za(r,t,e,i,s=!1){if(ft(r)){r.forEach((d,f)=>Za(d,t&&(ft(t)?t[f]:t),e,i,s));return}if(Fn(i)&&!s)return;const n=i.shapeFlag&4?wh(i.component)||i.component.proxy:i.el,o=s?null:n,{i:a,r:l}=r,h=t&&t.r,c=a.refs===Mt?a.refs={}:a.refs,u=a.setupState;if(h!=null&&h!==l&&(Zt(h)?(c[h]=null,Et(u,h)&&(u[h]=null)):qt(h)&&(h.value=null)),mt(l))Cr(l,a,12,[o,c]);else{const d=Zt(l),f=qt(l);if(d||f){const p=()=>{if(r.f){const m=d?Et(u,l)?u[l]:c[l]:l.value;s?ft(m)&&ih(m,n):ft(m)?m.includes(n)||m.push(n):d?(c[l]=[n],Et(u,l)&&(u[l]=c[l])):(l.value=[n],r.k&&(c[r.k]=l.value))}else d?(c[l]=o,Et(u,l)&&(u[l]=o)):f&&(l.value=o,r.k&&(c[r.k]=o))};o?(p.id=-1,ie(p,e)):p()}}}const ie=A0;function q0(r){return K0(r)}function K0(r,t){const e=$a();e.__VUE__=!0;const{insert:i,remove:s,patchProp:n,createElement:o,createText:a,createComment:l,setText:h,setElementText:c,parentNode:u,nextSibling:d,setScopeId:f=Ee,insertStaticContent:p}=r,m=(v,x,E,w=null,R=null,M=null,X=!1,U=null,V=!!x.dynamicChildren)=>{if(v===x)return;v&&!ns(v,x)&&(w=S(v),ht(v,R,M,!0),v=null),x.patchFlag===-2&&(V=!1,x.dynamicChildren=null);const{type:B,ref:ot,shapeFlag:et}=x;switch(B){case Mo:g(v,x,E,w);break;case Ns:y(v,x,E,w);break;case Ko:v==null&&A(x,E,w,X);break;case er:H(v,x,E,w,R,M,X,U,V);break;default:et&1?C(v,x,E,w,R,M,X,U,V):et&6?T(v,x,E,w,R,M,X,U,V):(et&64||et&128)&&B.process(v,x,E,w,R,M,X,U,V,D)}ot!=null&&R&&Za(ot,v&&v.ref,M,x||v,!x)},g=(v,x,E,w)=>{if(v==null)i(x.el=a(x.children),E,w);else{const R=x.el=v.el;x.children!==v.children&&h(R,x.children)}},y=(v,x,E,w)=>{v==null?i(x.el=l(x.children||""),E,w):x.el=v.el},A=(v,x,E,w)=>{[v.el,v.anchor]=p(v.children,x,E,w,v.el,v.anchor)},_=({el:v,anchor:x},E,w)=>{let R;for(;v&&v!==x;)R=d(v),i(v,E,w),v=R;i(x,E,w)},b=({el:v,anchor:x})=>{let E;for(;v&&v!==x;)E=d(v),s(v),v=E;s(x)},C=(v,x,E,w,R,M,X,U,V)=>{X=X||x.type==="svg",v==null?N(x,E,w,R,M,X,U,V):W(v,x,R,M,X,U,V)},N=(v,x,E,w,R,M,X,U)=>{let V,B;const{type:ot,props:et,shapeFlag:at,transition:ut,dirs:_t}=v;if(V=v.el=o(v.type,M,et&&et.is,et),at&8?c(V,v.children):at&16&&I(v.children,V,null,w,R,M&&ot!=="foreignObject",X,U),_t&&Nr(v,null,w,"created"),P(V,v,v.scopeId,X,w),et){for(const Ct in et)Ct!=="value"&&!Bn(Ct)&&n(V,Ct,null,et[Ct],M,v.children,w,R,gt);"value"in et&&n(V,"value",null,et.value),(B=et.onVnodeBeforeMount)&&Me(B,w,v)}_t&&Nr(v,null,w,"beforeMount");const It=Z0(R,ut);It&&ut.beforeEnter(V),i(V,x,E),((B=et&&et.onVnodeMounted)||It||_t)&&ie(()=>{B&&Me(B,w,v),It&&ut.enter(V),_t&&Nr(v,null,w,"mounted")},R)},P=(v,x,E,w,R)=>{if(E&&f(v,E),w)for(let M=0;M<w.length;M++)f(v,w[M]);if(R){let M=R.subTree;if(x===M){const X=R.vnode;P(v,X,X.scopeId,X.slotScopeIds,R.parent)}}},I=(v,x,E,w,R,M,X,U,V=0)=>{for(let B=V;B<v.length;B++){const ot=v[B]=U?_r(v[B]):Le(v[B]);m(null,ot,x,E,w,R,M,X,U)}},W=(v,x,E,w,R,M,X)=>{const U=x.el=v.el;let{patchFlag:V,dynamicChildren:B,dirs:ot}=x;V|=v.patchFlag&16;const et=v.props||Mt,at=x.props||Mt;let ut;E&&Lr(E,!1),(ut=at.onVnodeBeforeUpdate)&&Me(ut,E,x,v),ot&&Nr(x,v,E,"beforeUpdate"),E&&Lr(E,!0);const _t=R&&x.type!=="foreignObject";if(B?Z(v.dynamicChildren,B,U,E,w,_t,M):X||j(v,x,U,null,E,w,_t,M,!1),V>0){if(V&16)ct(U,x,et,at,E,w,R);else if(V&2&&et.class!==at.class&&n(U,"class",null,at.class,R),V&4&&n(U,"style",et.style,at.style,R),V&8){const It=x.dynamicProps;for(let Ct=0;Ct<It.length;Ct++){const Gt=It[Ct],me=et[Gt],fi=at[Gt];(fi!==me||Gt==="value")&&n(U,Gt,me,fi,R,v.children,E,w,gt)}}V&1&&v.children!==x.children&&c(U,x.children)}else!X&&B==null&&ct(U,x,et,at,E,w,R);((ut=at.onVnodeUpdated)||ot)&&ie(()=>{ut&&Me(ut,E,x,v),ot&&Nr(x,v,E,"updated")},w)},Z=(v,x,E,w,R,M,X)=>{for(let U=0;U<x.length;U++){const V=v[U],B=x[U],ot=V.el&&(V.type===er||!ns(V,B)||V.shapeFlag&70)?u(V.el):E;m(V,B,ot,null,w,R,M,X,!0)}},ct=(v,x,E,w,R,M,X)=>{if(E!==w){if(E!==Mt)for(const U in E)!Bn(U)&&!(U in w)&&n(v,U,E[U],null,X,x.children,R,M,gt);for(const U in w){if(Bn(U))continue;const V=w[U],B=E[U];V!==B&&U!=="value"&&n(v,U,B,V,X,x.children,R,M,gt)}"value"in w&&n(v,"value",E.value,w.value)}},H=(v,x,E,w,R,M,X,U,V)=>{const B=x.el=v?v.el:a(""),ot=x.anchor=v?v.anchor:a("");let{patchFlag:et,dynamicChildren:at,slotScopeIds:ut}=x;ut&&(U=U?U.concat(ut):ut),v==null?(i(B,E,w),i(ot,E,w),I(x.children,E,ot,R,M,X,U,V)):et>0&&et&64&&at&&v.dynamicChildren?(Z(v.dynamicChildren,at,E,R,M,X,U),(x.key!=null||R&&x===R.subTree)&&Wf(v,x,!0)):j(v,x,E,ot,R,M,X,U,V)},T=(v,x,E,w,R,M,X,U,V)=>{x.slotScopeIds=U,v==null?x.shapeFlag&512?R.ctx.activate(x,E,w,X,V):F(x,E,w,R,M,X,V):J(v,x,V)},F=(v,x,E,w,R,M,X)=>{const U=v.component=ly(v,w,R);if(Ff(v)&&(U.ctx.renderer=D),cy(U),U.asyncDep){if(R&&R.registerDep(U,Q),!v.el){const V=U.subTree=kt(Ns);y(null,V,x,E)}return}Q(U,v,x,E,R,M,X)},J=(v,x,E)=>{const w=x.component=v.component;if(g0(v,x,E))if(w.asyncDep&&!w.asyncResolved){$(w,x,E);return}else w.next=x,h0(w.update),w.update();else x.el=v.el,w.vnode=x},Q=(v,x,E,w,R,M,X)=>{const U=()=>{if(v.isMounted){let{next:ot,bu:et,u:at,parent:ut,vnode:_t}=v,It=ot,Ct;Lr(v,!1),ot?(ot.el=_t.el,$(v,ot,X)):ot=_t,et&&jo(et),(Ct=ot.props&&ot.props.onVnodeBeforeUpdate)&&Me(Ct,ut,ot,_t),Lr(v,!0);const Gt=Yo(v),me=v.subTree;v.subTree=Gt,m(me,Gt,u(me.el),S(me),v,R,M),ot.el=Gt.el,It===null&&y0(v,Gt.el),at&&ie(at,R),(Ct=ot.props&&ot.props.onVnodeUpdated)&&ie(()=>Me(Ct,ut,ot,_t),R)}else{let ot;const{el:et,props:at}=x,{bm:ut,m:_t,parent:It}=v,Ct=Fn(x);if(Lr(v,!1),ut&&jo(ut),!Ct&&(ot=at&&at.onVnodeBeforeMount)&&Me(ot,It,x),Lr(v,!0),et&&nt){const Gt=()=>{v.subTree=Yo(v),nt(et,v.subTree,v,R,null)};Ct?x.type.__asyncLoader().then(()=>!v.isUnmounted&&Gt()):Gt()}else{const Gt=v.subTree=Yo(v);m(null,Gt,E,w,v,R,M),x.el=Gt.el}if(_t&&ie(_t,R),!Ct&&(ot=at&&at.onVnodeMounted)){const Gt=x;ie(()=>Me(ot,It,Gt),R)}(x.shapeFlag&256||It&&Fn(It.vnode)&&It.vnode.shapeFlag&256)&&v.a&&ie(v.a,R),v.isMounted=!0,x=E=w=null}},V=v.effect=new lh(U,()=>gh(B),v.scope),B=v.update=()=>V.run();B.id=v.uid,Lr(v,!0),B()},$=(v,x,E)=>{x.component=v;const w=v.vnode.props;v.vnode=x,v.next=null,X0(v,x.props,w,E),Y0(v,x.children,E),ts(),nc(),es()},j=(v,x,E,w,R,M,X,U,V=!1)=>{const B=v&&v.children,ot=v?v.shapeFlag:0,et=x.children,{patchFlag:at,shapeFlag:ut}=x;if(at>0){if(at&128){k(B,et,E,w,R,M,X,U,V);return}else if(at&256){wt(B,et,E,w,R,M,X,U,V);return}}ut&8?(ot&16&&gt(B,R,M),et!==B&&c(E,et)):ot&16?ut&16?k(B,et,E,w,R,M,X,U,V):gt(B,R,M,!0):(ot&8&&c(E,""),ut&16&&I(et,E,w,R,M,X,U,V))},wt=(v,x,E,w,R,M,X,U,V)=>{v=v||Fi,x=x||Fi;const B=v.length,ot=x.length,et=Math.min(B,ot);let at;for(at=0;at<et;at++){const ut=x[at]=V?_r(x[at]):Le(x[at]);m(v[at],ut,E,null,R,M,X,U,V)}B>ot?gt(v,R,M,!0,!1,et):I(x,E,w,R,M,X,U,V,et)},k=(v,x,E,w,R,M,X,U,V)=>{let B=0;const ot=x.length;let et=v.length-1,at=ot-1;for(;B<=et&&B<=at;){const ut=v[B],_t=x[B]=V?_r(x[B]):Le(x[B]);if(ns(ut,_t))m(ut,_t,E,null,R,M,X,U,V);else break;B++}for(;B<=et&&B<=at;){const ut=v[et],_t=x[at]=V?_r(x[at]):Le(x[at]);if(ns(ut,_t))m(ut,_t,E,null,R,M,X,U,V);else break;et--,at--}if(B>et){if(B<=at){const ut=at+1,_t=ut<ot?x[ut].el:w;for(;B<=at;)m(null,x[B]=V?_r(x[B]):Le(x[B]),E,_t,R,M,X,U,V),B++}}else if(B>at)for(;B<=et;)ht(v[B],R,M,!0),B++;else{const ut=B,_t=B,It=new Map;for(B=_t;B<=at;B++){const ae=x[B]=V?_r(x[B]):Le(x[B]);ae.key!=null&&It.set(ae.key,B)}let Ct,Gt=0;const me=at-_t+1;let fi=!1,Yh=0;const ss=new Array(me);for(B=0;B<me;B++)ss[B]=0;for(B=ut;B<=et;B++){const ae=v[B];if(Gt>=me){ht(ae,R,M,!0);continue}let Pe;if(ae.key!=null)Pe=It.get(ae.key);else for(Ct=_t;Ct<=at;Ct++)if(ss[Ct-_t]===0&&ns(ae,x[Ct])){Pe=Ct;break}Pe===void 0?ht(ae,R,M,!0):(ss[Pe-_t]=B+1,Pe>=Yh?Yh=Pe:fi=!0,m(ae,x[Pe],E,null,R,M,X,U,V),Gt++)}const qh=fi?Q0(ss):Fi;for(Ct=qh.length-1,B=me-1;B>=0;B--){const ae=_t+B,Pe=x[ae],Kh=ae+1<ot?x[ae+1].el:w;ss[B]===0?m(null,Pe,E,Kh,R,M,X,U,V):fi&&(Ct<0||B!==qh[Ct]?L(Pe,E,Kh,2):Ct--)}}},L=(v,x,E,w,R=null)=>{const{el:M,type:X,transition:U,children:V,shapeFlag:B}=v;if(B&6){L(v.component.subTree,x,E,w);return}if(B&128){v.suspense.move(x,E,w);return}if(B&64){X.move(v,x,E,D);return}if(X===er){i(M,x,E);for(let et=0;et<V.length;et++)L(V[et],x,E,w);i(v.anchor,x,E);return}if(X===Ko){_(v,x,E);return}if(w!==2&&B&1&&U)if(w===0)U.beforeEnter(M),i(M,x,E),ie(()=>U.enter(M),R);else{const{leave:et,delayLeave:at,afterLeave:ut}=U,_t=()=>i(M,x,E),It=()=>{et(M,()=>{_t(),ut&&ut()})};at?at(M,_t,It):It()}else i(M,x,E)},ht=(v,x,E,w=!1,R=!1)=>{const{type:M,props:X,ref:U,children:V,dynamicChildren:B,shapeFlag:ot,patchFlag:et,dirs:at}=v;if(U!=null&&Za(U,null,E,v,!0),ot&256){x.ctx.deactivate(v);return}const ut=ot&1&&at,_t=!Fn(v);let It;if(_t&&(It=X&&X.onVnodeBeforeUnmount)&&Me(It,x,v),ot&6)Bt(v.component,E,w);else{if(ot&128){v.suspense.unmount(E,w);return}ut&&Nr(v,null,x,"beforeUnmount"),ot&64?v.type.remove(v,x,E,R,D,w):B&&(M!==er||et>0&&et&64)?gt(B,x,E,!1,!0):(M===er&&et&384||!R&&ot&16)&&gt(V,x,E),w&&xt(v)}(_t&&(It=X&&X.onVnodeUnmounted)||ut)&&ie(()=>{It&&Me(It,x,v),ut&&Nr(v,null,x,"unmounted")},E)},xt=v=>{const{type:x,el:E,anchor:w,transition:R}=v;if(x===er){bt(E,w);return}if(x===Ko){b(v);return}const M=()=>{s(E),R&&!R.persisted&&R.afterLeave&&R.afterLeave()};if(v.shapeFlag&1&&R&&!R.persisted){const{leave:X,delayLeave:U}=R,V=()=>X(E,M);U?U(v.el,M,V):V()}else M()},bt=(v,x)=>{let E;for(;v!==x;)E=d(v),s(v),v=E;s(x)},Bt=(v,x,E)=>{const{bum:w,scope:R,update:M,subTree:X,um:U}=v;w&&jo(w),R.stop(),M&&(M.active=!1,ht(X,v,x,E)),U&&ie(U,x),ie(()=>{v.isUnmounted=!0},x),x&&x.pendingBranch&&!x.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===x.pendingId&&(x.deps--,x.deps===0&&x.resolve())},gt=(v,x,E,w=!1,R=!1,M=0)=>{for(let X=M;X<v.length;X++)ht(v[X],x,E,w,R)},S=v=>v.shapeFlag&6?S(v.component.subTree):v.shapeFlag&128?v.suspense.next():d(v.anchor||v.el),G=(v,x,E)=>{v==null?x._vnode&&ht(x._vnode,null,null,!0):m(x._vnode||null,v,x,null,null,null,E),nc(),Cf(),x._vnode=v},D={p:m,um:ht,m:L,r:xt,mt:F,mc:I,pc:j,pbc:Z,n:S,o:r};let Y,nt;return t&&([Y,nt]=t(D)),{render:G,hydrate:Y,createApp:W0(G,Y)}}function Lr({effect:r,update:t},e){r.allowRecurse=t.allowRecurse=e}function Z0(r,t){return(!r||r&&!r.pendingBranch)&&t&&!t.persisted}function Wf(r,t,e=!1){const i=r.children,s=t.children;if(ft(i)&&ft(s))for(let n=0;n<i.length;n++){const o=i[n];let a=s[n];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[n]=_r(s[n]),a.el=o.el),e||Wf(o,a)),a.type===Mo&&(a.el=o.el)}}function Q0(r){const t=r.slice(),e=[0];let i,s,n,o,a;const l=r.length;for(i=0;i<l;i++){const h=r[i];if(h!==0){if(s=e[e.length-1],r[s]<h){t[i]=s,e.push(i);continue}for(n=0,o=e.length-1;n<o;)a=n+o>>1,r[e[a]]<h?n=a+1:o=a;h<r[e[n]]&&(n>0&&(t[i]=e[n-1]),e[n]=i)}}for(n=e.length,o=e[n-1];n-- >0;)e[n]=o,o=t[o];return e}const J0=r=>r.__isTeleport,er=Symbol.for("v-fgt"),Mo=Symbol.for("v-txt"),Ns=Symbol.for("v-cmt"),Ko=Symbol.for("v-stc"),ws=[];let Ae=null;function Vf(r=!1){ws.push(Ae=r?null:[])}function ty(){ws.pop(),Ae=ws[ws.length-1]||null}let Ls=1;function gc(r){Ls+=r}function Xf(r){return r.dynamicChildren=Ls>0?Ae||Fi:null,ty(),Ls>0&&Ae&&Ae.push(r),r}function ey(r,t,e,i,s,n){return Xf(Ah(r,t,e,i,s,n,!0))}function ry(r,t,e,i,s){return Xf(kt(r,t,e,i,s,!0))}function Qa(r){return r?r.__v_isVNode===!0:!1}function ns(r,t){return r.type===t.type&&r.key===t.key}const Bo="__vInternal",zf=({key:r})=>r??null,Dn=({ref:r,ref_key:t,ref_for:e})=>(typeof r=="number"&&(r=""+r),r!=null?Zt(r)||qt(r)||mt(r)?{i:de,r,k:t,f:!!e}:r:null);function Ah(r,t=null,e=null,i=0,s=null,n=r===er?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:r,props:t,key:t&&zf(t),ref:t&&Dn(t),scopeId:Pf,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:de};return a?(Eh(l,e),n&128&&r.normalize(l)):e&&(l.shapeFlag|=Zt(e)?8:16),Ls>0&&!o&&Ae&&(l.patchFlag>0||n&6)&&l.patchFlag!==32&&Ae.push(l),l}const kt=iy;function iy(r,t=null,e=null,i=0,s=null,n=!1){if((!r||r===v0)&&(r=Ns),Qa(r)){const a=Xi(r,t,!0);return e&&Eh(a,e),Ls>0&&!n&&Ae&&(a.shapeFlag&6?Ae[Ae.indexOf(r)]=a:Ae.push(a)),a.patchFlag|=-2,a}if(my(r)&&(r=r.__vccOpts),t){t=sy(t);let{class:a,style:l}=t;a&&!Zt(a)&&(t.class=oh(a)),Ut(l)&&(xf(l)&&!ft(l)&&(l=Kt({},l)),t.style=nh(l))}const o=Zt(r)?1:b0(r)?128:J0(r)?64:Ut(r)?4:mt(r)?2:0;return Ah(r,t,e,i,s,o,n,!0)}function sy(r){return r?xf(r)||Bo in r?Kt({},r):r:null}function Xi(r,t,e=!1){const{props:i,ref:s,patchFlag:n,children:o}=r,a=t?jf(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:a,key:a&&zf(a),ref:t&&t.ref?e&&s?ft(s)?s.concat(Dn(t)):[s,Dn(t)]:Dn(t):s,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:o,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:t&&r.type!==er?n===-1?16:n|16:n,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&Xi(r.ssContent),ssFallback:r.ssFallback&&Xi(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce}}function ny(r=" ",t=0){return kt(Mo,null,r,t)}function Le(r){return r==null||typeof r=="boolean"?kt(Ns):ft(r)?kt(er,null,r.slice()):typeof r=="object"?_r(r):kt(Mo,null,String(r))}function _r(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:Xi(r)}function Eh(r,t){let e=0;const{shapeFlag:i}=r;if(t==null)t=null;else if(ft(t))e=16;else if(typeof t=="object")if(i&65){const s=t.default;s&&(s._c&&(s._d=!1),Eh(r,s()),s._c&&(s._d=!0));return}else{e=32;const s=t._;!s&&!(Bo in t)?t._ctx=de:s===3&&de&&(de.slots._===1?t._=1:(t._=2,r.patchFlag|=1024))}else mt(t)?(t={default:t,_ctx:de},e=32):(t=String(t),i&64?(e=16,t=[ny(t)]):e=8);r.children=t,r.shapeFlag|=e}function jf(...r){const t={};for(let e=0;e<r.length;e++){const i=r[e];for(const s in i)if(s==="class")t.class!==i.class&&(t.class=oh([t.class,i.class]));else if(s==="style")t.style=nh([t.style,i.style]);else if(Ao(s)){const n=t[s],o=i[s];o&&n!==o&&!(ft(n)&&n.includes(o))&&(t[s]=n?[].concat(n,o):o)}else s!==""&&(t[s]=i[s])}return t}function Me(r,t,e,i=null){Te(r,t,7,[e,i])}const oy=Lf();let ay=0;function ly(r,t,e){const i=r.type,s=(t?t.appContext:r.appContext)||oy,n={uid:ay++,vnode:r,type:i,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new of(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Uf(i,s),emitsOptions:Rf(i,s),emit:null,emitted:null,propsDefaults:Mt,inheritAttrs:i.inheritAttrs,ctx:Mt,data:Mt,props:Mt,attrs:Mt,slots:Mt,refs:Mt,setupState:Mt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=t?t.root:n,n.emit=d0.bind(null,n),r.ce&&r.ce(n),n}let jt=null;const hy=()=>jt||de;let Th,pi,yc="__VUE_INSTANCE_SETTERS__";(pi=$a()[yc])||(pi=$a()[yc]=[]),pi.push(r=>jt=r),Th=r=>{pi.length>1?pi.forEach(t=>t(r)):pi[0](r)};const zi=r=>{Th(r),r.scope.on()},Jr=()=>{jt&&jt.scope.off(),Th(null)};function Yf(r){return r.vnode.shapeFlag&4}let ks=!1;function cy(r,t=!1){ks=t;const{props:e,children:i}=r.vnode,s=Yf(r);V0(r,e,s,t),j0(r,i);const n=s?uy(r,t):void 0;return ks=!1,n}function uy(r,t){const e=r.type;r.accessCache=Object.create(null),r.proxy=dh(new Proxy(r.ctx,N0));const{setup:i}=e;if(i){const s=r.setupContext=i.length>1?fy(r):null;zi(r),ts();const n=Cr(i,r,0,[r.props,s]);if(es(),Jr(),sf(n)){if(n.then(Jr,Jr),t)return n.then(o=>{_c(r,o,t)}).catch(o=>{Io(o,r,0)});r.asyncDep=n}else _c(r,n,t)}else qf(r,t)}function _c(r,t,e){mt(t)?r.type.__ssrInlineRender?r.ssrRender=t:r.render=t:Ut(t)&&(r.setupState=Tf(t)),qf(r,e)}let vc;function qf(r,t,e){const i=r.type;if(!r.render){if(!t&&vc&&!i.render){const s=i.template||xh(r).template;if(s){const{isCustomElement:n,compilerOptions:o}=r.appContext.config,{delimiters:a,compilerOptions:l}=i,h=Kt(Kt({isCustomElement:n,delimiters:a},o),l);i.render=vc(s,h)}}r.render=i.render||Ee}{zi(r),ts();try{L0(r)}finally{es(),Jr()}}}function dy(r){return r.attrsProxy||(r.attrsProxy=new Proxy(r.attrs,{get(t,e){return oe(r,"get","$attrs"),t[e]}}))}function fy(r){const t=e=>{r.exposed=e||{}};return{get attrs(){return dy(r)},slots:r.slots,emit:r.emit,expose:t}}function wh(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(Tf(dh(r.exposed)),{get(t,e){if(e in t)return t[e];if(e in Es)return Es[e](r)},has(t,e){return e in t||e in Es}}))}function py(r,t=!0){return mt(r)?r.displayName||r.name:r.name||t&&r.__name}function my(r){return mt(r)&&"__vccOpts"in r}const Dt=(r,t)=>o0(r,t,ks);function Sh(r,t,e){const i=arguments.length;return i===2?Ut(t)&&!ft(t)?Qa(t)?kt(r,null,[t]):kt(r,t):kt(r,null,t):(i>3?e=Array.prototype.slice.call(arguments,2):i===3&&Qa(e)&&(e=[e]),kt(r,t,e))}const gy=Symbol.for("v-scx"),yy=()=>Ve(gy),_y="3.3.9",vy="http://www.w3.org/2000/svg",Yr=typeof document<"u"?document:null,xc=Yr&&Yr.createElement("template"),xy={insert:(r,t,e)=>{t.insertBefore(r,e||null)},remove:r=>{const t=r.parentNode;t&&t.removeChild(r)},createElement:(r,t,e,i)=>{const s=t?Yr.createElementNS(vy,r):Yr.createElement(r,e?{is:e}:void 0);return r==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:r=>Yr.createTextNode(r),createComment:r=>Yr.createComment(r),setText:(r,t)=>{r.nodeValue=t},setElementText:(r,t)=>{r.textContent=t},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>Yr.querySelector(r),setScopeId(r,t){r.setAttribute(t,"")},insertStaticContent(r,t,e,i,s,n){const o=e?e.previousSibling:t.lastChild;if(s&&(s===n||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),e),!(s===n||!(s=s.nextSibling)););else{xc.innerHTML=i?`<svg>${r}</svg>`:r;const a=xc.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},by=Symbol("_vtc");function Ay(r,t,e){const i=r[by];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?r.removeAttribute("class"):e?r.setAttribute("class",t):r.className=t}const Ey=Symbol("_vod");function Ty(r,t,e){const i=r.style,s=Zt(e);if(e&&!s){if(t&&!Zt(t))for(const n in t)e[n]==null&&Ja(i,n,"");for(const n in e)Ja(i,n,e[n])}else{const n=i.display;s?t!==e&&(i.cssText=e):t&&r.removeAttribute("style"),Ey in r&&(i.display=n)}}const bc=/\s*!important$/;function Ja(r,t,e){if(ft(e))e.forEach(i=>Ja(r,t,i));else if(e==null&&(e=""),t.startsWith("--"))r.setProperty(t,e);else{const i=wy(r,t);bc.test(e)?r.setProperty(Ji(i),e.replace(bc,""),"important"):r[i]=e}}const Ac=["Webkit","Moz","ms"],Zo={};function wy(r,t){const e=Zo[t];if(e)return e;let i=je(t);if(i!=="filter"&&i in r)return Zo[t]=i;i=So(i);for(let s=0;s<Ac.length;s++){const n=Ac[s]+i;if(n in r)return Zo[t]=n}return t}const Ec="http://www.w3.org/1999/xlink";function Sy(r,t,e,i,s){if(i&&t.startsWith("xlink:"))e==null?r.removeAttributeNS(Ec,t.slice(6,t.length)):r.setAttributeNS(Ec,t,e);else{const n=Rg(t);e==null||n&&!nf(e)?r.removeAttribute(t):r.setAttribute(t,n?"":e)}}function Cy(r,t,e,i,s,n,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,s,n),r[t]=e??"";return}const a=r.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){r._value=e;const h=a==="OPTION"?r.getAttribute("value"):r.value,c=e??"";h!==c&&(r.value=c),e==null&&r.removeAttribute(t);return}let l=!1;if(e===""||e==null){const h=typeof r[t];h==="boolean"?e=nf(e):e==null&&h==="string"?(e="",l=!0):h==="number"&&(e=0,l=!0)}try{r[t]=e}catch{}l&&r.removeAttribute(t)}function Iy(r,t,e,i){r.addEventListener(t,e,i)}function Ry(r,t,e,i){r.removeEventListener(t,e,i)}const Tc=Symbol("_vei");function Py(r,t,e,i,s=null){const n=r[Tc]||(r[Tc]={}),o=n[t];if(i&&o)o.value=i;else{const[a,l]=My(t);if(i){const h=n[t]=Dy(i,s);Iy(r,a,h,l)}else o&&(Ry(r,a,o,l),n[t]=void 0)}}const wc=/(?:Once|Passive|Capture)$/;function My(r){let t;if(wc.test(r)){t={};let i;for(;i=r.match(wc);)r=r.slice(0,r.length-i[0].length),t[i[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):Ji(r.slice(2)),t]}let Qo=0;const By=Promise.resolve(),Fy=()=>Qo||(By.then(()=>Qo=0),Qo=Date.now());function Dy(r,t){const e=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=e.attached)return;Te(Oy(i,e.value),t,5,[i])};return e.value=r,e.attached=Fy(),e}function Oy(r,t){if(ft(t)){const e=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{e.call(r),r._stopped=!0},t.map(i=>s=>!s._stopped&&i&&i(s))}else return t}const Sc=/^on[a-z]/,Ny=(r,t,e,i,s=!1,n,o,a,l)=>{t==="class"?Ay(r,i,s):t==="style"?Ty(r,e,i):Ao(t)?rh(t)||Py(r,t,e,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Ly(r,t,i,s))?Cy(r,t,i,n,o,a,l):(t==="true-value"?r._trueValue=i:t==="false-value"&&(r._falseValue=i),Sy(r,t,i,s))};function Ly(r,t,e,i){return i?!!(t==="innerHTML"||t==="textContent"||t in r&&Sc.test(t)&&mt(e)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&r.tagName==="INPUT"||t==="type"&&r.tagName==="TEXTAREA"||Sc.test(t)&&Zt(e)?!1:t in r}const ky=Kt({patchProp:Ny},xy);let Cc;function Uy(){return Cc||(Cc=q0(ky))}const Gy=(...r)=>{const t=Uy().createApp(...r),{mount:e}=t;return t.mount=i=>{const s=Hy(i);if(!s)return;const n=t._component;!mt(n)&&!n.render&&!n.template&&(n.template=s.innerHTML),s.innerHTML="";const o=e(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function Hy(r){return Zt(r)?document.querySelector(r):r}const $y={badge:"Badge",open:"Open",close:"Close",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"}},Wy={af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1};function Vy(r,t){let e;function i(){e=af(),e.run(()=>t.length?t(()=>{e==null||e.stop(),i()}):t())}We(r,s=>{s&&!e?i():s||(e==null||e.stop(),e=void 0)},{immediate:!0}),Bg(()=>{e==null||e.stop()})}const He=typeof window<"u",Xy=He&&("ontouchstart"in window||window.navigator.maxTouchPoints>0);function zy(r,t,e){const i=t.length-1;if(i<0)return r===void 0?e:r;for(let s=0;s<i;s++){if(r==null)return e;r=r[t[s]]}return r==null||r[t[i]]===void 0?e:r[t[i]]}function Ic(r,t,e){return r==null||!t||typeof t!="string"?e:r[t]!==void 0?r[t]:(t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,""),zy(r,t.split("."),e))}function Kf(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:r},(e,i)=>t+i)}function Rc(r){return r!==null&&typeof r=="object"&&!Array.isArray(r)}function Jo(r,t){return t.every(e=>r.hasOwnProperty(e))}function jy(r,t){const e={},i=new Set(Object.keys(r));for(const s of t)i.has(s)&&(e[s]=r[s]);return e}function Yy(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(t,Math.min(e,r))}function Pc(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return r+e.repeat(Math.max(0,t-r.length))}function Mc(r,t){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,t-r.length))+r}function qy(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const e=[];let i=0;for(;i<r.length;)e.push(r.substr(i,t)),i+=t;return e}function Mr(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0;const i={};for(const s in r)i[s]=r[s];for(const s in t){const n=r[s],o=t[s];if(Rc(n)&&Rc(o)){i[s]=Mr(n,o,e);continue}if(Array.isArray(n)&&Array.isArray(o)&&e){i[s]=e(n,o);continue}i[s]=o}return i}function Li(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(Li.cache.has(r))return Li.cache.get(r);const t=r.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return Li.cache.set(r,t),t}Li.cache=new Map;const mi=2.4,Bc=.2126729,Fc=.7151522,Dc=.072175,Ky=.55,Zy=.58,Qy=.57,Jy=.62,sn=.03,Oc=1.45,t_=5e-4,e_=1.25,r_=1.25,Nc=.078,Lc=12.82051282051282,nn=.06,kc=.001;function Uc(r,t){const e=(r.r/255)**mi,i=(r.g/255)**mi,s=(r.b/255)**mi,n=(t.r/255)**mi,o=(t.g/255)**mi,a=(t.b/255)**mi;let l=e*Bc+i*Fc+s*Dc,h=n*Bc+o*Fc+a*Dc;if(l<=sn&&(l+=(sn-l)**Oc),h<=sn&&(h+=(sn-h)**Oc),Math.abs(h-l)<t_)return 0;let c;if(h>l){const u=(h**Ky-l**Zy)*e_;c=u<kc?0:u<Nc?u-u*Lc*nn:u-nn}else{const u=(h**Jy-l**Qy)*r_;c=u>-kc?0:u>-Nc?u-u*Lc*nn:u+nn}return c*100}const Jn=.20689655172413793,i_=r=>r>Jn**3?Math.cbrt(r):r/(3*Jn**2)+4/29,s_=r=>r>Jn?r**3:3*Jn**2*(r-4/29);function Zf(r){const t=i_,e=t(r[1]);return[116*e-16,500*(t(r[0]/.95047)-e),200*(e-t(r[2]/1.08883))]}function Qf(r){const t=s_,e=(r[0]+16)/116;return[t(e+r[1]/500)*.95047,t(e),t(e-r[2]/200)*1.08883]}const n_=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],o_=r=>r<=.0031308?r*12.92:1.055*r**(1/2.4)-.055,a_=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],l_=r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4;function Jf(r){const t=Array(3),e=o_,i=n_;for(let s=0;s<3;++s)t[s]=Math.round(Yy(e(i[s][0]*r[0]+i[s][1]*r[1]+i[s][2]*r[2]))*255);return{r:t[0],g:t[1],b:t[2]}}function Ch(r){let{r:t,g:e,b:i}=r;const s=[0,0,0],n=l_,o=a_;t=n(t/255),e=n(e/255),i=n(i/255);for(let a=0;a<3;++a)s[a]=o[a][0]*t+o[a][1]*e+o[a][2]*i;return s}const Gc=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,h_={rgb:(r,t,e,i)=>({r,g:t,b:e,a:i}),rgba:(r,t,e,i)=>({r,g:t,b:e,a:i}),hsl:(r,t,e,i)=>Hc({h:r,s:t,l:e,a:i}),hsla:(r,t,e,i)=>Hc({h:r,s:t,l:e,a:i}),hsv:(r,t,e,i)=>Us({h:r,s:t,v:e,a:i}),hsva:(r,t,e,i)=>Us({h:r,s:t,v:e,a:i})};function ir(r){if(typeof r=="number")return{r:(r&16711680)>>16,g:(r&65280)>>8,b:r&255};if(typeof r=="string"&&Gc.test(r)){const{groups:t}=r.match(Gc),{fn:e,values:i}=t,s=i.split(/,\s*/).map(n=>n.endsWith("%")&&["hsl","hsla","hsv","hsva"].includes(e)?parseFloat(n)/100:parseFloat(n));return h_[e](...s)}else if(typeof r=="string"){let t=r.startsWith("#")?r.slice(1):r;return[3,4].includes(t.length)?t=t.split("").map(e=>e+e).join(""):[6,8].includes(t.length),u_(t)}else if(typeof r=="object"){if(Jo(r,["r","g","b"]))return r;if(Jo(r,["h","s","l"]))return Us(tp(r));if(Jo(r,["h","s","v"]))return Us(r)}throw new TypeError(`Invalid color: ${r==null?r:String(r)||r.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function Us(r){const{h:t,s:e,v:i,a:s}=r,n=a=>{const l=(a+t/60)%6;return i-i*e*Math.max(Math.min(l,4-l,1),0)},o=[n(5),n(3),n(1)].map(a=>Math.round(a*255));return{r:o[0],g:o[1],b:o[2],a:s}}function Hc(r){return Us(tp(r))}function tp(r){const{h:t,s:e,l:i,a:s}=r,n=i+e*Math.min(i,1-i),o=n===0?0:2-2*i/n;return{h:t,s:o,v:n,a:s}}function on(r){const t=Math.round(r).toString(16);return("00".substr(0,2-t.length)+t).toUpperCase()}function c_(r){let{r:t,g:e,b:i,a:s}=r;return`#${[on(t),on(e),on(i),s!==void 0?on(Math.round(s*255)):""].join("")}`}function u_(r){r=d_(r);let[t,e,i,s]=qy(r,2).map(n=>parseInt(n,16));return s=s===void 0?s:s/255,{r:t,g:e,b:i,a:s}}function d_(r){return r.startsWith("#")&&(r=r.slice(1)),r=r.replace(/([^0-9a-f])/gi,"F"),(r.length===3||r.length===4)&&(r=r.split("").map(t=>t+t).join("")),r.length!==6&&(r=Pc(Pc(r,6),8,"F")),r}function f_(r,t){const e=Zf(Ch(r));return e[0]=e[0]+t*10,Jf(Qf(e))}function p_(r,t){const e=Zf(Ch(r));return e[0]=e[0]-t*10,Jf(Qf(e))}function m_(r){const t=ir(r);return Ch(t)[1]}function g_(r){const t=Math.abs(Uc(ir(0),ir(r)));return Math.abs(Uc(ir(16777215),ir(r)))>Math.min(t,50)?"#fff":"#000"}function ep(r,t){return e=>Object.keys(r).reduce((i,s)=>{const o=typeof r[s]=="object"&&r[s]!=null&&!Array.isArray(r[s])?r[s]:{type:r[s]};return e&&s in e?i[s]={...o,default:e[s]}:i[s]=o,t&&!i[s].source&&(i[s].source=t),i},{})}const Gs=Symbol.for("vuetify:defaults");function y_(r){return Pr(r)}function rp(){const r=Ve(Gs);if(!r)throw new Error("[Vuetify] Could not find defaults instance");return r}function __(r,t){var e,i;return typeof((e=r.props)==null?void 0:e[t])<"u"||typeof((i=r.props)==null?void 0:i[Li(t)])<"u"}function v_(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rp();const i=Fo("useDefaults");if(t=t??i.type.name??i.type.__name,!t)throw new Error("[Vuetify] Could not determine component name");const s=Dt(()=>{var l;return(l=e.value)==null?void 0:l[r._as??t]}),n=new Proxy(r,{get(l,h){var u,d,f,p;const c=Reflect.get(l,h);return h==="class"||h==="style"?[(u=s.value)==null?void 0:u[h],c].filter(m=>m!=null):typeof h=="string"&&!__(i.vnode,h)?((d=s.value)==null?void 0:d[h])??((p=(f=e.value)==null?void 0:f.global)==null?void 0:p[h])??c:c}}),o=Qr();yh(()=>{if(s.value){const l=Object.entries(s.value).filter(h=>{let[c]=h;return c.startsWith(c[0].toUpperCase())});o.value=l.length?Object.fromEntries(l):void 0}else o.value=void 0});function a(){const l=b_(Gs,i);Ts(Gs,Dt(()=>o.value?Mr((l==null?void 0:l.value)??{},o.value):l==null?void 0:l.value))}return{props:n,provideSubDefaults:a}}function zs(r){if(r._setup=r._setup??r.setup,!r.name)return r;if(r._setup){r.props=ep(r.props??{},r.name)();const t=Object.keys(r.props).filter(e=>e!=="class"&&e!=="style");r.filterProps=function(i){return jy(i,t)},r.props._as=String,r.setup=function(i,s){const n=rp();if(!n.value)return r._setup(i,s);const{props:o,provideSubDefaults:a}=v_(i,i._as??r.name,n),l=r._setup(o,s);return a(),l}}return r}function x_(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t=>(r?zs:vh)(t)}function Fo(r,t){const e=hy();if(!e)throw new Error(`[Vuetify] ${r} ${t||"must be called from inside a setup function"}`);return e}let ip=0,On=new WeakMap;function sp(){const r=Fo("getUid");if(On.has(r))return On.get(r);{const t=ip++;return On.set(r,t),t}}sp.reset=()=>{ip=0,On=new WeakMap};function b_(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fo("injectSelf");const{provides:e}=t;if(e&&r in e)return e[r]}function A_(r,t,e){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:u=>u,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:u=>u;const n=Fo("useProxiedModel"),o=Pr(r[t]!==void 0?r[t]:e),a=Li(t),h=Dt(a!==t?()=>{var u,d,f,p;return r[t],!!(((u=n.vnode.props)!=null&&u.hasOwnProperty(t)||(d=n.vnode.props)!=null&&d.hasOwnProperty(a))&&((f=n.vnode.props)!=null&&f.hasOwnProperty(`onUpdate:${t}`)||(p=n.vnode.props)!=null&&p.hasOwnProperty(`onUpdate:${a}`)))}:()=>{var u,d;return r[t],!!((u=n.vnode.props)!=null&&u.hasOwnProperty(t)&&((d=n.vnode.props)!=null&&d.hasOwnProperty(`onUpdate:${t}`)))});Vy(()=>!h.value,()=>{We(()=>r[t],u=>{o.value=u})});const c=Dt({get(){const u=r[t];return i(h.value?u:o.value)},set(u){const d=s(u),f=Tt(h.value?r[t]:o.value);f===d||i(f)===u||(o.value=d,n==null||n.emit(`update:${t}`,d))}});return Object.defineProperty(c,"externalValue",{get:()=>h.value?r[t]:o.value}),c}const $c="$vuetify.",Wc=(r,t)=>r.replace(/\{(\d+)\}/g,(e,i)=>String(t[+i])),np=(r,t,e)=>function(i){for(var s=arguments.length,n=new Array(s>1?s-1:0),o=1;o<s;o++)n[o-1]=arguments[o];if(!i.startsWith($c))return Wc(i,n);const a=i.replace($c,""),l=r.value&&e.value[r.value],h=t.value&&e.value[t.value];let c=Ic(l,a,null);return c||(`${i}${r.value}`,c=Ic(h,a,null)),c||(c=i),typeof c!="string"&&(c=i),Wc(c,n)};function op(r,t){return(e,i)=>new Intl.NumberFormat([r.value,t.value],i).format(e)}function ta(r,t,e){const i=A_(r,t,r[t]??e.value);return i.value=r[t]??e.value,We(e,s=>{r[t]==null&&(i.value=e.value)}),i}function ap(r){return t=>{const e=ta(t,"locale",r.current),i=ta(t,"fallback",r.fallback),s=ta(t,"messages",r.messages);return{name:"vuetify",current:e,fallback:i,messages:s,t:np(e,i,s),n:op(e,i),provide:ap({current:e,fallback:i,messages:s})}}}function E_(r){const t=Qr((r==null?void 0:r.locale)??"en"),e=Qr((r==null?void 0:r.fallback)??"en"),i=Pr({en:$y,...r==null?void 0:r.messages});return{name:"vuetify",current:t,fallback:e,messages:i,t:np(t,e,i),n:op(t,e),provide:ap({current:t,fallback:e,messages:i})}}const Vc=Symbol.for("vuetify:locale");function T_(r){return r.name!=null}function w_(r){const t=r!=null&&r.adapter&&T_(r==null?void 0:r.adapter)?r==null?void 0:r.adapter:E_(r),e=S_(t,r);return{...t,...e}}function S_(r,t){const e=Pr((t==null?void 0:t.rtl)??Wy),i=Dt(()=>e.value[r.current.value]??!1);return{isRtl:i,rtl:e,rtlClasses:Dt(()=>`v-locale--is-${i.value?"rtl":"ltr"}`)}}const tl={"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:1,AS:0,AT:1,AU:1,AX:1,AZ:1,BA:1,BD:0,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:1,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:1,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,"GB-alt-variant":0,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:1,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:1,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:0,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:0,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:0,ZA:0,ZW:0};function C_(r,t){const e=[];let i=[];const s=lp(r),n=hp(r),o=(s.getDay()-tl[t.slice(-2).toUpperCase()]+7)%7,a=(n.getDay()-tl[t.slice(-2).toUpperCase()]+7)%7;for(let l=0;l<o;l++){const h=new Date(s);h.setDate(h.getDate()-(o-l)),i.push(h)}for(let l=1;l<=n.getDate();l++){const h=new Date(r.getFullYear(),r.getMonth(),l);i.push(h),i.length===7&&(e.push(i),i=[])}for(let l=1;l<7-a;l++){const h=new Date(n);h.setDate(h.getDate()+l),i.push(h)}return i.length>0&&e.push(i),e}function lp(r){return new Date(r.getFullYear(),r.getMonth(),1)}function hp(r){return new Date(r.getFullYear(),r.getMonth()+1,0)}function I_(r){const t=r.split("-").map(Number);return new Date(t[0],t[1]-1,t[2])}const R_=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function cp(r){if(r==null)return new Date;if(r instanceof Date)return r;if(typeof r=="string"){let t;if(R_.test(r))return I_(r);if(t=Date.parse(r),!isNaN(t))return new Date(t)}return null}const Xc=new Date(2e3,0,2);function P_(r){const t=tl[r.slice(-2).toUpperCase()];return Kf(7).map(e=>{const i=new Date(Xc);return i.setDate(Xc.getDate()+t+e),new Intl.DateTimeFormat(r,{weekday:"narrow"}).format(i)})}function M_(r,t,e,i){const s=cp(r)??new Date,n=i==null?void 0:i[t];if(typeof n=="function")return n(s,t,e);let o={};switch(t){case"fullDateWithWeekday":o={weekday:"long",day:"numeric",month:"long",year:"numeric"};break;case"normalDateWithWeekday":o={weekday:"short",day:"numeric",month:"short"};break;case"keyboardDate":o={day:"2-digit",month:"2-digit",year:"numeric"};break;case"monthAndDate":o={month:"long",day:"numeric"};break;case"monthAndYear":o={month:"long",year:"numeric"};break;case"month":o={month:"long"};break;case"monthShort":o={month:"short"};break;case"dayOfMonth":o={day:"numeric"};break;case"shortDate":o={year:"2-digit",month:"numeric",day:"numeric"};break;case"year":o={year:"numeric"};break;default:o=n??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(e,o).format(s)}function B_(r,t){const e=r.toJsDate(t),i=e.getFullYear(),s=Mc(String(e.getMonth()+1),2,"0"),n=Mc(String(e.getDate()),2,"0");return`${i}-${s}-${n}`}function F_(r){const[t,e,i]=r.split("-").map(Number);return new Date(t,e-1,i)}function D_(r,t){const e=new Date(r);return e.setDate(e.getDate()+t),e}function O_(r,t){const e=new Date(r);return e.setMonth(e.getMonth()+t),e}function N_(r){return r.getFullYear()}function L_(r){return r.getMonth()}function k_(r){return new Date(r.getFullYear(),r.getMonth()+1,1)}function U_(r){return new Date(r.getFullYear(),0,1)}function G_(r){return new Date(r.getFullYear(),11,31)}function H_(r,t){return el(r,t[0])&&W_(r,t[1])}function $_(r){const t=new Date(r);return t instanceof Date&&!isNaN(t.getTime())}function el(r,t){return r.getTime()>t.getTime()}function W_(r,t){return r.getTime()<t.getTime()}function zc(r,t){return r.getTime()===t.getTime()}function V_(r,t){return r.getDate()===t.getDate()&&r.getMonth()===t.getMonth()&&r.getFullYear()===t.getFullYear()}function X_(r,t){return r.getMonth()===t.getMonth()&&r.getFullYear()===t.getFullYear()}function z_(r,t,e){const i=new Date(r),s=new Date(t);return e==="month"?i.getMonth()-s.getMonth()+(i.getFullYear()-s.getFullYear())*12:Math.floor((i.getTime()-s.getTime())/(1e3*60*60*24))}function j_(r,t){const e=new Date(r);return e.setMonth(t),e}function Y_(r,t){const e=new Date(r);return e.setFullYear(t),e}function q_(r){return new Date(r.getFullYear(),r.getMonth(),r.getDate())}function K_(r){return new Date(r.getFullYear(),r.getMonth(),r.getDate(),23,59,59,999)}class Z_{constructor(t){this.locale=t.locale,this.formats=t.formats}date(t){return cp(t)}toJsDate(t){return t}toISO(t){return B_(this,t)}parseISO(t){return F_(t)}addDays(t,e){return D_(t,e)}addMonths(t,e){return O_(t,e)}getWeekArray(t){return C_(t,this.locale)}startOfMonth(t){return lp(t)}endOfMonth(t){return hp(t)}format(t,e){return M_(t,e,this.locale,this.formats)}isEqual(t,e){return zc(t,e)}isValid(t){return $_(t)}isWithinRange(t,e){return H_(t,e)}isAfter(t,e){return el(t,e)}isBefore(t,e){return!el(t,e)&&!zc(t,e)}isSameDay(t,e){return V_(t,e)}isSameMonth(t,e){return X_(t,e)}setMonth(t,e){return j_(t,e)}setYear(t,e){return Y_(t,e)}getDiff(t,e,i){return z_(t,e,i)}getWeekdays(){return P_(this.locale)}getYear(t){return N_(t)}getMonth(t){return L_(t)}getNextMonth(t){return k_(t)}startOfDay(t){return q_(t)}endOfDay(t){return K_(t)}startOfYear(t){return U_(t)}endOfYear(t){return G_(t)}}const Q_=Symbol.for("vuetify:date-options"),jc=Symbol.for("vuetify:date-adapter");function J_(r,t){const e=Mr({adapter:Z_,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},r);return{options:e,instance:tv(e,t)}}function tv(r,t){const e=li(typeof r.adapter=="function"?new r.adapter({locale:r.locale[t.current.value]??t.current.value,formats:r.formats}):r.adapter);return We(t.current,i=>{e.locale=r.locale[i]??i??e.locale}),e}const Yc=Symbol.for("vuetify:display"),qc={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},ev=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:qc;return Mr(qc,r)};function Kc(r){return He&&!r?window.innerWidth:typeof r=="object"&&r.clientWidth||0}function Zc(r){return He&&!r?window.innerHeight:typeof r=="object"&&r.clientHeight||0}function Qc(r){const t=He&&!r?window.navigator.userAgent:"ssr";function e(p){return!!t.match(p)}const i=e(/android/i),s=e(/iphone|ipad|ipod/i),n=e(/cordova/i),o=e(/electron/i),a=e(/chrome/i),l=e(/edge/i),h=e(/firefox/i),c=e(/opera/i),u=e(/win/i),d=e(/mac/i),f=e(/linux/i);return{android:i,ios:s,cordova:n,electron:o,chrome:a,edge:l,firefox:h,opera:c,win:u,mac:d,linux:f,touch:Xy,ssr:t==="ssr"}}function rv(r,t){const{thresholds:e,mobileBreakpoint:i}=ev(r),s=Qr(Zc(t)),n=Qr(Qc(t)),o=li({}),a=Qr(Kc(t));function l(){s.value=Zc(),a.value=Kc()}function h(){l(),n.value=Qc()}return yh(()=>{const c=a.value<e.sm,u=a.value<e.md&&!c,d=a.value<e.lg&&!(u||c),f=a.value<e.xl&&!(d||u||c),p=a.value<e.xxl&&!(f||d||u||c),m=a.value>=e.xxl,g=c?"xs":u?"sm":d?"md":f?"lg":p?"xl":"xxl",y=typeof i=="number"?i:e[i],A=a.value<y;o.xs=c,o.sm=u,o.md=d,o.lg=f,o.xl=p,o.xxl=m,o.smAndUp=!c,o.mdAndUp=!(c||u),o.lgAndUp=!(c||u||d),o.xlAndUp=!(c||u||d||f),o.smAndDown=!(d||f||p||m),o.mdAndDown=!(f||p||m),o.lgAndDown=!(p||m),o.xlAndDown=!m,o.name=g,o.height=s.value,o.width=a.value,o.mobile=A,o.mobileBreakpoint=i,o.platform=n.value,o.thresholds=e}),He&&window.addEventListener("resize",l,{passive:!0}),{...r0(o),update:h,ssr:!!t}}const iv={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",eyeDropper:"mdi-eyedropper"},sv={component:r=>Sh(up,{...r,class:"mdi"})},nv=[String,Function,Object,Array],Jc=Symbol.for("vuetify:icons"),Do=ep({icon:{type:nv},tag:{type:String,required:!0}},"icon");x_()({name:"VComponentIcon",props:Do(),setup(r,t){let{slots:e}=t;return()=>{const i=r.icon;return kt(r.tag,null,{default:()=>{var s;return[r.icon?kt(i,null,null):(s=e.default)==null?void 0:s.call(e)]}})}}});const ov=zs({name:"VSvgIcon",inheritAttrs:!1,props:Do(),setup(r,t){let{attrs:e}=t;return()=>kt(r.tag,jf(e,{style:null}),{default:()=>[kt("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(r.icon)?r.icon.map(i=>Array.isArray(i)?kt("path",{d:i[0],"fill-opacity":i[1]},null):kt("path",{d:i},null)):kt("path",{d:r.icon},null)])]})}});zs({name:"VLigatureIcon",props:Do(),setup(r){return()=>kt(r.tag,null,{default:()=>[r.icon]})}});const up=zs({name:"VClassIcon",props:Do(),setup(r){return()=>kt(r.tag,{class:r.icon},null)}}),av={svg:{component:ov},class:{component:up}};function lv(r){return Mr({defaultSet:"mdi",sets:{...av,mdi:sv},aliases:{...iv,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z"}},r)}const tu=Symbol.for("vuetify:theme"),os={defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-variant":"#a3a3a3","on-surface-variant":"#424242",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}};function hv(){var e,i;let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:os;if(!r)return{...os,isDisabled:!0};const t={};for(const[s,n]of Object.entries(r.themes??{})){const o=n.dark||s==="dark"?(e=os.themes)==null?void 0:e.dark:(i=os.themes)==null?void 0:i.light;t[s]=Mr(o,n)}return Mr(os,{...r,themes:t})}function cv(r){const t=hv(r),e=Pr(t.defaultTheme),i=Pr(t.themes),s=Dt(()=>{const c={};for(const[u,d]of Object.entries(i.value)){const f=c[u]={...d,colors:{...d.colors}};if(t.variations)for(const p of t.variations.colors){const m=f.colors[p];if(m)for(const g of["lighten","darken"]){const y=g==="lighten"?f_:p_;for(const A of Kf(t.variations[g],1))f.colors[`${p}-${g}-${A}`]=c_(y(ir(m),A))}}for(const p of Object.keys(f.colors)){if(/^on-[a-z]/.test(p)||f.colors[`on-${p}`])continue;const m=`on-${p}`,g=ir(f.colors[p]);f.colors[m]=g_(g)}}return c}),n=Dt(()=>s.value[e.value]),o=Dt(()=>{const c=[];n.value.dark&&kr(c,":root",["color-scheme: dark"]),kr(c,":root",eu(n.value));for(const[p,m]of Object.entries(s.value))kr(c,`.v-theme--${p}`,[`color-scheme: ${m.dark?"dark":"normal"}`,...eu(m)]);const u=[],d=[],f=new Set(Object.values(s.value).flatMap(p=>Object.keys(p.colors)));for(const p of f)/^on-[a-z]/.test(p)?kr(d,`.${p}`,[`color: rgb(var(--v-theme-${p})) !important`]):(kr(u,`.bg-${p}`,[`--v-theme-overlay-multiplier: var(--v-theme-${p}-overlay-multiplier)`,`background-color: rgb(var(--v-theme-${p})) !important`,`color: rgb(var(--v-theme-on-${p})) !important`]),kr(d,`.text-${p}`,[`color: rgb(var(--v-theme-${p})) !important`]),kr(d,`.border-${p}`,[`--v-border-color: var(--v-theme-${p})`]));return c.push(...u,...d),c.map((p,m)=>m===0?p:`    ${p}`).join("")});function a(){return{style:[{children:o.value,id:"vuetify-theme-stylesheet",nonce:t.cspNonce||!1}]}}function l(c){if(t.isDisabled)return;const u=c._context.provides.usehead;if(u)if(u.push){const f=u.push(a);He&&We(o,()=>{f.patch(a)})}else He?(u.addHeadObjs(Dt(a)),yh(()=>u.updateDOM())):u.addHeadObjs(a());else{let p=function(){if(typeof document<"u"&&!f){const m=document.createElement("style");m.type="text/css",m.id="vuetify-theme-stylesheet",t.cspNonce&&m.setAttribute("nonce",t.cspNonce),f=m,document.head.appendChild(f)}f&&(f.innerHTML=o.value)};var d=p;let f=He?document.getElementById("vuetify-theme-stylesheet"):null;He?We(o,p,{immediate:!0}):p()}}const h=Dt(()=>t.isDisabled?void 0:`v-theme--${e.value}`);return{install:l,isDisabled:t.isDisabled,name:e,themes:i,current:n,computedThemes:s,themeClasses:h,styles:o,global:{name:e,current:n}}}function kr(r,t,e){r.push(`${t} {
`,...e.map(i=>`  ${i};
`),`}
`)}function eu(r){const t=r.dark?2:1,e=r.dark?1:2,i=[];for(const[s,n]of Object.entries(r.colors)){const o=ir(n);i.push(`--v-theme-${s}: ${o.r},${o.g},${o.b}`),s.startsWith("on-")||i.push(`--v-theme-${s}-overlay-multiplier: ${m_(n)>.18?t:e}`)}for(const[s,n]of Object.entries(r.variables)){const o=typeof n=="string"&&n.startsWith("#")?ir(n):void 0,a=o?`${o.r}, ${o.g}, ${o.b}`:void 0;i.push(`--v-${s}: ${a??n}`)}return i}function dp(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:t,...e}=r,i=Mr(t,e),{aliases:s={},components:n={},directives:o={}}=i,a=y_(i.defaults),l=rv(i.display,i.ssr),h=cv(i.theme),c=lv(i.icons),u=w_(i.locale),d=J_(i.date,u);return{install:p=>{for(const m in o)p.directive(m,o[m]);for(const m in n)p.component(m,n[m]);for(const m in s)p.component(m,zs({...s[m],name:m,aliasName:s[m].name}));if(h.install(p),p.provide(Gs,a),p.provide(Yc,l),p.provide(tu,h),p.provide(Jc,c),p.provide(Vc,u),p.provide(Q_,d.options),p.provide(jc,d.instance),He&&i.ssr)if(p.$nuxt)p.$nuxt.hook("app:suspense:resolve",()=>{l.update()});else{const{mount:m}=p;p.mount=function(){const g=m(...arguments);return mh(()=>l.update()),p.mount=m,g}}sp.reset(),p.mixin({computed:{$vuetify(){return li({defaults:gi.call(this,Gs),display:gi.call(this,Yc),theme:gi.call(this,tu),icons:gi.call(this,Jc),locale:gi.call(this,Vc),date:gi.call(this,jc)})}}})},defaults:a,display:l,theme:h,icons:c,locale:u,date:d}}const uv="3.4.4";dp.version=uv;function gi(r){var i,s;const t=this.$,e=((i=t.parent)==null?void 0:i.provides)??((s=t.vnode.appContext)==null?void 0:s.provides);if(e&&r in e)return e[r]}const dv=dp({theme:{defaultTheme:"groupeffect",themes:{groupeffect:{colors:{surface:"#212121","surface-bright":"#ccbfd6","surface-variant":"#a3a3a3","on-surface-variant":"#424242",primary:"rgb(12,34,45)","primary-darken-1":"#277CC1",secondary:"#5CBBF6","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"}}}}});var fv=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const pv=Symbol();var ru;(function(r){r.direct="direct",r.patchObject="patch object",r.patchFunction="patch function"})(ru||(ru={}));function mv(){const r=af(!0),t=r.run(()=>Pr({}));let e=[],i=[];const s=dh({install(n){s._a=n,n.provide(pv,s),n.config.globalProperties.$pinia=s,i.forEach(o=>e.push(o)),i=[]},use(n){return!this._a&&!fv?i.push(n):e.push(n),this},_p:e,_a:null,_e:r,_s:new Map,state:t});return s}const gv=mv(),yv="modulepreload",_v=function(r){return"/explore/"+r},iu={},vv=function(t,e,i){if(!e||e.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(e.map(n=>{if(n=_v(n),n in iu)return;iu[n]=!0;const o=n.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let c=s.length-1;c>=0;c--){const u=s[c];if(u.href===n&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${a}`))return;const h=document.createElement("link");if(h.rel=o?"stylesheet":yv,o||(h.as="script",h.crossOrigin=""),h.href=n,document.head.appendChild(h),o)return new Promise((c,u)=>{h.addEventListener("load",c),h.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t()).catch(n=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=n,window.dispatchEvent(o),!o.defaultPrevented)throw n})};/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Ai=typeof window<"u";function xv(r){return r.__esModule||r[Symbol.toStringTag]==="Module"}const St=Object.assign;function ea(r,t){const e={};for(const i in t){const s=t[i];e[i]=Ce(s)?s.map(r):r(s)}return e}const Ss=()=>{},Ce=Array.isArray,bv=/\/$/,Av=r=>r.replace(bv,"");function ra(r,t,e="/"){let i,s={},n="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=t.slice(0,l),n=t.slice(l+1,a>-1?a:t.length),s=r(n)),a>-1&&(i=i||t.slice(0,a),o=t.slice(a,t.length)),i=Sv(i??t,e),{fullPath:i+(n&&"?")+n+o,path:i,query:s,hash:o}}function Ev(r,t){const e=t.query?r(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function su(r,t){return!t||!r.toLowerCase().startsWith(t.toLowerCase())?r:r.slice(t.length)||"/"}function Tv(r,t,e){const i=t.matched.length-1,s=e.matched.length-1;return i>-1&&i===s&&ji(t.matched[i],e.matched[s])&&fp(t.params,e.params)&&r(t.query)===r(e.query)&&t.hash===e.hash}function ji(r,t){return(r.aliasOf||r)===(t.aliasOf||t)}function fp(r,t){if(Object.keys(r).length!==Object.keys(t).length)return!1;for(const e in r)if(!wv(r[e],t[e]))return!1;return!0}function wv(r,t){return Ce(r)?nu(r,t):Ce(t)?nu(t,r):r===t}function nu(r,t){return Ce(t)?r.length===t.length&&r.every((e,i)=>e===t[i]):r.length===1&&r[0]===t}function Sv(r,t){if(r.startsWith("/"))return r;if(!r)return t;const e=t.split("/"),i=r.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let n=e.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")n>1&&n--;else break;return e.slice(0,n).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var Hs;(function(r){r.pop="pop",r.push="push"})(Hs||(Hs={}));var Cs;(function(r){r.back="back",r.forward="forward",r.unknown=""})(Cs||(Cs={}));function Cv(r){if(!r)if(Ai){const t=document.querySelector("base");r=t&&t.getAttribute("href")||"/",r=r.replace(/^\w+:\/\/[^\/]+/,"")}else r="/";return r[0]!=="/"&&r[0]!=="#"&&(r="/"+r),Av(r)}const Iv=/^[^#]+#/;function Rv(r,t){return r.replace(Iv,"#")+t}function Pv(r,t){const e=document.documentElement.getBoundingClientRect(),i=r.getBoundingClientRect();return{behavior:t.behavior,left:i.left-e.left-(t.left||0),top:i.top-e.top-(t.top||0)}}const Oo=()=>({left:window.pageXOffset,top:window.pageYOffset});function Mv(r){let t;if("el"in r){const e=r.el,i=typeof e=="string"&&e.startsWith("#"),s=typeof e=="string"?i?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!s)return;t=Pv(s,r)}else t=r;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function ou(r,t){return(history.state?history.state.position-t:-1)+r}const rl=new Map;function Bv(r,t){rl.set(r,t)}function Fv(r){const t=rl.get(r);return rl.delete(r),t}let Dv=()=>location.protocol+"//"+location.host;function pp(r,t){const{pathname:e,search:i,hash:s}=t,n=r.indexOf("#");if(n>-1){let a=s.includes(r.slice(n))?r.slice(n).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),su(l,"")}return su(e,r)+i+s}function Ov(r,t,e,i){let s=[],n=[],o=null;const a=({state:d})=>{const f=pp(r,location),p=e.value,m=t.value;let g=0;if(d){if(e.value=f,t.value=d,o&&o===p){o=null;return}g=m?d.position-m.position:0}else i(f);s.forEach(y=>{y(e.value,p,{delta:g,type:Hs.pop,direction:g?g>0?Cs.forward:Cs.back:Cs.unknown})})};function l(){o=e.value}function h(d){s.push(d);const f=()=>{const p=s.indexOf(d);p>-1&&s.splice(p,1)};return n.push(f),f}function c(){const{history:d}=window;d.state&&d.replaceState(St({},d.state,{scroll:Oo()}),"")}function u(){for(const d of n)d();n=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:h,destroy:u}}function au(r,t,e,i=!1,s=!1){return{back:r,current:t,forward:e,replaced:i,position:window.history.length,scroll:s?Oo():null}}function Nv(r){const{history:t,location:e}=window,i={value:pp(r,e)},s={value:t.state};s.value||n(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function n(l,h,c){const u=r.indexOf("#"),d=u>-1?(e.host&&document.querySelector("base")?r:r.slice(u))+l:Dv()+r+l;try{t[c?"replaceState":"pushState"](h,"",d),s.value=h}catch(f){console.error(f),e[c?"replace":"assign"](d)}}function o(l,h){const c=St({},t.state,au(s.value.back,l,s.value.forward,!0),h,{position:s.value.position});n(l,c,!0),i.value=l}function a(l,h){const c=St({},s.value,t.state,{forward:l,scroll:Oo()});n(c.current,c,!0);const u=St({},au(i.value,l,null),{position:c.position+1},h);n(l,u,!1),i.value=l}return{location:i,state:s,push:a,replace:o}}function Lv(r){r=Cv(r);const t=Nv(r),e=Ov(r,t.state,t.location,t.replace);function i(n,o=!0){o||e.pauseListeners(),history.go(n)}const s=St({location:"",base:r,go:i,createHref:Rv.bind(null,r)},t,e);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function kv(r){return typeof r=="string"||r&&typeof r=="object"}function mp(r){return typeof r=="string"||typeof r=="symbol"}const pr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},gp=Symbol("");var lu;(function(r){r[r.aborted=4]="aborted",r[r.cancelled=8]="cancelled",r[r.duplicated=16]="duplicated"})(lu||(lu={}));function Yi(r,t){return St(new Error,{type:r,[gp]:!0},t)}function Ke(r,t){return r instanceof Error&&gp in r&&(t==null||!!(r.type&t))}const hu="[^/]+?",Uv={sensitive:!1,strict:!1,start:!0,end:!0},Gv=/[.+*?^${}()[\]/\\]/g;function Hv(r,t){const e=St({},Uv,t),i=[];let s=e.start?"^":"";const n=[];for(const h of r){const c=h.length?[]:[90];e.strict&&!h.length&&(s+="/");for(let u=0;u<h.length;u++){const d=h[u];let f=40+(e.sensitive?.25:0);if(d.type===0)u||(s+="/"),s+=d.value.replace(Gv,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:m,optional:g,regexp:y}=d;n.push({name:p,repeatable:m,optional:g});const A=y||hu;if(A!==hu){f+=10;try{new RegExp(`(${A})`)}catch(b){throw new Error(`Invalid custom RegExp for param "${p}" (${A}): `+b.message)}}let _=m?`((?:${A})(?:/(?:${A}))*)`:`(${A})`;u||(_=g&&h.length<2?`(?:/${_})`:"/"+_),g&&(_+="?"),s+=_,f+=20,g&&(f+=-8),m&&(f+=-20),A===".*"&&(f+=-50)}c.push(f)}i.push(c)}if(e.strict&&e.end){const h=i.length-1;i[h][i[h].length-1]+=.7000000000000001}e.strict||(s+="/?"),e.end?s+="$":e.strict&&(s+="(?:/|$)");const o=new RegExp(s,e.sensitive?"":"i");function a(h){const c=h.match(o),u={};if(!c)return null;for(let d=1;d<c.length;d++){const f=c[d]||"",p=n[d-1];u[p.name]=f&&p.repeatable?f.split("/"):f}return u}function l(h){let c="",u=!1;for(const d of r){(!u||!c.endsWith("/"))&&(c+="/"),u=!1;for(const f of d)if(f.type===0)c+=f.value;else if(f.type===1){const{value:p,repeatable:m,optional:g}=f,y=p in h?h[p]:"";if(Ce(y)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const A=Ce(y)?y.join("/"):y;if(!A)if(g)d.length<2&&(c.endsWith("/")?c=c.slice(0,-1):u=!0);else throw new Error(`Missing required param "${p}"`);c+=A}}return c||"/"}return{re:o,score:i,keys:n,parse:a,stringify:l}}function $v(r,t){let e=0;for(;e<r.length&&e<t.length;){const i=t[e]-r[e];if(i)return i;e++}return r.length<t.length?r.length===1&&r[0]===40+40?-1:1:r.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Wv(r,t){let e=0;const i=r.score,s=t.score;for(;e<i.length&&e<s.length;){const n=$v(i[e],s[e]);if(n)return n;e++}if(Math.abs(s.length-i.length)===1){if(cu(i))return 1;if(cu(s))return-1}return s.length-i.length}function cu(r){const t=r[r.length-1];return r.length>0&&t[t.length-1]<0}const Vv={type:0,value:""},Xv=/[a-zA-Z0-9_]/;function zv(r){if(!r)return[[]];if(r==="/")return[[Vv]];if(!r.startsWith("/"))throw new Error(`Invalid path "${r}"`);function t(f){throw new Error(`ERR (${e})/"${h}": ${f}`)}let e=0,i=e;const s=[];let n;function o(){n&&s.push(n),n=[]}let a=0,l,h="",c="";function u(){h&&(e===0?n.push({type:0,value:h}):e===1||e===2||e===3?(n.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),n.push({type:1,value:h,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),h="")}function d(){h+=l}for(;a<r.length;){if(l=r[a++],l==="\\"&&e!==2){i=e,e=4;continue}switch(e){case 0:l==="/"?(h&&u(),o()):l===":"?(u(),e=1):d();break;case 4:d(),e=i;break;case 1:l==="("?e=2:Xv.test(l)?d():(u(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:e=3:c+=l;break;case 3:u(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${h}"`),u(),o(),s}function jv(r,t,e){const i=Hv(zv(r.path),e),s=St(i,{record:r,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function Yv(r,t){const e=[],i=new Map;t=fu({strict:!1,end:!0,sensitive:!1},t);function s(c){return i.get(c)}function n(c,u,d){const f=!d,p=qv(c);p.aliasOf=d&&d.record;const m=fu(t,c),g=[p];if("alias"in c){const _=typeof c.alias=="string"?[c.alias]:c.alias;for(const b of _)g.push(St({},p,{components:d?d.record.components:p.components,path:b,aliasOf:d?d.record:p}))}let y,A;for(const _ of g){const{path:b}=_;if(u&&b[0]!=="/"){const C=u.record.path,N=C[C.length-1]==="/"?"":"/";_.path=u.record.path+(b&&N+b)}if(y=jv(_,u,m),d?d.alias.push(y):(A=A||y,A!==y&&A.alias.push(y),f&&c.name&&!du(y)&&o(c.name)),p.children){const C=p.children;for(let N=0;N<C.length;N++)n(C[N],y,d&&d.children[N])}d=d||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&l(y)}return A?()=>{o(A)}:Ss}function o(c){if(mp(c)){const u=i.get(c);u&&(i.delete(c),e.splice(e.indexOf(u),1),u.children.forEach(o),u.alias.forEach(o))}else{const u=e.indexOf(c);u>-1&&(e.splice(u,1),c.record.name&&i.delete(c.record.name),c.children.forEach(o),c.alias.forEach(o))}}function a(){return e}function l(c){let u=0;for(;u<e.length&&Wv(c,e[u])>=0&&(c.record.path!==e[u].record.path||!yp(c,e[u]));)u++;e.splice(u,0,c),c.record.name&&!du(c)&&i.set(c.record.name,c)}function h(c,u){let d,f={},p,m;if("name"in c&&c.name){if(d=i.get(c.name),!d)throw Yi(1,{location:c});m=d.record.name,f=St(uu(u.params,d.keys.filter(A=>!A.optional).map(A=>A.name)),c.params&&uu(c.params,d.keys.map(A=>A.name))),p=d.stringify(f)}else if("path"in c)p=c.path,d=e.find(A=>A.re.test(p)),d&&(f=d.parse(p),m=d.record.name);else{if(d=u.name?i.get(u.name):e.find(A=>A.re.test(u.path)),!d)throw Yi(1,{location:c,currentLocation:u});m=d.record.name,f=St({},u.params,c.params),p=d.stringify(f)}const g=[];let y=d;for(;y;)g.unshift(y.record),y=y.parent;return{name:m,path:p,params:f,matched:g,meta:Zv(g)}}return r.forEach(c=>n(c)),{addRoute:n,resolve:h,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function uu(r,t){const e={};for(const i of t)i in r&&(e[i]=r[i]);return e}function qv(r){return{path:r.path,redirect:r.redirect,name:r.name,meta:r.meta||{},aliasOf:void 0,beforeEnter:r.beforeEnter,props:Kv(r),children:r.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in r?r.components||null:r.component&&{default:r.component}}}function Kv(r){const t={},e=r.props||!1;if("component"in r)t.default=e;else for(const i in r.components)t[i]=typeof e=="object"?e[i]:e;return t}function du(r){for(;r;){if(r.record.aliasOf)return!0;r=r.parent}return!1}function Zv(r){return r.reduce((t,e)=>St(t,e.meta),{})}function fu(r,t){const e={};for(const i in r)e[i]=i in t?t[i]:r[i];return e}function yp(r,t){return t.children.some(e=>e===r||yp(r,e))}const _p=/#/g,Qv=/&/g,Jv=/\//g,tx=/=/g,ex=/\?/g,vp=/\+/g,rx=/%5B/g,ix=/%5D/g,xp=/%5E/g,sx=/%60/g,bp=/%7B/g,nx=/%7C/g,Ap=/%7D/g,ox=/%20/g;function Ih(r){return encodeURI(""+r).replace(nx,"|").replace(rx,"[").replace(ix,"]")}function ax(r){return Ih(r).replace(bp,"{").replace(Ap,"}").replace(xp,"^")}function il(r){return Ih(r).replace(vp,"%2B").replace(ox,"+").replace(_p,"%23").replace(Qv,"%26").replace(sx,"`").replace(bp,"{").replace(Ap,"}").replace(xp,"^")}function lx(r){return il(r).replace(tx,"%3D")}function hx(r){return Ih(r).replace(_p,"%23").replace(ex,"%3F")}function cx(r){return r==null?"":hx(r).replace(Jv,"%2F")}function to(r){try{return decodeURIComponent(""+r)}catch{}return""+r}function ux(r){const t={};if(r===""||r==="?")return t;const i=(r[0]==="?"?r.slice(1):r).split("&");for(let s=0;s<i.length;++s){const n=i[s].replace(vp," "),o=n.indexOf("="),a=to(o<0?n:n.slice(0,o)),l=o<0?null:to(n.slice(o+1));if(a in t){let h=t[a];Ce(h)||(h=t[a]=[h]),h.push(l)}else t[a]=l}return t}function pu(r){let t="";for(let e in r){const i=r[e];if(e=lx(e),i==null){i!==void 0&&(t+=(t.length?"&":"")+e);continue}(Ce(i)?i.map(n=>n&&il(n)):[i&&il(i)]).forEach(n=>{n!==void 0&&(t+=(t.length?"&":"")+e,n!=null&&(t+="="+n))})}return t}function dx(r){const t={};for(const e in r){const i=r[e];i!==void 0&&(t[e]=Ce(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return t}const fx=Symbol(""),mu=Symbol(""),Rh=Symbol(""),Ep=Symbol(""),sl=Symbol("");function as(){let r=[];function t(i){return r.push(i),()=>{const s=r.indexOf(i);s>-1&&r.splice(s,1)}}function e(){r=[]}return{add:t,list:()=>r.slice(),reset:e}}function vr(r,t,e,i,s){const n=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const l=u=>{u===!1?a(Yi(4,{from:e,to:t})):u instanceof Error?a(u):kv(u)?a(Yi(2,{from:t,to:u})):(n&&i.enterCallbacks[s]===n&&typeof u=="function"&&n.push(u),o())},h=r.call(i&&i.instances[s],t,e,l);let c=Promise.resolve(h);r.length<3&&(c=c.then(l)),c.catch(u=>a(u))})}function ia(r,t,e,i){const s=[];for(const n of r)for(const o in n.components){let a=n.components[o];if(!(t!=="beforeRouteEnter"&&!n.instances[o]))if(px(a)){const h=(a.__vccOpts||a)[t];h&&s.push(vr(h,e,i,n,o))}else{let l=a();s.push(()=>l.then(h=>{if(!h)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${n.path}"`));const c=xv(h)?h.default:h;n.components[o]=c;const d=(c.__vccOpts||c)[t];return d&&vr(d,e,i,n,o)()}))}}return s}function px(r){return typeof r=="object"||"displayName"in r||"props"in r||"__vccOpts"in r}function gu(r){const t=Ve(Rh),e=Ve(Ep),i=Dt(()=>t.resolve(Oi(r.to))),s=Dt(()=>{const{matched:l}=i.value,{length:h}=l,c=l[h-1],u=e.matched;if(!c||!u.length)return-1;const d=u.findIndex(ji.bind(null,c));if(d>-1)return d;const f=yu(l[h-2]);return h>1&&yu(c)===f&&u[u.length-1].path!==f?u.findIndex(ji.bind(null,l[h-2])):d}),n=Dt(()=>s.value>-1&&_x(e.params,i.value.params)),o=Dt(()=>s.value>-1&&s.value===e.matched.length-1&&fp(e.params,i.value.params));function a(l={}){return yx(l)?t[Oi(r.replace)?"replace":"push"](Oi(r.to)).catch(Ss):Promise.resolve()}return{route:i,href:Dt(()=>i.value.href),isActive:n,isExactActive:o,navigate:a}}const mx=vh({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:gu,setup(r,{slots:t}){const e=li(gu(r)),{options:i}=Ve(Rh),s=Dt(()=>({[_u(r.activeClass,i.linkActiveClass,"router-link-active")]:e.isActive,[_u(r.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const n=t.default&&t.default(e);return r.custom?n:Sh("a",{"aria-current":e.isExactActive?r.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:s.value},n)}}}),gx=mx;function yx(r){if(!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)&&!r.defaultPrevented&&!(r.button!==void 0&&r.button!==0)){if(r.currentTarget&&r.currentTarget.getAttribute){const t=r.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return r.preventDefault&&r.preventDefault(),!0}}function _x(r,t){for(const e in t){const i=t[e],s=r[e];if(typeof i=="string"){if(i!==s)return!1}else if(!Ce(s)||s.length!==i.length||i.some((n,o)=>n!==s[o]))return!1}return!0}function yu(r){return r?r.aliasOf?r.aliasOf.path:r.path:""}const _u=(r,t,e)=>r??t??e,vx=vh({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(r,{attrs:t,slots:e}){const i=Ve(sl),s=Dt(()=>r.route||i.value),n=Ve(mu,0),o=Dt(()=>{let h=Oi(n);const{matched:c}=s.value;let u;for(;(u=c[h])&&!u.components;)h++;return h}),a=Dt(()=>s.value.matched[o.value]);Ts(mu,Dt(()=>o.value+1)),Ts(fx,a),Ts(sl,s);const l=Pr();return We(()=>[l.value,a.value,r.name],([h,c,u],[d,f,p])=>{c&&(c.instances[u]=h,f&&f!==c&&h&&h===d&&(c.leaveGuards.size||(c.leaveGuards=f.leaveGuards),c.updateGuards.size||(c.updateGuards=f.updateGuards))),h&&c&&(!f||!ji(c,f)||!d)&&(c.enterCallbacks[u]||[]).forEach(m=>m(h))},{flush:"post"}),()=>{const h=s.value,c=r.name,u=a.value,d=u&&u.components[c];if(!d)return vu(e.default,{Component:d,route:h});const f=u.props[c],p=f?f===!0?h.params:typeof f=="function"?f(h):f:null,g=Sh(d,St({},p,t,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(u.instances[c]=null)},ref:l}));return vu(e.default,{Component:g,route:h})||g}}});function vu(r,t){if(!r)return null;const e=r(t);return e.length===1?e[0]:e}const xx=vx;function bx(r){const t=Yv(r.routes,r),e=r.parseQuery||ux,i=r.stringifyQuery||pu,s=r.history,n=as(),o=as(),a=as(),l=Qr(pr);let h=pr;Ai&&r.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=ea.bind(null,S=>""+S),u=ea.bind(null,cx),d=ea.bind(null,to);function f(S,G){let D,Y;return mp(S)?(D=t.getRecordMatcher(S),Y=G):Y=S,t.addRoute(Y,D)}function p(S){const G=t.getRecordMatcher(S);G&&t.removeRoute(G)}function m(){return t.getRoutes().map(S=>S.record)}function g(S){return!!t.getRecordMatcher(S)}function y(S,G){if(G=St({},G||l.value),typeof S=="string"){const E=ra(e,S,G.path),w=t.resolve({path:E.path},G),R=s.createHref(E.fullPath);return St(E,w,{params:d(w.params),hash:to(E.hash),redirectedFrom:void 0,href:R})}let D;if("path"in S)D=St({},S,{path:ra(e,S.path,G.path).path});else{const E=St({},S.params);for(const w in E)E[w]==null&&delete E[w];D=St({},S,{params:u(E)}),G.params=u(G.params)}const Y=t.resolve(D,G),nt=S.hash||"";Y.params=c(d(Y.params));const v=Ev(i,St({},S,{hash:ax(nt),path:Y.path})),x=s.createHref(v);return St({fullPath:v,hash:nt,query:i===pu?dx(S.query):S.query||{}},Y,{redirectedFrom:void 0,href:x})}function A(S){return typeof S=="string"?ra(e,S,l.value.path):St({},S)}function _(S,G){if(h!==S)return Yi(8,{from:G,to:S})}function b(S){return P(S)}function C(S){return b(St(A(S),{replace:!0}))}function N(S){const G=S.matched[S.matched.length-1];if(G&&G.redirect){const{redirect:D}=G;let Y=typeof D=="function"?D(S):D;return typeof Y=="string"&&(Y=Y.includes("?")||Y.includes("#")?Y=A(Y):{path:Y},Y.params={}),St({query:S.query,hash:S.hash,params:"path"in Y?{}:S.params},Y)}}function P(S,G){const D=h=y(S),Y=l.value,nt=S.state,v=S.force,x=S.replace===!0,E=N(D);if(E)return P(St(A(E),{state:typeof E=="object"?St({},nt,E.state):nt,force:v,replace:x}),G||D);const w=D;w.redirectedFrom=G;let R;return!v&&Tv(i,Y,D)&&(R=Yi(16,{to:w,from:Y}),L(Y,Y,!0,!1)),(R?Promise.resolve(R):Z(w,Y)).catch(M=>Ke(M)?Ke(M,2)?M:k(M):j(M,w,Y)).then(M=>{if(M){if(Ke(M,2))return P(St({replace:x},A(M.to),{state:typeof M.to=="object"?St({},nt,M.to.state):nt,force:v}),G||w)}else M=H(w,Y,!0,x,nt);return ct(w,Y,M),M})}function I(S,G){const D=_(S,G);return D?Promise.reject(D):Promise.resolve()}function W(S){const G=bt.values().next().value;return G&&typeof G.runWithContext=="function"?G.runWithContext(S):S()}function Z(S,G){let D;const[Y,nt,v]=Ax(S,G);D=ia(Y.reverse(),"beforeRouteLeave",S,G);for(const E of Y)E.leaveGuards.forEach(w=>{D.push(vr(w,S,G))});const x=I.bind(null,S,G);return D.push(x),gt(D).then(()=>{D=[];for(const E of n.list())D.push(vr(E,S,G));return D.push(x),gt(D)}).then(()=>{D=ia(nt,"beforeRouteUpdate",S,G);for(const E of nt)E.updateGuards.forEach(w=>{D.push(vr(w,S,G))});return D.push(x),gt(D)}).then(()=>{D=[];for(const E of v)if(E.beforeEnter)if(Ce(E.beforeEnter))for(const w of E.beforeEnter)D.push(vr(w,S,G));else D.push(vr(E.beforeEnter,S,G));return D.push(x),gt(D)}).then(()=>(S.matched.forEach(E=>E.enterCallbacks={}),D=ia(v,"beforeRouteEnter",S,G),D.push(x),gt(D))).then(()=>{D=[];for(const E of o.list())D.push(vr(E,S,G));return D.push(x),gt(D)}).catch(E=>Ke(E,8)?E:Promise.reject(E))}function ct(S,G,D){a.list().forEach(Y=>W(()=>Y(S,G,D)))}function H(S,G,D,Y,nt){const v=_(S,G);if(v)return v;const x=G===pr,E=Ai?history.state:{};D&&(Y||x?s.replace(S.fullPath,St({scroll:x&&E&&E.scroll},nt)):s.push(S.fullPath,nt)),l.value=S,L(S,G,D,x),k()}let T;function F(){T||(T=s.listen((S,G,D)=>{if(!Bt.listening)return;const Y=y(S),nt=N(Y);if(nt){P(St(nt,{replace:!0}),Y).catch(Ss);return}h=Y;const v=l.value;Ai&&Bv(ou(v.fullPath,D.delta),Oo()),Z(Y,v).catch(x=>Ke(x,12)?x:Ke(x,2)?(P(x.to,Y).then(E=>{Ke(E,20)&&!D.delta&&D.type===Hs.pop&&s.go(-1,!1)}).catch(Ss),Promise.reject()):(D.delta&&s.go(-D.delta,!1),j(x,Y,v))).then(x=>{x=x||H(Y,v,!1),x&&(D.delta&&!Ke(x,8)?s.go(-D.delta,!1):D.type===Hs.pop&&Ke(x,20)&&s.go(-1,!1)),ct(Y,v,x)}).catch(Ss)}))}let J=as(),Q=as(),$;function j(S,G,D){k(S);const Y=Q.list();return Y.length?Y.forEach(nt=>nt(S,G,D)):console.error(S),Promise.reject(S)}function wt(){return $&&l.value!==pr?Promise.resolve():new Promise((S,G)=>{J.add([S,G])})}function k(S){return $||($=!S,F(),J.list().forEach(([G,D])=>S?D(S):G()),J.reset()),S}function L(S,G,D,Y){const{scrollBehavior:nt}=r;if(!Ai||!nt)return Promise.resolve();const v=!D&&Fv(ou(S.fullPath,0))||(Y||!D)&&history.state&&history.state.scroll||null;return mh().then(()=>nt(S,G,v)).then(x=>x&&Mv(x)).catch(x=>j(x,S,G))}const ht=S=>s.go(S);let xt;const bt=new Set,Bt={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,hasRoute:g,getRoutes:m,resolve:y,options:r,push:b,replace:C,go:ht,back:()=>ht(-1),forward:()=>ht(1),beforeEach:n.add,beforeResolve:o.add,afterEach:a.add,onError:Q.add,isReady:wt,install(S){const G=this;S.component("RouterLink",gx),S.component("RouterView",xx),S.config.globalProperties.$router=G,Object.defineProperty(S.config.globalProperties,"$route",{enumerable:!0,get:()=>Oi(l)}),Ai&&!xt&&l.value===pr&&(xt=!0,b(s.location).catch(nt=>{}));const D={};for(const nt in pr)Object.defineProperty(D,nt,{get:()=>l.value[nt],enumerable:!0});S.provide(Rh,G),S.provide(Ep,_f(D)),S.provide(sl,l);const Y=S.unmount;bt.add(S),S.unmount=function(){bt.delete(S),bt.size<1&&(h=pr,T&&T(),T=null,l.value=pr,xt=!1,$=!1),Y()}}};function gt(S){return S.reduce((G,D)=>G.then(()=>W(D)),Promise.resolve())}return Bt}function Ax(r,t){const e=[],i=[],s=[],n=Math.max(t.matched.length,r.matched.length);for(let o=0;o<n;o++){const a=t.matched[o];a&&(r.matched.find(h=>ji(h,a))?i.push(a):e.push(a));const l=r.matched[o];l&&(t.matched.find(h=>ji(h,l))||s.push(l))}return[e,i,s]}const Ex=[{path:"/",name:"Home",visible:"always",component:()=>vv(()=>Promise.resolve().then(()=>iC),void 0)}],Tx=bx({history:Lv({}.BASE_URL),routes:Ex});function wx(r){r.use(dv).use(gv).use(Tx)}var hi=(r=>(r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",r))(hi||{}),Tp=(r=>(r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS",r))(Tp||{}),nl=(r=>(r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL",r))(nl||{}),lt=(r=>(r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",r))(lt||{}),$e=(r=>(r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r))($e||{}),O=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))(O||{}),ki=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(ki||{}),st=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))(st||{}),q=(r=>(r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT",r))(q||{}),sr=(r=>(r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR",r))(sr||{}),Ir=(r=>(r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r))(Ir||{}),Ye=(r=>(r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL",r))(Ye||{}),se=(r=>(r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",r))(se||{}),ke=(r=>(r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT",r))(ke||{}),Ph=(r=>(r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",r))(Ph||{}),fe=(r=>(r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp",r))(fe||{}),$t=(r=>(r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR",r))($t||{}),Ht=(r=>(r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",r))(Ht||{}),Xe=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(Xe||{});const Sx={createCanvas:(r,t)=>{const e=document.createElement("canvas");return e.width=r,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,t)=>fetch(r,t),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")},K={ADAPTER:Sx,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var sa=/iPhone/i,xu=/iPod/i,bu=/iPad/i,Au=/\biOS-universal(?:.+)Mac\b/i,na=/\bAndroid(?:.+)Mobile\b/i,Eu=/Android/i,yi=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,an=/Silk/i,Ze=/Windows Phone/i,Tu=/\bWindows(?:.+)ARM\b/i,wu=/BlackBerry/i,Su=/BB10/i,Cu=/Opera Mini/i,Iu=/\b(CriOS|Chrome)(?:.+)Mobile/i,Ru=/Mobile(?:.+)Firefox\b/i,Pu=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function Cx(r){return function(t){return t.test(r)}}function Mu(r){var t={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?t.userAgent=r:r&&r.userAgent&&(t={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var e=t.userAgent,i=e.split("[FBAN");typeof i[1]<"u"&&(e=i[0]),i=e.split("Twitter"),typeof i[1]<"u"&&(e=i[0]);var s=Cx(e),n={apple:{phone:s(sa)&&!s(Ze),ipod:s(xu),tablet:!s(sa)&&(s(bu)||Pu(t))&&!s(Ze),universal:s(Au),device:(s(sa)||s(xu)||s(bu)||s(Au)||Pu(t))&&!s(Ze)},amazon:{phone:s(yi),tablet:!s(yi)&&s(an),device:s(yi)||s(an)},android:{phone:!s(Ze)&&s(yi)||!s(Ze)&&s(na),tablet:!s(Ze)&&!s(yi)&&!s(na)&&(s(an)||s(Eu)),device:!s(Ze)&&(s(yi)||s(an)||s(na)||s(Eu))||s(/\bokhttp\b/i)},windows:{phone:s(Ze),tablet:s(Tu),device:s(Ze)||s(Tu)},other:{blackberry:s(wu),blackberry10:s(Su),opera:s(Cu),firefox:s(Ru),chrome:s(Iu),device:s(wu)||s(Su)||s(Cu)||s(Ru)||s(Iu)},any:!1,phone:!1,tablet:!1};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}const Ix=Mu.default??Mu,nr=Ix(globalThis.navigator);K.RETINA_PREFIX=/@([0-9\.]+)x/;K.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Nn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Rx(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var s=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:function(){return r[i]}})}),e}var Sp={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function s(l,h,c){this.fn=l,this.context=h,this.once=c||!1}function n(l,h,c,u,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var f=new s(c,u||l,d),p=e?e+h:h;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,h){--l._eventsCount===0?l._events=new i:delete l._events[h]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var h=[],c,u;if(this._eventsCount===0)return h;for(u in c=this._events)t.call(c,u)&&h.push(e?u.slice(1):u);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(c)):h},a.prototype.listeners=function(h){var c=e?e+h:h,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,f=u.length,p=new Array(f);d<f;d++)p[d]=u[d].fn;return p},a.prototype.listenerCount=function(h){var c=e?e+h:h,u=this._events[c];return u?u.fn?1:u.length:0},a.prototype.emit=function(h,c,u,d,f,p){var m=e?e+h:h;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,A,_;if(g.fn){switch(g.once&&this.removeListener(h,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,u),!0;case 4:return g.fn.call(g.context,c,u,d),!0;case 5:return g.fn.call(g.context,c,u,d,f),!0;case 6:return g.fn.call(g.context,c,u,d,f,p),!0}for(_=1,A=new Array(y-1);_<y;_++)A[_-1]=arguments[_];g.fn.apply(g.context,A)}else{var b=g.length,C;for(_=0;_<b;_++)switch(g[_].once&&this.removeListener(h,g[_].fn,void 0,!0),y){case 1:g[_].fn.call(g[_].context);break;case 2:g[_].fn.call(g[_].context,c);break;case 3:g[_].fn.call(g[_].context,c,u);break;case 4:g[_].fn.call(g[_].context,c,u,d);break;default:if(!A)for(C=1,A=new Array(y-1);C<y;C++)A[C-1]=arguments[C];g[_].fn.apply(g[_].context,A)}}return!0},a.prototype.on=function(h,c,u){return n(this,h,c,u,!1)},a.prototype.once=function(h,c,u){return n(this,h,c,u,!0)},a.prototype.removeListener=function(h,c,u,d){var f=e?e+h:h;if(!this._events[f])return this;if(!c)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===c&&(!d||p.once)&&(!u||p.context===u)&&o(this,f);else{for(var m=0,g=[],y=p.length;m<y;m++)(p[m].fn!==c||d&&!p[m].once||u&&p[m].context!==u)&&g.push(p[m]);g.length?this._events[f]=g.length===1?g[0]:g:o(this,f)}return this},a.prototype.removeAllListeners=function(h){var c;return h?(c=e?e+h:h,this._events[c]&&o(this,c)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,r.exports=a})(Sp);var Px=Sp.exports;const js=wp(Px);var Mh={exports:{}};Mh.exports=No;Mh.exports.default=No;function No(r,t,e){e=e||2;var i=t&&t.length,s=i?t[0]*e:r.length,n=Cp(r,0,s,e,!0),o=[];if(!n||n.next===n.prev)return o;var a,l,h,c,u,d,f;if(i&&(n=Ox(r,t,n,e)),r.length>80*e){a=h=r[0],l=c=r[1];for(var p=e;p<s;p+=e)u=r[p],d=r[p+1],u<a&&(a=u),d<l&&(l=d),u>h&&(h=u),d>c&&(c=d);f=Math.max(h-a,c-l),f=f!==0?32767/f:0}return $s(n,o,e,a,l,f,0),o}function Cp(r,t,e,i,s){var n,o;if(s===ll(r,t,e,i)>0)for(n=t;n<e;n+=i)o=Bu(n,r[n],r[n+1],o);else for(n=e-i;n>=t;n-=i)o=Bu(n,r[n],r[n+1],o);return o&&Lo(o,o.next)&&(Vs(o),o=o.next),o}function ni(r,t){if(!r)return r;t||(t=r);var e=r,i;do if(i=!1,!e.steiner&&(Lo(e,e.next)||Ot(e.prev,e,e.next)===0)){if(Vs(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function $s(r,t,e,i,s,n,o){if(r){!o&&n&&Gx(r,i,s,n);for(var a=r,l,h;r.prev!==r.next;){if(l=r.prev,h=r.next,n?Bx(r,i,s,n):Mx(r)){t.push(l.i/e|0),t.push(r.i/e|0),t.push(h.i/e|0),Vs(r),r=h.next,a=h.next;continue}if(r=h,r===a){o?o===1?(r=Fx(ni(r),t,e),$s(r,t,e,i,s,n,2)):o===2&&Dx(r,t,e,i,s,n):$s(ni(r),t,e,i,s,n,1);break}}}}function Mx(r){var t=r.prev,e=r,i=r.next;if(Ot(t,e,i)>=0)return!1;for(var s=t.x,n=e.x,o=i.x,a=t.y,l=e.y,h=i.y,c=s<n?s<o?s:o:n<o?n:o,u=a<l?a<h?a:h:l<h?l:h,d=s>n?s>o?s:o:n>o?n:o,f=a>l?a>h?a:h:l>h?l:h,p=i.next;p!==t;){if(p.x>=c&&p.x<=d&&p.y>=u&&p.y<=f&&Mi(s,a,n,l,o,h,p.x,p.y)&&Ot(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Bx(r,t,e,i){var s=r.prev,n=r,o=r.next;if(Ot(s,n,o)>=0)return!1;for(var a=s.x,l=n.x,h=o.x,c=s.y,u=n.y,d=o.y,f=a<l?a<h?a:h:l<h?l:h,p=c<u?c<d?c:d:u<d?u:d,m=a>l?a>h?a:h:l>h?l:h,g=c>u?c>d?c:d:u>d?u:d,y=ol(f,p,t,e,i),A=ol(m,g,t,e,i),_=r.prevZ,b=r.nextZ;_&&_.z>=y&&b&&b.z<=A;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==s&&_!==o&&Mi(a,c,l,u,h,d,_.x,_.y)&&Ot(_.prev,_,_.next)>=0||(_=_.prevZ,b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==s&&b!==o&&Mi(a,c,l,u,h,d,b.x,b.y)&&Ot(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;_&&_.z>=y;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==s&&_!==o&&Mi(a,c,l,u,h,d,_.x,_.y)&&Ot(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;b&&b.z<=A;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==s&&b!==o&&Mi(a,c,l,u,h,d,b.x,b.y)&&Ot(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Fx(r,t,e){var i=r;do{var s=i.prev,n=i.next.next;!Lo(s,n)&&Ip(s,i,i.next,n)&&Ws(s,n)&&Ws(n,s)&&(t.push(s.i/e|0),t.push(i.i/e|0),t.push(n.i/e|0),Vs(i),Vs(i.next),i=r=n),i=i.next}while(i!==r);return ni(i)}function Dx(r,t,e,i,s,n){var o=r;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&Wx(o,a)){var l=Rp(o,a);o=ni(o,o.next),l=ni(l,l.next),$s(o,t,e,i,s,n,0),$s(l,t,e,i,s,n,0);return}a=a.next}o=o.next}while(o!==r)}function Ox(r,t,e,i){var s=[],n,o,a,l,h;for(n=0,o=t.length;n<o;n++)a=t[n]*i,l=n<o-1?t[n+1]*i:r.length,h=Cp(r,a,l,i,!1),h===h.next&&(h.steiner=!0),s.push($x(h));for(s.sort(Nx),n=0;n<s.length;n++)e=Lx(s[n],e);return e}function Nx(r,t){return r.x-t.x}function Lx(r,t){var e=kx(r,t);if(!e)return t;var i=Rp(e,r);return ni(i,i.next),ni(e,e.next)}function kx(r,t){var e=t,i=r.x,s=r.y,n=-1/0,o;do{if(s<=e.y&&s>=e.next.y&&e.next.y!==e.y){var a=e.x+(s-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(a<=i&&a>n&&(n=a,o=e.x<e.next.x?e:e.next,a===i))return o}e=e.next}while(e!==t);if(!o)return null;var l=o,h=o.x,c=o.y,u=1/0,d;e=o;do i>=e.x&&e.x>=h&&i!==e.x&&Mi(s<c?i:n,s,h,c,s<c?n:i,s,e.x,e.y)&&(d=Math.abs(s-e.y)/(i-e.x),Ws(e,r)&&(d<u||d===u&&(e.x>o.x||e.x===o.x&&Ux(o,e)))&&(o=e,u=d)),e=e.next;while(e!==l);return o}function Ux(r,t){return Ot(r.prev,r,t.prev)<0&&Ot(t.next,r,r.next)<0}function Gx(r,t,e,i){var s=r;do s.z===0&&(s.z=ol(s.x,s.y,t,e,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==r);s.prevZ.nextZ=null,s.prevZ=null,Hx(s)}function Hx(r){var t,e,i,s,n,o,a,l,h=1;do{for(e=r,r=null,n=null,o=0;e;){for(o++,i=e,a=0,t=0;t<h&&(a++,i=i.nextZ,!!i);t++);for(l=h;a>0||l>0&&i;)a!==0&&(l===0||!i||e.z<=i.z)?(s=e,e=e.nextZ,a--):(s=i,i=i.nextZ,l--),n?n.nextZ=s:r=s,s.prevZ=n,n=s;e=i}n.nextZ=null,h*=2}while(o>1);return r}function ol(r,t,e,i,s){return r=(r-e)*s|0,t=(t-i)*s|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1}function $x(r){var t=r,e=r;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==r);return e}function Mi(r,t,e,i,s,n,o,a){return(s-o)*(t-a)>=(r-o)*(n-a)&&(r-o)*(i-a)>=(e-o)*(t-a)&&(e-o)*(n-a)>=(s-o)*(i-a)}function Wx(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!Vx(r,t)&&(Ws(r,t)&&Ws(t,r)&&Xx(r,t)&&(Ot(r.prev,r,t.prev)||Ot(r,t.prev,t))||Lo(r,t)&&Ot(r.prev,r,r.next)>0&&Ot(t.prev,t,t.next)>0)}function Ot(r,t,e){return(t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y)}function Lo(r,t){return r.x===t.x&&r.y===t.y}function Ip(r,t,e,i){var s=hn(Ot(r,t,e)),n=hn(Ot(r,t,i)),o=hn(Ot(e,i,r)),a=hn(Ot(e,i,t));return!!(s!==n&&o!==a||s===0&&ln(r,e,t)||n===0&&ln(r,i,t)||o===0&&ln(e,r,i)||a===0&&ln(e,t,i))}function ln(r,t,e){return t.x<=Math.max(r.x,e.x)&&t.x>=Math.min(r.x,e.x)&&t.y<=Math.max(r.y,e.y)&&t.y>=Math.min(r.y,e.y)}function hn(r){return r>0?1:r<0?-1:0}function Vx(r,t){var e=r;do{if(e.i!==r.i&&e.next.i!==r.i&&e.i!==t.i&&e.next.i!==t.i&&Ip(e,e.next,r,t))return!0;e=e.next}while(e!==r);return!1}function Ws(r,t){return Ot(r.prev,r,r.next)<0?Ot(r,t,r.next)>=0&&Ot(r,r.prev,t)>=0:Ot(r,t,r.prev)<0||Ot(r,r.next,t)<0}function Xx(r,t){var e=r,i=!1,s=(r.x+t.x)/2,n=(r.y+t.y)/2;do e.y>n!=e.next.y>n&&e.next.y!==e.y&&s<(e.next.x-e.x)*(n-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==r);return i}function Rp(r,t){var e=new al(r.i,r.x,r.y),i=new al(t.i,t.x,t.y),s=r.next,n=t.prev;return r.next=t,t.prev=r,e.next=s,s.prev=e,i.next=e,e.prev=i,n.next=i,i.prev=n,i}function Bu(r,t,e,i){var s=new al(r,t,e);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function Vs(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function al(r,t,e){this.i=r,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}No.deviation=function(r,t,e,i){var s=t&&t.length,n=s?t[0]*e:r.length,o=Math.abs(ll(r,0,n,e));if(s)for(var a=0,l=t.length;a<l;a++){var h=t[a]*e,c=a<l-1?t[a+1]*e:r.length;o-=Math.abs(ll(r,h,c,e))}var u=0;for(a=0;a<i.length;a+=3){var d=i[a]*e,f=i[a+1]*e,p=i[a+2]*e;u+=Math.abs((r[d]-r[p])*(r[f+1]-r[d+1])-(r[d]-r[f])*(r[p+1]-r[d+1]))}return o===0&&u===0?0:Math.abs((u-o)/o)};function ll(r,t,e,i){for(var s=0,n=t,o=e-i;n<e;n+=i)s+=(r[o]-r[n])*(r[n+1]+r[o+1]),o=n;return s}No.flatten=function(r){for(var t=r[0][0].length,e={vertices:[],holes:[],dimensions:t},i=0,s=0;s<r.length;s++){for(var n=0;n<r[s].length;n++)for(var o=0;o<t;o++)e.vertices.push(r[s][n][o]);s>0&&(i+=r[s-1].length,e.holes.push(i))}return e};var zx=Mh.exports;const jx=wp(zx);var eo={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */eo.exports;(function(r,t){(function(e){var i=t&&!t.nodeType&&t,s=r&&!r.nodeType&&r,n=typeof Nn=="object"&&Nn;(n.global===n||n.window===n||n.self===n)&&(e=n);var o,a=2147483647,l=36,h=1,c=26,u=38,d=700,f=72,p=128,m="-",g=/^xn--/,y=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=l-h,C=Math.floor,N=String.fromCharCode,P;function I(k){throw new RangeError(_[k])}function W(k,L){for(var ht=k.length,xt=[];ht--;)xt[ht]=L(k[ht]);return xt}function Z(k,L){var ht=k.split("@"),xt="";ht.length>1&&(xt=ht[0]+"@",k=ht[1]),k=k.replace(A,".");var bt=k.split("."),Bt=W(bt,L).join(".");return xt+Bt}function ct(k){for(var L=[],ht=0,xt=k.length,bt,Bt;ht<xt;)bt=k.charCodeAt(ht++),bt>=55296&&bt<=56319&&ht<xt?(Bt=k.charCodeAt(ht++),(Bt&64512)==56320?L.push(((bt&1023)<<10)+(Bt&1023)+65536):(L.push(bt),ht--)):L.push(bt);return L}function H(k){return W(k,function(L){var ht="";return L>65535&&(L-=65536,ht+=N(L>>>10&1023|55296),L=56320|L&1023),ht+=N(L),ht}).join("")}function T(k){return k-48<10?k-22:k-65<26?k-65:k-97<26?k-97:l}function F(k,L){return k+22+75*(k<26)-((L!=0)<<5)}function J(k,L,ht){var xt=0;for(k=ht?C(k/d):k>>1,k+=C(k/L);k>b*c>>1;xt+=l)k=C(k/b);return C(xt+(b+1)*k/(k+u))}function Q(k){var L=[],ht=k.length,xt,bt=0,Bt=p,gt=f,S,G,D,Y,nt,v,x,E,w;for(S=k.lastIndexOf(m),S<0&&(S=0),G=0;G<S;++G)k.charCodeAt(G)>=128&&I("not-basic"),L.push(k.charCodeAt(G));for(D=S>0?S+1:0;D<ht;){for(Y=bt,nt=1,v=l;D>=ht&&I("invalid-input"),x=T(k.charCodeAt(D++)),(x>=l||x>C((a-bt)/nt))&&I("overflow"),bt+=x*nt,E=v<=gt?h:v>=gt+c?c:v-gt,!(x<E);v+=l)w=l-E,nt>C(a/w)&&I("overflow"),nt*=w;xt=L.length+1,gt=J(bt-Y,xt,Y==0),C(bt/xt)>a-Bt&&I("overflow"),Bt+=C(bt/xt),bt%=xt,L.splice(bt++,0,Bt)}return H(L)}function $(k){var L,ht,xt,bt,Bt,gt,S,G,D,Y,nt,v=[],x,E,w,R;for(k=ct(k),x=k.length,L=p,ht=0,Bt=f,gt=0;gt<x;++gt)nt=k[gt],nt<128&&v.push(N(nt));for(xt=bt=v.length,bt&&v.push(m);xt<x;){for(S=a,gt=0;gt<x;++gt)nt=k[gt],nt>=L&&nt<S&&(S=nt);for(E=xt+1,S-L>C((a-ht)/E)&&I("overflow"),ht+=(S-L)*E,L=S,gt=0;gt<x;++gt)if(nt=k[gt],nt<L&&++ht>a&&I("overflow"),nt==L){for(G=ht,D=l;Y=D<=Bt?h:D>=Bt+c?c:D-Bt,!(G<Y);D+=l)R=G-Y,w=l-Y,v.push(N(F(Y+R%w,0))),G=C(R/w);v.push(N(F(G,0))),Bt=J(ht,E,xt==bt),ht=0,++xt}++ht,++L}return v.join("")}function j(k){return Z(k,function(L){return g.test(L)?Q(L.slice(4).toLowerCase()):L})}function wt(k){return Z(k,function(L){return y.test(L)?"xn--"+$(L):L})}if(o={version:"1.4.1",ucs2:{decode:ct,encode:H},decode:Q,encode:$,toASCII:wt,toUnicode:j},i&&s)if(r.exports==i)s.exports=o;else for(P in o)o.hasOwnProperty(P)&&(i[P]=o[P]);else e.punycode=o})(Nn)})(eo,eo.exports);var Yx=eo.exports,qx=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),i=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var s=42;t[e]=s;for(e in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var n=Object.getOwnPropertySymbols(t);if(n.length!==1||n[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,e);if(o.value!==s||o.enumerable!==!0)return!1}return!0},Fu=typeof Symbol<"u"&&Symbol,Kx=qx,Zx=function(){return typeof Fu!="function"||typeof Symbol!="function"||typeof Fu("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Kx()},Du={foo:{}},Qx=Object,Jx=function(){return{__proto__:Du}.foo===Du.foo&&!({__proto__:null}instanceof Qx)},tb="Function.prototype.bind called on incompatible ",eb=Object.prototype.toString,rb=Math.max,ib="[object Function]",Ou=function(t,e){for(var i=[],s=0;s<t.length;s+=1)i[s]=t[s];for(var n=0;n<e.length;n+=1)i[n+t.length]=e[n];return i},sb=function(t,e){for(var i=[],s=e||0,n=0;s<t.length;s+=1,n+=1)i[n]=t[s];return i},nb=function(r,t){for(var e="",i=0;i<r.length;i+=1)e+=r[i],i+1<r.length&&(e+=t);return e},ob=function(t){var e=this;if(typeof e!="function"||eb.apply(e)!==ib)throw new TypeError(tb+e);for(var i=sb(arguments,1),s,n=function(){if(this instanceof s){var c=e.apply(this,Ou(i,arguments));return Object(c)===c?c:this}return e.apply(t,Ou(i,arguments))},o=rb(0,e.length-i.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(s=Function("binder","return function ("+nb(a,",")+"){ return binder.apply(this,arguments); }")(n),e.prototype){var h=function(){};h.prototype=e.prototype,s.prototype=new h,h.prototype=null}return s},ab=ob,Bh=Function.prototype.bind||ab,lb=Function.prototype.call,hb=Object.prototype.hasOwnProperty,cb=Bh,ub=cb.call(lb,hb),vt,qi=SyntaxError,Pp=Function,Ui=TypeError,oa=function(r){try{return Pp('"use strict"; return ('+r+").constructor;")()}catch{}},ti=Object.getOwnPropertyDescriptor;if(ti)try{ti({},"")}catch{ti=null}var aa=function(){throw new Ui},db=ti?function(){try{return arguments.callee,aa}catch{try{return ti(arguments,"callee").get}catch{return aa}}}():aa,_i=Zx(),fb=Jx(),Xt=Object.getPrototypeOf||(fb?function(r){return r.__proto__}:null),Ei={},pb=typeof Uint8Array>"u"||!Xt?vt:Xt(Uint8Array),ei={"%AggregateError%":typeof AggregateError>"u"?vt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?vt:ArrayBuffer,"%ArrayIteratorPrototype%":_i&&Xt?Xt([][Symbol.iterator]()):vt,"%AsyncFromSyncIteratorPrototype%":vt,"%AsyncFunction%":Ei,"%AsyncGenerator%":Ei,"%AsyncGeneratorFunction%":Ei,"%AsyncIteratorPrototype%":Ei,"%Atomics%":typeof Atomics>"u"?vt:Atomics,"%BigInt%":typeof BigInt>"u"?vt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?vt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?vt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?vt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?vt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?vt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?vt:FinalizationRegistry,"%Function%":Pp,"%GeneratorFunction%":Ei,"%Int8Array%":typeof Int8Array>"u"?vt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?vt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?vt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":_i&&Xt?Xt(Xt([][Symbol.iterator]())):vt,"%JSON%":typeof JSON=="object"?JSON:vt,"%Map%":typeof Map>"u"?vt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!_i||!Xt?vt:Xt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?vt:Promise,"%Proxy%":typeof Proxy>"u"?vt:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?vt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?vt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!_i||!Xt?vt:Xt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?vt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":_i&&Xt?Xt(""[Symbol.iterator]()):vt,"%Symbol%":_i?Symbol:vt,"%SyntaxError%":qi,"%ThrowTypeError%":db,"%TypedArray%":pb,"%TypeError%":Ui,"%Uint8Array%":typeof Uint8Array>"u"?vt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?vt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?vt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?vt:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?vt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?vt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?vt:WeakSet};if(Xt)try{null.error}catch(r){var mb=Xt(Xt(r));ei["%Error.prototype%"]=mb}var gb=function r(t){var e;if(t==="%AsyncFunction%")e=oa("async function () {}");else if(t==="%GeneratorFunction%")e=oa("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=oa("async function* () {}");else if(t==="%AsyncGenerator%"){var i=r("%AsyncGeneratorFunction%");i&&(e=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var s=r("%AsyncGenerator%");s&&Xt&&(e=Xt(s.prototype))}return ei[t]=e,e},Nu={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ys=Bh,ro=ub,yb=Ys.call(Function.call,Array.prototype.concat),_b=Ys.call(Function.apply,Array.prototype.splice),Lu=Ys.call(Function.call,String.prototype.replace),io=Ys.call(Function.call,String.prototype.slice),vb=Ys.call(Function.call,RegExp.prototype.exec),xb=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,bb=/\\(\\)?/g,Ab=function(t){var e=io(t,0,1),i=io(t,-1);if(e==="%"&&i!=="%")throw new qi("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&e!=="%")throw new qi("invalid intrinsic syntax, expected opening `%`");var s=[];return Lu(t,xb,function(n,o,a,l){s[s.length]=a?Lu(l,bb,"$1"):o||n}),s},Eb=function(t,e){var i=t,s;if(ro(Nu,i)&&(s=Nu[i],i="%"+s[0]+"%"),ro(ei,i)){var n=ei[i];if(n===Ei&&(n=gb(i)),typeof n>"u"&&!e)throw new Ui("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:s,name:i,value:n}}throw new qi("intrinsic "+t+" does not exist!")},ci=function(t,e){if(typeof t!="string"||t.length===0)throw new Ui("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new Ui('"allowMissing" argument must be a boolean');if(vb(/^%?[^%]*%?$/,t)===null)throw new qi("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=Ab(t),s=i.length>0?i[0]:"",n=Eb("%"+s+"%",e),o=n.name,a=n.value,l=!1,h=n.alias;h&&(s=h[0],_b(i,yb([0,1],h)));for(var c=1,u=!0;c<i.length;c+=1){var d=i[c],f=io(d,0,1),p=io(d,-1);if((f==='"'||f==="'"||f==="`"||p==='"'||p==="'"||p==="`")&&f!==p)throw new qi("property names with quotes must have matching quotes");if((d==="constructor"||!u)&&(l=!0),s+="."+d,o="%"+s+"%",ro(ei,o))a=ei[o];else if(a!=null){if(!(d in a)){if(!e)throw new Ui("base intrinsic for "+t+" exists, but the property is not available.");return}if(ti&&c+1>=i.length){var m=ti(a,d);u=!!m,u&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[d]}else u=ro(a,d),a=a[d];u&&!l&&(ei[o]=a)}}return a},Mp={exports:{}},Tb=ci,hl=Tb("%Object.defineProperty%",!0),cl=function(){if(hl)try{return hl({},"a",{value:1}),!0}catch{return!1}return!1};cl.hasArrayLengthDefineBug=function(){if(!cl())return null;try{return hl([],"length",{value:1}).length!==1}catch{return!0}};var Bp=cl,wb=ci,Ln=wb("%Object.getOwnPropertyDescriptor%",!0);if(Ln)try{Ln([],"length")}catch{Ln=null}var Fp=Ln,Sb=Bp(),Fh=ci,Is=Sb&&Fh("%Object.defineProperty%",!0);if(Is)try{Is({},"a",{value:1})}catch{Is=!1}var Cb=Fh("%SyntaxError%"),vi=Fh("%TypeError%"),ku=Fp,Ib=function(t,e,i){if(!t||typeof t!="object"&&typeof t!="function")throw new vi("`obj` must be an object or a function`");if(typeof e!="string"&&typeof e!="symbol")throw new vi("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new vi("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new vi("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new vi("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new vi("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,n=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!ku&&ku(t,e);if(Is)Is(t,e,{configurable:o===null&&l?l.configurable:!o,enumerable:s===null&&l?l.enumerable:!s,value:i,writable:n===null&&l?l.writable:!n});else if(a||!s&&!n&&!o)t[e]=i;else throw new Cb("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Dp=ci,Uu=Ib,Rb=Bp(),Gu=Fp,Hu=Dp("%TypeError%"),Pb=Dp("%Math.floor%"),Mb=function(t,e){if(typeof t!="function")throw new Hu("`fn` is not a function");if(typeof e!="number"||e<0||e>4294967295||Pb(e)!==e)throw new Hu("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],s=!0,n=!0;if("length"in t&&Gu){var o=Gu(t,"length");o&&!o.configurable&&(s=!1),o&&!o.writable&&(n=!1)}return(s||n||!i)&&(Rb?Uu(t,"length",e,!0,!0):Uu(t,"length",e)),t};(function(r){var t=Bh,e=ci,i=Mb,s=e("%TypeError%"),n=e("%Function.prototype.apply%"),o=e("%Function.prototype.call%"),a=e("%Reflect.apply%",!0)||t.call(o,n),l=e("%Object.defineProperty%",!0),h=e("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}r.exports=function(d){if(typeof d!="function")throw new s("a function is required");var f=a(t,o,arguments);return i(f,1+h(0,d.length-(arguments.length-1)),!0)};var c=function(){return a(t,n,arguments)};l?l(r.exports,"apply",{value:c}):r.exports.apply=c})(Mp);var Bb=Mp.exports,Op=ci,Np=Bb,Fb=Np(Op("String.prototype.indexOf")),Db=function(t,e){var i=Op(t,!!e);return typeof i=="function"&&Fb(t,".prototype.")>-1?Np(i):i};const Ob={},Nb=Object.freeze(Object.defineProperty({__proto__:null,default:Ob},Symbol.toStringTag,{value:"Module"})),Lb=Rx(Nb);var Dh=typeof Map=="function"&&Map.prototype,la=Object.getOwnPropertyDescriptor&&Dh?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,so=Dh&&la&&typeof la.get=="function"?la.get:null,$u=Dh&&Map.prototype.forEach,Oh=typeof Set=="function"&&Set.prototype,ha=Object.getOwnPropertyDescriptor&&Oh?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,no=Oh&&ha&&typeof ha.get=="function"?ha.get:null,Wu=Oh&&Set.prototype.forEach,kb=typeof WeakMap=="function"&&WeakMap.prototype,Rs=kb?WeakMap.prototype.has:null,Ub=typeof WeakSet=="function"&&WeakSet.prototype,Ps=Ub?WeakSet.prototype.has:null,Gb=typeof WeakRef=="function"&&WeakRef.prototype,Vu=Gb?WeakRef.prototype.deref:null,Hb=Boolean.prototype.valueOf,$b=Object.prototype.toString,Wb=Function.prototype.toString,Vb=String.prototype.match,Nh=String.prototype.slice,Er=String.prototype.replace,Xb=String.prototype.toUpperCase,Xu=String.prototype.toLowerCase,Lp=RegExp.prototype.test,zu=Array.prototype.concat,Ue=Array.prototype.join,zb=Array.prototype.slice,ju=Math.floor,ul=typeof BigInt=="function"?BigInt.prototype.valueOf:null,ca=Object.getOwnPropertySymbols,dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ki=typeof Symbol=="function"&&typeof Symbol.iterator=="object",te=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ki||"symbol")?Symbol.toStringTag:null,kp=Object.prototype.propertyIsEnumerable,Yu=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function qu(r,t){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||Lp.call(/e/,t))return t;var e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var i=r<0?-ju(-r):ju(r);if(i!==r){var s=String(i),n=Nh.call(t,s.length+1);return Er.call(s,e,"$&_")+"."+Er.call(Er.call(n,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Er.call(t,e,"$&_")}var fl=Lb,Ku=fl.custom,Zu=Gp(Ku)?Ku:null,jb=function r(t,e,i,s){var n=e||{};if(xr(n,"quoteStyle")&&n.quoteStyle!=="single"&&n.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(xr(n,"maxStringLength")&&(typeof n.maxStringLength=="number"?n.maxStringLength<0&&n.maxStringLength!==1/0:n.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=xr(n,"customInspect")?n.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(xr(n,"indent")&&n.indent!==null&&n.indent!=="	"&&!(parseInt(n.indent,10)===n.indent&&n.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(xr(n,"numericSeparator")&&typeof n.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=n.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return $p(t,n);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var l=String(t);return a?qu(t,l):l}if(typeof t=="bigint"){var h=String(t)+"n";return a?qu(t,h):h}var c=typeof n.depth>"u"?5:n.depth;if(typeof i>"u"&&(i=0),i>=c&&c>0&&typeof t=="object")return pl(t)?"[Array]":"[Object]";var u=u1(n,i);if(typeof s>"u")s=[];else if(Hp(s,t)>=0)return"[Circular]";function d(T,F,J){if(F&&(s=zb.call(s),s.push(F)),J){var Q={depth:n.depth};return xr(n,"quoteStyle")&&(Q.quoteStyle=n.quoteStyle),r(T,Q,i+1,s)}return r(T,n,i+1,s)}if(typeof t=="function"&&!Qu(t)){var f=r1(t),p=cn(t,d);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+Ue.call(p,", ")+" }":"")}if(Gp(t)){var m=Ki?Er.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):dl.call(t);return typeof t=="object"&&!Ki?ls(m):m}if(l1(t)){for(var g="<"+Xu.call(String(t.nodeName)),y=t.attributes||[],A=0;A<y.length;A++)g+=" "+y[A].name+"="+Up(Yb(y[A].value),"double",n);return g+=">",t.childNodes&&t.childNodes.length&&(g+="..."),g+="</"+Xu.call(String(t.nodeName))+">",g}if(pl(t)){if(t.length===0)return"[]";var _=cn(t,d);return u&&!c1(_)?"["+ml(_,u)+"]":"[ "+Ue.call(_,", ")+" ]"}if(Kb(t)){var b=cn(t,d);return!("cause"in Error.prototype)&&"cause"in t&&!kp.call(t,"cause")?"{ ["+String(t)+"] "+Ue.call(zu.call("[cause]: "+d(t.cause),b),", ")+" }":b.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+Ue.call(b,", ")+" }"}if(typeof t=="object"&&o){if(Zu&&typeof t[Zu]=="function"&&fl)return fl(t,{depth:c-i});if(o!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(i1(t)){var C=[];return $u&&$u.call(t,function(T,F){C.push(d(F,t,!0)+" => "+d(T,t))}),Ju("Map",so.call(t),C,u)}if(o1(t)){var N=[];return Wu&&Wu.call(t,function(T){N.push(d(T,t))}),Ju("Set",no.call(t),N,u)}if(s1(t))return ua("WeakMap");if(a1(t))return ua("WeakSet");if(n1(t))return ua("WeakRef");if(Qb(t))return ls(d(Number(t)));if(t1(t))return ls(d(ul.call(t)));if(Jb(t))return ls(Hb.call(t));if(Zb(t))return ls(d(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===Nn)return"{ [object globalThis] }";if(!qb(t)&&!Qu(t)){var P=cn(t,d),I=Yu?Yu(t)===Object.prototype:t instanceof Object||t.constructor===Object,W=t instanceof Object?"":"null prototype",Z=!I&&te&&Object(t)===t&&te in t?Nh.call(Dr(t),8,-1):W?"Object":"",ct=I||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",H=ct+(Z||W?"["+Ue.call(zu.call([],Z||[],W||[]),": ")+"] ":"");return P.length===0?H+"{}":u?H+"{"+ml(P,u)+"}":H+"{ "+Ue.call(P,", ")+" }"}return String(t)};function Up(r,t,e){var i=(e.quoteStyle||t)==="double"?'"':"'";return i+r+i}function Yb(r){return Er.call(String(r),/"/g,"&quot;")}function pl(r){return Dr(r)==="[object Array]"&&(!te||!(typeof r=="object"&&te in r))}function qb(r){return Dr(r)==="[object Date]"&&(!te||!(typeof r=="object"&&te in r))}function Qu(r){return Dr(r)==="[object RegExp]"&&(!te||!(typeof r=="object"&&te in r))}function Kb(r){return Dr(r)==="[object Error]"&&(!te||!(typeof r=="object"&&te in r))}function Zb(r){return Dr(r)==="[object String]"&&(!te||!(typeof r=="object"&&te in r))}function Qb(r){return Dr(r)==="[object Number]"&&(!te||!(typeof r=="object"&&te in r))}function Jb(r){return Dr(r)==="[object Boolean]"&&(!te||!(typeof r=="object"&&te in r))}function Gp(r){if(Ki)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!dl)return!1;try{return dl.call(r),!0}catch{}return!1}function t1(r){if(!r||typeof r!="object"||!ul)return!1;try{return ul.call(r),!0}catch{}return!1}var e1=Object.prototype.hasOwnProperty||function(r){return r in this};function xr(r,t){return e1.call(r,t)}function Dr(r){return $b.call(r)}function r1(r){if(r.name)return r.name;var t=Vb.call(Wb.call(r),/^function\s*([\w$]+)/);return t?t[1]:null}function Hp(r,t){if(r.indexOf)return r.indexOf(t);for(var e=0,i=r.length;e<i;e++)if(r[e]===t)return e;return-1}function i1(r){if(!so||!r||typeof r!="object")return!1;try{so.call(r);try{no.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function s1(r){if(!Rs||!r||typeof r!="object")return!1;try{Rs.call(r,Rs);try{Ps.call(r,Ps)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function n1(r){if(!Vu||!r||typeof r!="object")return!1;try{return Vu.call(r),!0}catch{}return!1}function o1(r){if(!no||!r||typeof r!="object")return!1;try{no.call(r);try{so.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function a1(r){if(!Ps||!r||typeof r!="object")return!1;try{Ps.call(r,Ps);try{Rs.call(r,Rs)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function l1(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function $p(r,t){if(r.length>t.maxStringLength){var e=r.length-t.maxStringLength,i="... "+e+" more character"+(e>1?"s":"");return $p(Nh.call(r,0,t.maxStringLength),t)+i}var s=Er.call(Er.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,h1);return Up(s,"single",t)}function h1(r){var t=r.charCodeAt(0),e={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return e?"\\"+e:"\\x"+(t<16?"0":"")+Xb.call(t.toString(16))}function ls(r){return"Object("+r+")"}function ua(r){return r+" { ? }"}function Ju(r,t,e,i){var s=i?ml(e,i):Ue.call(e,", ");return r+" ("+t+") {"+s+"}"}function c1(r){for(var t=0;t<r.length;t++)if(Hp(r[t],`
`)>=0)return!1;return!0}function u1(r,t){var e;if(r.indent==="	")e="	";else if(typeof r.indent=="number"&&r.indent>0)e=Ue.call(Array(r.indent+1)," ");else return null;return{base:e,prev:Ue.call(Array(t+1),e)}}function ml(r,t){if(r.length===0)return"";var e=`
`+t.prev+t.base;return e+Ue.call(r,","+e)+`
`+t.prev}function cn(r,t){var e=pl(r),i=[];if(e){i.length=r.length;for(var s=0;s<r.length;s++)i[s]=xr(r,s)?t(r[s],r):""}var n=typeof ca=="function"?ca(r):[],o;if(Ki){o={};for(var a=0;a<n.length;a++)o["$"+n[a]]=n[a]}for(var l in r)xr(r,l)&&(e&&String(Number(l))===l&&l<r.length||Ki&&o["$"+l]instanceof Symbol||(Lp.call(/[^\w$]/,l)?i.push(t(l,r)+": "+t(r[l],r)):i.push(l+": "+t(r[l],r))));if(typeof ca=="function")for(var h=0;h<n.length;h++)kp.call(r,n[h])&&i.push("["+t(n[h])+"]: "+t(r[n[h]],r));return i}var Lh=ci,rs=Db,d1=jb,f1=Lh("%TypeError%"),un=Lh("%WeakMap%",!0),dn=Lh("%Map%",!0),p1=rs("WeakMap.prototype.get",!0),m1=rs("WeakMap.prototype.set",!0),g1=rs("WeakMap.prototype.has",!0),y1=rs("Map.prototype.get",!0),_1=rs("Map.prototype.set",!0),v1=rs("Map.prototype.has",!0),kh=function(r,t){for(var e=r,i;(i=e.next)!==null;e=i)if(i.key===t)return e.next=i.next,i.next=r.next,r.next=i,i},x1=function(r,t){var e=kh(r,t);return e&&e.value},b1=function(r,t,e){var i=kh(r,t);i?i.value=e:r.next={key:t,next:r.next,value:e}},A1=function(r,t){return!!kh(r,t)},E1=function(){var t,e,i,s={assert:function(n){if(!s.has(n))throw new f1("Side channel does not contain "+d1(n))},get:function(n){if(un&&n&&(typeof n=="object"||typeof n=="function")){if(t)return p1(t,n)}else if(dn){if(e)return y1(e,n)}else if(i)return x1(i,n)},has:function(n){if(un&&n&&(typeof n=="object"||typeof n=="function")){if(t)return g1(t,n)}else if(dn){if(e)return v1(e,n)}else if(i)return A1(i,n);return!1},set:function(n,o){un&&n&&(typeof n=="object"||typeof n=="function")?(t||(t=new un),m1(t,n,o)):dn?(e||(e=new dn),_1(e,n,o)):(i||(i={key:{},next:null}),b1(i,n,o))}};return s},T1=String.prototype.replace,w1=/%20/g,da={RFC1738:"RFC1738",RFC3986:"RFC3986"},Uh={default:da.RFC3986,formatters:{RFC1738:function(r){return T1.call(r,w1,"+")},RFC3986:function(r){return String(r)}},RFC1738:da.RFC1738,RFC3986:da.RFC3986},S1=Uh,fa=Object.prototype.hasOwnProperty,qr=Array.isArray,Be=function(){for(var r=[],t=0;t<256;++t)r.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return r}(),C1=function(t){for(;t.length>1;){var e=t.pop(),i=e.obj[e.prop];if(qr(i)){for(var s=[],n=0;n<i.length;++n)typeof i[n]<"u"&&s.push(i[n]);e.obj[e.prop]=s}}},Wp=function(t,e){for(var i=e&&e.plainObjects?Object.create(null):{},s=0;s<t.length;++s)typeof t[s]<"u"&&(i[s]=t[s]);return i},I1=function r(t,e,i){if(!e)return t;if(typeof e!="object"){if(qr(t))t.push(e);else if(t&&typeof t=="object")(i&&(i.plainObjects||i.allowPrototypes)||!fa.call(Object.prototype,e))&&(t[e]=!0);else return[t,e];return t}if(!t||typeof t!="object")return[t].concat(e);var s=t;return qr(t)&&!qr(e)&&(s=Wp(t,i)),qr(t)&&qr(e)?(e.forEach(function(n,o){if(fa.call(t,o)){var a=t[o];a&&typeof a=="object"&&n&&typeof n=="object"?t[o]=r(a,n,i):t.push(n)}else t[o]=n}),t):Object.keys(e).reduce(function(n,o){var a=e[o];return fa.call(n,o)?n[o]=r(n[o],a,i):n[o]=a,n},s)},R1=function(t,e){return Object.keys(e).reduce(function(i,s){return i[s]=e[s],i},t)},P1=function(r,t,e){var i=r.replace(/\+/g," ");if(e==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},M1=function(t,e,i,s,n){if(t.length===0)return t;var o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),i==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;++l){var h=o.charCodeAt(l);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||n===S1.RFC1738&&(h===40||h===41)){a+=o.charAt(l);continue}if(h<128){a=a+Be[h];continue}if(h<2048){a=a+(Be[192|h>>6]+Be[128|h&63]);continue}if(h<55296||h>=57344){a=a+(Be[224|h>>12]+Be[128|h>>6&63]+Be[128|h&63]);continue}l+=1,h=65536+((h&1023)<<10|o.charCodeAt(l)&1023),a+=Be[240|h>>18]+Be[128|h>>12&63]+Be[128|h>>6&63]+Be[128|h&63]}return a},B1=function(t){for(var e=[{obj:{o:t},prop:"o"}],i=[],s=0;s<e.length;++s)for(var n=e[s],o=n.obj[n.prop],a=Object.keys(o),l=0;l<a.length;++l){var h=a[l],c=o[h];typeof c=="object"&&c!==null&&i.indexOf(c)===-1&&(e.push({obj:o,prop:h}),i.push(c))}return C1(e),t},F1=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},D1=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},O1=function(t,e){return[].concat(t,e)},N1=function(t,e){if(qr(t)){for(var i=[],s=0;s<t.length;s+=1)i.push(e(t[s]));return i}return e(t)},Vp={arrayToObject:Wp,assign:R1,combine:O1,compact:B1,decode:P1,encode:M1,isBuffer:D1,isRegExp:F1,maybeMap:N1,merge:I1},Xp=E1,kn=Vp,Ms=Uh,L1=Object.prototype.hasOwnProperty,td={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},rr=Array.isArray,k1=Array.prototype.push,zp=function(r,t){k1.apply(r,rr(t)?t:[t])},U1=Date.prototype.toISOString,ed=Ms.default,Qt={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:kn.encode,encodeValuesOnly:!1,format:ed,formatter:Ms.formatters[ed],indices:!1,serializeDate:function(t){return U1.call(t)},skipNulls:!1,strictNullHandling:!1},G1=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},pa={},H1=function r(t,e,i,s,n,o,a,l,h,c,u,d,f,p,m,g){for(var y=t,A=g,_=0,b=!1;(A=A.get(pa))!==void 0&&!b;){var C=A.get(t);if(_+=1,typeof C<"u"){if(C===_)throw new RangeError("Cyclic object value");b=!0}typeof A.get(pa)>"u"&&(_=0)}if(typeof l=="function"?y=l(e,y):y instanceof Date?y=u(y):i==="comma"&&rr(y)&&(y=kn.maybeMap(y,function(Q){return Q instanceof Date?u(Q):Q})),y===null){if(n)return a&&!p?a(e,Qt.encoder,m,"key",d):e;y=""}if(G1(y)||kn.isBuffer(y)){if(a){var N=p?e:a(e,Qt.encoder,m,"key",d);return[f(N)+"="+f(a(y,Qt.encoder,m,"value",d))]}return[f(e)+"="+f(String(y))]}var P=[];if(typeof y>"u")return P;var I;if(i==="comma"&&rr(y))p&&a&&(y=kn.maybeMap(y,a)),I=[{value:y.length>0?y.join(",")||null:void 0}];else if(rr(l))I=l;else{var W=Object.keys(y);I=h?W.sort(h):W}for(var Z=s&&rr(y)&&y.length===1?e+"[]":e,ct=0;ct<I.length;++ct){var H=I[ct],T=typeof H=="object"&&typeof H.value<"u"?H.value:y[H];if(!(o&&T===null)){var F=rr(y)?typeof i=="function"?i(Z,H):Z:Z+(c?"."+H:"["+H+"]");g.set(t,_);var J=Xp();J.set(pa,g),zp(P,r(T,F,i,s,n,o,i==="comma"&&p&&rr(y)?null:a,l,h,c,u,d,f,p,m,J))}}return P},$1=function(t){if(!t)return Qt;if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var e=t.charset||Qt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=Ms.default;if(typeof t.format<"u"){if(!L1.call(Ms.formatters,t.format))throw new TypeError("Unknown format option provided.");i=t.format}var s=Ms.formatters[i],n=Qt.filter;return(typeof t.filter=="function"||rr(t.filter))&&(n=t.filter),{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Qt.addQueryPrefix,allowDots:typeof t.allowDots>"u"?Qt.allowDots:!!t.allowDots,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Qt.charsetSentinel,delimiter:typeof t.delimiter>"u"?Qt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Qt.encode,encoder:typeof t.encoder=="function"?t.encoder:Qt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Qt.encodeValuesOnly,filter:n,format:i,formatter:s,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Qt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Qt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Qt.strictNullHandling}},W1=function(r,t){var e=r,i=$1(t),s,n;typeof i.filter=="function"?(n=i.filter,e=n("",e)):rr(i.filter)&&(n=i.filter,s=n);var o=[];if(typeof e!="object"||e===null)return"";var a;t&&t.arrayFormat in td?a=t.arrayFormat:t&&"indices"in t?a=t.indices?"indices":"repeat":a="indices";var l=td[a];if(t&&"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var h=l==="comma"&&t&&t.commaRoundTrip;s||(s=Object.keys(e)),i.sort&&s.sort(i.sort);for(var c=Xp(),u=0;u<s.length;++u){var d=s[u];i.skipNulls&&e[d]===null||zp(o,H1(e[d],d,l,h,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,c))}var f=o.join(i.delimiter),p=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),f.length>0?p+f:""},Zi=Vp,gl=Object.prototype.hasOwnProperty,V1=Array.isArray,Vt={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Zi.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},X1=function(r){return r.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},jp=function(r,t){return r&&typeof r=="string"&&t.comma&&r.indexOf(",")>-1?r.split(","):r},z1="utf8=%26%2310003%3B",j1="utf8=%E2%9C%93",Y1=function(t,e){var i={__proto__:null},s=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,n=e.parameterLimit===1/0?void 0:e.parameterLimit,o=s.split(e.delimiter,n),a=-1,l,h=e.charset;if(e.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===j1?h="utf-8":o[l]===z1&&(h="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var c=o[l],u=c.indexOf("]="),d=u===-1?c.indexOf("="):u+1,f,p;d===-1?(f=e.decoder(c,Vt.decoder,h,"key"),p=e.strictNullHandling?null:""):(f=e.decoder(c.slice(0,d),Vt.decoder,h,"key"),p=Zi.maybeMap(jp(c.slice(d+1),e),function(m){return e.decoder(m,Vt.decoder,h,"value")})),p&&e.interpretNumericEntities&&h==="iso-8859-1"&&(p=X1(p)),c.indexOf("[]=")>-1&&(p=V1(p)?[p]:p),gl.call(i,f)?i[f]=Zi.combine(i[f],p):i[f]=p}return i},q1=function(r,t,e,i){for(var s=i?t:jp(t,e),n=r.length-1;n>=0;--n){var o,a=r[n];if(a==="[]"&&e.parseArrays)o=[].concat(s);else{o=e.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,h=parseInt(l,10);!e.parseArrays&&l===""?o={0:s}:!isNaN(h)&&a!==l&&String(h)===l&&h>=0&&e.parseArrays&&h<=e.arrayLimit?(o=[],o[h]=s):l!=="__proto__"&&(o[l]=s)}s=o}return s},K1=function(t,e,i,s){if(t){var n=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=i.depth>0&&o.exec(n),h=l?n.slice(0,l.index):n,c=[];if(h){if(!i.plainObjects&&gl.call(Object.prototype,h)&&!i.allowPrototypes)return;c.push(h)}for(var u=0;i.depth>0&&(l=a.exec(n))!==null&&u<i.depth;){if(u+=1,!i.plainObjects&&gl.call(Object.prototype,l[1].slice(1,-1))&&!i.allowPrototypes)return;c.push(l[1])}return l&&c.push("["+n.slice(l.index)+"]"),q1(c,e,i,s)}},Z1=function(t){if(!t)return Vt;if(t.decoder!==null&&t.decoder!==void 0&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=typeof t.charset>"u"?Vt.charset:t.charset;return{allowDots:typeof t.allowDots>"u"?Vt.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:Vt.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:Vt.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:Vt.arrayLimit,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Vt.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:Vt.comma,decoder:typeof t.decoder=="function"?t.decoder:Vt.decoder,delimiter:typeof t.delimiter=="string"||Zi.isRegExp(t.delimiter)?t.delimiter:Vt.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:Vt.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:Vt.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:Vt.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:Vt.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Vt.strictNullHandling}},Q1=function(r,t){var e=Z1(t);if(r===""||r===null||typeof r>"u")return e.plainObjects?Object.create(null):{};for(var i=typeof r=="string"?Y1(r,e):r,s=e.plainObjects?Object.create(null):{},n=Object.keys(i),o=0;o<n.length;++o){var a=n[o],l=K1(a,i[a],e,typeof r=="string");s=Zi.merge(s,l,e)}return e.allowSparse===!0?s:Zi.compact(s)},J1=W1,tA=Q1,eA=Uh,rA={formats:eA,parse:tA,stringify:J1},iA=Yx;function hr(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var sA=/^([a-z0-9.+-]+:)/i,nA=/:[0-9]*$/,oA=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,aA=["<",">",'"',"`"," ","\r",`
`,"	"],lA=["{","}","|","\\","^","`"].concat(aA),yl=["'"].concat(lA),rd=["%","/","?",";","#"].concat(yl),id=["/","?","#"],hA=255,sd=/^[+a-z0-9A-Z_-]{0,63}$/,cA=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,uA={javascript:!0,"javascript:":!0},_l={javascript:!0,"javascript:":!0},Gi={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},vl=rA;function dA(r,t,e){if(r&&typeof r=="object"&&r instanceof hr)return r;var i=new hr;return i.parse(r,t,e),i}hr.prototype.parse=function(r,t,e){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var i=r.indexOf("?"),s=i!==-1&&i<r.indexOf("#")?"?":"#",n=r.split(s),o=/\\/g;n[0]=n[0].replace(o,"/"),r=n.join(s);var a=r;if(a=a.trim(),!e&&r.split("#").length===1){var l=oA.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=vl.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=sA.exec(a);if(h){h=h[0];var c=h.toLowerCase();this.protocol=c,a=a.substr(h.length)}if(e||h||a.match(/^\/\/[^@/]+@[^@/]+/)){var u=a.substr(0,2)==="//";u&&!(h&&_l[h])&&(a=a.substr(2),this.slashes=!0)}if(!_l[h]&&(u||h&&!Gi[h])){for(var d=-1,f=0;f<id.length;f++){var p=a.indexOf(id[f]);p!==-1&&(d===-1||p<d)&&(d=p)}var m,g;d===-1?g=a.lastIndexOf("@"):g=a.lastIndexOf("@",d),g!==-1&&(m=a.slice(0,g),a=a.slice(g+1),this.auth=decodeURIComponent(m)),d=-1;for(var f=0;f<rd.length;f++){var p=a.indexOf(rd[f]);p!==-1&&(d===-1||p<d)&&(d=p)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var A=this.hostname.split(/\./),f=0,_=A.length;f<_;f++){var b=A[f];if(b&&!b.match(sd)){for(var C="",N=0,P=b.length;N<P;N++)b.charCodeAt(N)>127?C+="x":C+=b[N];if(!C.match(sd)){var I=A.slice(0,f),W=A.slice(f+1),Z=b.match(cA);Z&&(I.push(Z[1]),W.unshift(Z[2])),W.length&&(a="/"+W.join(".")+a),this.hostname=I.join(".");break}}}this.hostname.length>hA?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=iA.toASCII(this.hostname));var ct=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+ct,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!uA[c])for(var f=0,_=yl.length;f<_;f++){var T=yl[f];if(a.indexOf(T)!==-1){var F=encodeURIComponent(T);F===T&&(F=escape(T)),a=a.split(T).join(F)}}var J=a.indexOf("#");J!==-1&&(this.hash=a.substr(J),a=a.slice(0,J));var Q=a.indexOf("?");if(Q!==-1?(this.search=a.substr(Q),this.query=a.substr(Q+1),t&&(this.query=vl.parse(this.query)),a=a.slice(0,Q)):t&&(this.search="",this.query={}),a&&(this.pathname=a),Gi[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var ct=this.pathname||"",$=this.search||"";this.path=ct+$}return this.href=this.format(),this};hr.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var t=this.protocol||"",e=this.pathname||"",i=this.hash||"",s=!1,n="";this.host?s=r+this.host:this.hostname&&(s=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(n=vl.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||n&&"?"+n||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Gi[t])&&s!==!1?(s="//"+(s||""),e&&e.charAt(0)!=="/"&&(e="/"+e)):s||(s=""),i&&i.charAt(0)!=="#"&&(i="#"+i),o&&o.charAt(0)!=="?"&&(o="?"+o),e=e.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),t+s+e+o+i};hr.prototype.resolve=function(r){return this.resolveObject(dA(r,!1,!0)).format()};hr.prototype.resolveObject=function(r){if(typeof r=="string"){var t=new hr;t.parse(r,!1,!0),r=t}for(var e=new hr,i=Object.keys(this),s=0;s<i.length;s++){var n=i[s];e[n]=this[n]}if(e.hash=r.hash,r.href==="")return e.href=e.format(),e;if(r.slashes&&!r.protocol){for(var o=Object.keys(r),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(e[l]=r[l])}return Gi[e.protocol]&&e.hostname&&!e.pathname&&(e.pathname="/",e.path=e.pathname),e.href=e.format(),e}if(r.protocol&&r.protocol!==e.protocol){if(!Gi[r.protocol]){for(var h=Object.keys(r),c=0;c<h.length;c++){var u=h[c];e[u]=r[u]}return e.href=e.format(),e}if(e.protocol=r.protocol,!r.host&&!_l[r.protocol]){for(var _=(r.pathname||"").split("/");_.length&&!(r.host=_.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),_[0]!==""&&_.unshift(""),_.length<2&&_.unshift(""),e.pathname=_.join("/")}else e.pathname=r.pathname;if(e.search=r.search,e.query=r.query,e.host=r.host||"",e.auth=r.auth,e.hostname=r.hostname||r.host,e.port=r.port,e.pathname||e.search){var d=e.pathname||"",f=e.search||"";e.path=d+f}return e.slashes=e.slashes||r.slashes,e.href=e.format(),e}var p=e.pathname&&e.pathname.charAt(0)==="/",m=r.host||r.pathname&&r.pathname.charAt(0)==="/",g=m||p||e.host&&r.pathname,y=g,A=e.pathname&&e.pathname.split("/")||[],_=r.pathname&&r.pathname.split("/")||[],b=e.protocol&&!Gi[e.protocol];if(b&&(e.hostname="",e.port=null,e.host&&(A[0]===""?A[0]=e.host:A.unshift(e.host)),e.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(_[0]===""?_[0]=r.host:_.unshift(r.host)),r.host=null),g=g&&(_[0]===""||A[0]==="")),m)e.host=r.host||r.host===""?r.host:e.host,e.hostname=r.hostname||r.hostname===""?r.hostname:e.hostname,e.search=r.search,e.query=r.query,A=_;else if(_.length)A||(A=[]),A.pop(),A=A.concat(_),e.search=r.search,e.query=r.query;else if(r.search!=null){if(b){e.host=A.shift(),e.hostname=e.host;var C=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;C&&(e.auth=C.shift(),e.hostname=C.shift(),e.host=e.hostname)}return e.search=r.search,e.query=r.query,(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!A.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var N=A.slice(-1)[0],P=(e.host||r.host||A.length>1)&&(N==="."||N==="..")||N==="",I=0,W=A.length;W>=0;W--)N=A[W],N==="."?A.splice(W,1):N===".."?(A.splice(W,1),I++):I&&(A.splice(W,1),I--);if(!g&&!y)for(;I--;I)A.unshift("..");g&&A[0]!==""&&(!A[0]||A[0].charAt(0)!=="/")&&A.unshift(""),P&&A.join("/").substr(-1)!=="/"&&A.push("");var Z=A[0]===""||A[0]&&A[0].charAt(0)==="/";if(b){e.hostname=Z?"":A.length?A.shift():"",e.host=e.hostname;var C=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;C&&(e.auth=C.shift(),e.hostname=C.shift(),e.host=e.hostname)}return g=g||e.host&&A.length,g&&!Z&&A.unshift(""),A.length>0?e.pathname=A.join("/"):(e.pathname=null,e.path=null),(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=r.auth||e.auth,e.slashes=e.slashes||r.slashes,e.href=e.format(),e};hr.prototype.parseHost=function(){var r=this.host,t=nA.exec(r);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),r=r.substr(0,r.length-t.length)),r&&(this.hostname=r)};const nd={};function yt(r,t,e=3){if(nd[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${r}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`),console.warn(i))),nd[t]=!0}function ge(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function hs(r){return r.split("?")[0].split("#")[0]}function fA(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function pA(r,t,e){return r.replace(new RegExp(fA(t),"g"),e)}function mA(r,t){let e="",i=0,s=-1,n=0,o=-1;for(let a=0;a<=r.length;++a){if(a<r.length)o=r.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(s===a-1||n===1))if(s!==a-1&&n===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const l=e.lastIndexOf("/");if(l!==e.length-1){l===-1?(e="",i=0):(e=e.slice(0,l),i=e.length-1-e.lastIndexOf("/")),s=a,n=0;continue}}else if(e.length===2||e.length===1){e="",i=0,s=a,n=0;continue}}t&&(e.length>0?e+="/..":e="..",i=2)}else e.length>0?e+=`/${r.slice(s+1,a)}`:e=r.slice(s+1,a),i=a-s-1;s=a,n=0}else o===46&&n!==-1?++n:n=-1}return e}const Wt={toPosix(r){return pA(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){ge(r),r=this.toPosix(r);const t=/^file:\/\/\//.exec(r);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(r);return e?e[0]:""},toAbsolute(r,t,e){if(ge(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const i=hs(this.toPosix(t??K.ADAPTER.getBaseUrl())),s=hs(this.toPosix(e??this.rootname(i)));return r=this.toPosix(r),r.startsWith("/")?Wt.join(s,r.slice(1)):this.isAbsolute(r)?r:this.join(i,r)},normalize(r){if(ge(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let t="";const e=r.startsWith("/");this.hasProtocol(r)&&(t=this.rootname(r),r=r.slice(t.length));const i=r.endsWith("/");return r=mA(r,!1),r.length>0&&i&&(r+="/"),e?`/${r}`:t+r},isAbsolute(r){return ge(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let t;for(let e=0;e<r.length;++e){const i=r[e];if(ge(i),i.length>0)if(t===void 0)t=i;else{const s=r[e-1]??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(r){if(ge(r),r.length===0)return".";r=this.toPosix(r);let t=r.charCodeAt(0);const e=t===47;let i=-1,s=!0;const n=this.getProtocol(r),o=r;r=r.slice(n.length);for(let a=r.length-1;a>=1;--a)if(t=r.charCodeAt(a),t===47){if(!s){i=a;break}}else s=!1;return i===-1?e?"/":this.isUrl(o)?n+r:n:e&&i===1?"//":n+r.slice(0,i)},rootname(r){ge(r),r=this.toPosix(r);let t="";if(r.startsWith("/")?t="/":t=this.getProtocol(r),this.isUrl(r)){const e=r.indexOf("/",t.length);e!==-1?t=r.slice(0,e):t=r,t.endsWith("/")||(t+="/")}return t},basename(r,t){ge(r),t&&ge(t),r=hs(this.toPosix(r));let e=0,i=-1,s=!0,n;if(t!==void 0&&t.length>0&&t.length<=r.length){if(t.length===r.length&&t===r)return"";let o=t.length-1,a=-1;for(n=r.length-1;n>=0;--n){const l=r.charCodeAt(n);if(l===47){if(!s){e=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(l===t.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return e===i?i=a:i===-1&&(i=r.length),r.slice(e,i)}for(n=r.length-1;n>=0;--n)if(r.charCodeAt(n)===47){if(!s){e=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":r.slice(e,i)},extname(r){ge(r),r=hs(this.toPosix(r));let t=-1,e=0,i=-1,s=!0,n=0;for(let o=r.length-1;o>=0;--o){const a=r.charCodeAt(o);if(a===47){if(!s){e=o+1;break}continue}i===-1&&(s=!1,i=o+1),a===46?t===-1?t=o:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||i===-1||n===0||n===1&&t===i-1&&t===e+1?"":r.slice(t,i)},parse(r){ge(r);const t={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return t;r=hs(this.toPosix(r));let e=r.charCodeAt(0);const i=this.isAbsolute(r);let s;t.root=this.rootname(r),i||this.hasProtocol(r)?s=1:s=0;let n=-1,o=0,a=-1,l=!0,h=r.length-1,c=0;for(;h>=s;--h){if(e=r.charCodeAt(h),e===47){if(!l){o=h+1;break}continue}a===-1&&(l=!1,a=h+1),e===46?n===-1?n=h:c!==1&&(c=1):n!==-1&&(c=-1)}return n===-1||a===-1||c===0||c===1&&n===a-1&&n===o+1?a!==-1&&(o===0&&i?t.base=t.name=r.slice(1,a):t.base=t.name=r.slice(o,a)):(o===0&&i?(t.name=r.slice(1,n),t.base=r.slice(1,a)):(t.name=r.slice(o,n),t.base=r.slice(o,a)),t.ext=r.slice(n,a)),t.dir=this.dirname(r),t},sep:"/",delimiter:":",joinExtensions:[".html"]};let ma;async function gA(){return ma??(ma=(async()=>{var n;const r=document.createElement("canvas").getContext("webgl");if(!r)return se.UNPACK;const t=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!t)return se.UNPACK;const e=r.createTexture();r.bindTexture(r.TEXTURE_2D,e);const i=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,i),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t);const s=new Uint8Array(4);return r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,s),r.deleteFramebuffer(i),r.deleteTexture(e),(n=r.getExtension("WEBGL_lose_context"))==null||n.loseContext(),s[0]<=s[3]?se.PMA:se.UNPACK})()),ma}let ga;function yA(){return typeof ga>"u"&&(ga=function(){var t;const r={stencil:!0,failIfMajorPerformanceCaveat:K.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!K.ADAPTER.getWebGLRenderingContext())return!1;const e=K.ADAPTER.createCanvas();let i=e.getContext("webgl",r)||e.getContext("experimental-webgl",r);const s=!!((t=i==null?void 0:i.getContextAttributes())!=null&&t.stencil);if(i){const n=i.getExtension("WEBGL_lose_context");n&&n.loseContext()}return i=null,s}catch{return!1}}()),ga}var _A={grad:.9,turn:360,rad:360/(2*Math.PI)},Qe=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},zt=function(r,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*r)/e+0},pe=function(r,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),r>e?e:r>t?r:t},Yp=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},od=function(r){return{r:pe(r.r,0,255),g:pe(r.g,0,255),b:pe(r.b,0,255),a:pe(r.a)}},ya=function(r){return{r:zt(r.r),g:zt(r.g),b:zt(r.b),a:zt(r.a,3)}},vA=/^#([0-9a-f]{3,8})$/i,fn=function(r){var t=r.toString(16);return t.length<2?"0"+t:t},qp=function(r){var t=r.r,e=r.g,i=r.b,s=r.a,n=Math.max(t,e,i),o=n-Math.min(t,e,i),a=o?n===t?(e-i)/o:n===e?2+(i-t)/o:4+(t-e)/o:0;return{h:60*(a<0?a+6:a),s:n?o/n*100:0,v:n/255*100,a:s}},Kp=function(r){var t=r.h,e=r.s,i=r.v,s=r.a;t=t/360*6,e/=100,i/=100;var n=Math.floor(t),o=i*(1-e),a=i*(1-(t-n)*e),l=i*(1-(1-t+n)*e),h=n%6;return{r:255*[i,a,o,o,l,i][h],g:255*[l,i,i,a,o,o][h],b:255*[o,o,l,i,i,a][h],a:s}},ad=function(r){return{h:Yp(r.h),s:pe(r.s,0,100),l:pe(r.l,0,100),a:pe(r.a)}},ld=function(r){return{h:zt(r.h),s:zt(r.s),l:zt(r.l),a:zt(r.a,3)}},hd=function(r){return Kp((e=(t=r).s,{h:t.h,s:(e*=((i=t.l)<50?i:100-i)/100)>0?2*e/(i+e)*100:0,v:i+e,a:t.a}));var t,e,i},Bs=function(r){return{h:(t=qp(r)).h,s:(s=(200-(e=t.s))*(i=t.v)/100)>0&&s<200?e*i/100/(s<=100?s:200-s)*100:0,l:s/2,a:t.a};var t,e,i,s},xA=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,bA=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,AA=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,EA=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,xl={string:[[function(r){var t=vA.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?zt(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?zt(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var t=AA.exec(r)||EA.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:od({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(r){var t=xA.exec(r)||bA.exec(r);if(!t)return null;var e,i,s=ad({h:(e=t[1],i=t[2],i===void 0&&(i="deg"),Number(e)*(_A[i]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return hd(s)},"hsl"]],object:[[function(r){var t=r.r,e=r.g,i=r.b,s=r.a,n=s===void 0?1:s;return Qe(t)&&Qe(e)&&Qe(i)?od({r:Number(t),g:Number(e),b:Number(i),a:Number(n)}):null},"rgb"],[function(r){var t=r.h,e=r.s,i=r.l,s=r.a,n=s===void 0?1:s;if(!Qe(t)||!Qe(e)||!Qe(i))return null;var o=ad({h:Number(t),s:Number(e),l:Number(i),a:Number(n)});return hd(o)},"hsl"],[function(r){var t=r.h,e=r.s,i=r.v,s=r.a,n=s===void 0?1:s;if(!Qe(t)||!Qe(e)||!Qe(i))return null;var o=function(a){return{h:Yp(a.h),s:pe(a.s,0,100),v:pe(a.v,0,100),a:pe(a.a)}}({h:Number(t),s:Number(e),v:Number(i),a:Number(n)});return Kp(o)},"hsv"]]},cd=function(r,t){for(var e=0;e<t.length;e++){var i=t[e][0](r);if(i)return[i,t[e][1]]}return[null,void 0]},TA=function(r){return typeof r=="string"?cd(r.trim(),xl.string):typeof r=="object"&&r!==null?cd(r,xl.object):[null,void 0]},_a=function(r,t){var e=Bs(r);return{h:e.h,s:pe(e.s+100*t,0,100),l:e.l,a:e.a}},va=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},ud=function(r,t){var e=Bs(r);return{h:e.h,s:e.s,l:pe(e.l+100*t,0,100),a:e.a}},bl=function(){function r(t){this.parsed=TA(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return zt(va(this.rgba),2)},r.prototype.isDark=function(){return va(this.rgba)<.5},r.prototype.isLight=function(){return va(this.rgba)>=.5},r.prototype.toHex=function(){return t=ya(this.rgba),e=t.r,i=t.g,s=t.b,o=(n=t.a)<1?fn(zt(255*n)):"","#"+fn(e)+fn(i)+fn(s)+o;var t,e,i,s,n,o},r.prototype.toRgb=function(){return ya(this.rgba)},r.prototype.toRgbString=function(){return t=ya(this.rgba),e=t.r,i=t.g,s=t.b,(n=t.a)<1?"rgba("+e+", "+i+", "+s+", "+n+")":"rgb("+e+", "+i+", "+s+")";var t,e,i,s,n},r.prototype.toHsl=function(){return ld(Bs(this.rgba))},r.prototype.toHslString=function(){return t=ld(Bs(this.rgba)),e=t.h,i=t.s,s=t.l,(n=t.a)<1?"hsla("+e+", "+i+"%, "+s+"%, "+n+")":"hsl("+e+", "+i+"%, "+s+"%)";var t,e,i,s,n},r.prototype.toHsv=function(){return t=qp(this.rgba),{h:zt(t.h),s:zt(t.s),v:zt(t.v),a:zt(t.a,3)};var t},r.prototype.invert=function(){return Fe({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},r.prototype.saturate=function(t){return t===void 0&&(t=.1),Fe(_a(this.rgba,t))},r.prototype.desaturate=function(t){return t===void 0&&(t=.1),Fe(_a(this.rgba,-t))},r.prototype.grayscale=function(){return Fe(_a(this.rgba,-1))},r.prototype.lighten=function(t){return t===void 0&&(t=.1),Fe(ud(this.rgba,t))},r.prototype.darken=function(t){return t===void 0&&(t=.1),Fe(ud(this.rgba,-t))},r.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},r.prototype.alpha=function(t){return typeof t=="number"?Fe({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):zt(this.rgba.a,3);var e},r.prototype.hue=function(t){var e=Bs(this.rgba);return typeof t=="number"?Fe({h:t,s:e.s,l:e.l,a:e.a}):zt(e.h)},r.prototype.isEqual=function(t){return this.toHex()===Fe(t).toHex()},r}(),Fe=function(r){return r instanceof bl?r:new bl(r)},dd=[],wA=function(r){r.forEach(function(t){dd.indexOf(t)<0&&(t(bl,xl),dd.push(t))})};function SA(r,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var s in e)i[e[s]]=s;var n={};r.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,h=i[this.toHex()];if(h)return h;if(o!=null&&o.closest){var c=this.toRgb(),u=1/0,d="black";if(!n.length)for(var f in e)n[f]=new r(e[f]).toRgb();for(var p in e){var m=(a=c,l=n[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));m<u&&(u=m,d=p)}return d}},t.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":e[a];return l?new r(l).toRgb():null},"name"])}wA([SA]);const Ti=class Un{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof Un)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}isSourceEqual(t,e){const i=typeof t;if(i!==typeof e)return!1;if(i==="number"||i==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((s,n)=>s===e[n]);if(t!==null&&e!==null){const s=Object.keys(t),n=Object.keys(e);return s.length!==n.length?!1:s.every(o=>t[o]===e[o])}return t===e}toRgba(){const[t,e,i,s]=this._components;return{r:t,g:e,b:i,a:s}}toRgb(){const[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){const[t,e,i]=this.toUint8RgbArray();return`rgba(${t},${e},${i},${this.alpha})`}toUint8RgbArray(t){const[e,i,s]=this._components;return t=t??[],t[0]=Math.round(e*255),t[1]=Math.round(i*255),t[2]=Math.round(s*255),t}toRgbArray(t){t=t??[];const[e,i,s]=this._components;return t[0]=e,t[1]=i,t[2]=s,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,i,s,n]=Un.temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=i,this._components[2]*=s,this._components[3]*=n,this.refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let i=this._int>>16&255,s=this._int>>8&255,n=this._int&255;return e&&(i=i*t+.5|0,s=s*t+.5|0,n=n*t+.5|0),(t*255<<24)+(i<<16)+(s<<8)+n}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[e,i,s]=this._components;return this._components[0]=Math.round(e*t)/t,this._components[1]=Math.round(i*t)/t,this._components[2]=Math.round(s*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[e,i,s,n]=this._components;return t[0]=e,t[1]=i,t[2]=s,t[3]=n,t}normalize(t){let e,i,s,n;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const o=t;e=(o>>16&255)/255,i=(o>>8&255)/255,s=(o&255)/255,n=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,i,s,n=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,i,s,n=255]=t,e/=255,i/=255,s/=255,n/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const a=Un.HEX_PATTERN.exec(t);a&&(t=`#${a[2]}`)}const o=Fe(t);o.isValid()&&({r:e,g:i,b:s,a:n}=o.rgba,e/=255,i/=255,s/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=i,this._components[2]=s,this._components[3]=n,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);const[t,e,i]=this._components;this._int=(t*255<<16)+(e*255<<8)+(i*255|0)}_clamp(t,e=0,i=1){return typeof t=="number"?Math.min(Math.max(t,e),i):(t.forEach((s,n)=>{t[n]=Math.min(Math.max(s,e),i)}),t)}};Ti.shared=new Ti,Ti.temp=new Ti,Ti.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Rt=Ti;function CA(r){return yt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Rt.shared.setValue(r).toHex()}function IA(r){return yt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Rt.shared.setValue(r).toNumber()}function RA(){const r=[],t=[];for(let i=0;i<32;i++)r[i]=i,t[i]=i;r[lt.NORMAL_NPM]=lt.NORMAL,r[lt.ADD_NPM]=lt.ADD,r[lt.SCREEN_NPM]=lt.SCREEN,t[lt.NORMAL]=lt.NORMAL_NPM,t[lt.ADD]=lt.ADD_NPM,t[lt.SCREEN]=lt.SCREEN_NPM;const e=[];return e.push(t),e.push(r),e}const Zp=RA();function Qp(r,t){return Zp[t?1:0][r]}function PA(r,t=null){const e=r*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${e}`);for(let i=0,s=0;i<e;i+=6,s+=4)t[i+0]=s+0,t[i+1]=s+1,t[i+2]=s+2,t[i+3]=s+0,t[i+4]=s+2,t[i+5]=s+3;return t}function Jp(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}function oo(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function fd(r){return!(r&r-1)&&!!r}function pd(r){let t=(r>65535?1:0)<<4;r>>>=t;let e=(r>255?1:0)<<3;return r>>>=e,t|=e,e=(r>15?1:0)<<2,r>>>=e,t|=e,e=(r>3?1:0)<<1,r>>>=e,t|=e,t|r>>1}function Hi(r,t,e){const i=r.length;let s;if(t>=i||e===0)return;e=t+e>i?i-t:e;const n=i-e;for(s=t;s<n;++s)r[s]=r[s+e];r.length=n}function Tr(r){return r===0?0:r<0?-1:1}let MA=0;function oi(){return++MA}const Al=class{constructor(r,t,e,i){this.left=r,this.top=t,this.right=e,this.bottom=i}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};Al.EMPTY=new Al(0,0,0,0);let md=Al;const gd={},De=Object.create(null),mr=Object.create(null);class BA{constructor(t,e,i){this._canvas=K.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=i||K.RESOLUTION,this.resize(t,e)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,e){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(e*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function yd(r,t,e){for(let i=0,s=4*e*t;i<t;++i,s+=4)if(r[s+3]!==0)return!1;return!0}function _d(r,t,e,i,s){const n=4*t;for(let o=i,a=i*n+4*e;o<=s;++o,a+=n)if(r[a+3]!==0)return!1;return!0}function FA(r){const{width:t,height:e}=r,i=r.getContext("2d",{willReadFrequently:!0});if(i===null)throw new TypeError("Failed to get canvas 2D context");const s=i.getImageData(0,0,t,e).data;let n=0,o=0,a=t-1,l=e-1;for(;o<e&&yd(s,t,o);)++o;if(o===e)return md.EMPTY;for(;yd(s,t,l);)--l;for(;_d(s,t,n,o,l);)++n;for(;_d(s,t,a,o,l);)--a;return++a,++l,new md(n,o,a,l)}function DA(r){const t=FA(r),{width:e,height:i}=t;let s=null;if(!t.isEmpty()){const n=r.getContext("2d");if(n===null)throw new TypeError("Failed to get canvas 2D context");s=n.getImageData(t.left,t.top,e,i)}return{width:e,height:i,data:s}}function OA(r,t=globalThis.location){if(r.startsWith("data:"))return"";t=t||globalThis.location;const e=new URL(r,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}function cr(r,t=1){var i;const e=(i=K.RETINA_PREFIX)==null?void 0:i.exec(r);return e?parseFloat(e[1]):t}var z=(r=>(r.Renderer="renderer",r.Application="application",r.RendererSystem="renderer-webgl-system",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererSystem="renderer-canvas-system",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r))(z||{});const El=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},vd=(r,t)=>El(r).priority??t,tt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(El).forEach(t=>{t.type.forEach(e=>{var i,s;return(s=(i=this._removeHandlers)[e])==null?void 0:s.call(i,t)})}),this},add(...r){return r.map(El).forEach(t=>{t.type.forEach(e=>{const i=this._addHandlers,s=this._queue;i[e]?i[e](t):(s[e]=s[e]||[],s[e].push(t))})}),this},handle(r,t,e){const i=this._addHandlers,s=this._removeHandlers;if(i[r]||s[r])throw new Error(`Extension type ${r} already has a handler`);i[r]=t,s[r]=e;const n=this._queue;return n[r]&&(n[r].forEach(o=>t(o)),delete n[r]),this},handleByMap(r,t){return this.handle(r,e=>{t[e.name]=e.ref},e=>{delete t[e.name]})},handleByList(r,t,e=-1){return this.handle(r,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((s,n)=>vd(n,e)-vd(s,e)))},i=>{const s=t.indexOf(i.ref);s!==-1&&t.splice(s,1)})}};class Tl{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const NA=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function LA(r){let t="";for(let e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+=`if(test == ${e}.0){}`);return t}function kA(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);for(;;){const i=NA.replace(/%forloop%/gi,LA(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}const xa=0,ba=1,Aa=2,Ea=3,Ta=4,wa=5;class qe{constructor(){this.data=0,this.blendMode=lt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<xa)}set blend(t){!!(this.data&1<<xa)!==t&&(this.data^=1<<xa)}get offsets(){return!!(this.data&1<<ba)}set offsets(t){!!(this.data&1<<ba)!==t&&(this.data^=1<<ba)}get culling(){return!!(this.data&1<<Aa)}set culling(t){!!(this.data&1<<Aa)!==t&&(this.data^=1<<Aa)}get depthTest(){return!!(this.data&1<<Ea)}set depthTest(t){!!(this.data&1<<Ea)!==t&&(this.data^=1<<Ea)}get depthMask(){return!!(this.data&1<<wa)}set depthMask(t){!!(this.data&1<<wa)!==t&&(this.data^=1<<wa)}get clockwiseFrontFace(){return!!(this.data&1<<Ta)}set clockwiseFrontFace(t){!!(this.data&1<<Ta)!==t&&(this.data^=1<<Ta)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==lt.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}static for2d(){const t=new qe;return t.depthTest=!1,t.blend=!0,t}}qe.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const wl=[];function tm(r,t){if(!r)return null;let e="";if(typeof r=="string"){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(let i=wl.length-1;i>=0;--i){const s=wl[i];if(s.test&&s.test(r,e))return new s(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class we{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,i,s,n,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:h,items:c}=this;this._aliasCount++;for(let u=0,d=c.length;u<d;u++)c[u][h](t,e,i,s,n,o,a,l);return c===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(we.prototype,{dispatch:{value:we.prototype.emit},run:{value:we.prototype.emit}});class Xs{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new we("setRealSize"),this.onUpdate=new we("update"),this.onError=new we("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}}class ko extends Xs{constructor(t,e){const{width:i,height:s}=e||{};if(!i||!s)throw new Error("BufferResource width or height invalid");super(i,s),this.data=t,this.unpackAlignment=e.unpackAlignment??4}upload(t,e,i){const s=t.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,this.unpackAlignment),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===se.UNPACK);const n=e.realWidth,o=e.realHeight;return i.width===n&&i.height===o?s.texSubImage2D(e.target,0,0,0,n,o,e.format,i.type,this.data):(i.width=n,i.height=o,s.texImage2D(e.target,0,i.internalFormat,n,o,0,e.format,i.type,this.data)),!0}dispose(){this.data=null}static test(t){return t===null||t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}const UA={scaleMode:sr.NEAREST,alphaMode:se.NPM},Sl=class wi extends js{constructor(t=null,e=null){super(),e=Object.assign({},wi.defaultOptions,e);const{alphaMode:i,mipmap:s,anisotropicLevel:n,scaleMode:o,width:a,height:l,wrapMode:h,format:c,type:u,target:d,resolution:f,resourceOptions:p}=e;t&&!(t instanceof Xs)&&(t=tm(t,p),t.internal=!0),this.resolution=f||K.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=s,this.anisotropicLevel=n,this._wrapMode=h,this._scaleMode=o,this.format=c,this.type=u,this.target=d,this.alphaMode=i,this.uid=oi(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let i;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this}setSize(t,e,i){return i=i||this.resolution,this.setRealSize(t*i,e*i,i)}setRealSize(t,e,i){return this.resolution=i||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=fd(this.realWidth)&&fd(this.realHeight)}setResolution(t){const e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete mr[this.cacheId],delete De[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),wi.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,i=K.STRICT_TEXTURE_CACHE){const s=typeof t=="string";let n=null;if(s)n=t;else{if(!t._pixiId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${oi()}`}n=t._pixiId}let o=mr[n];if(s&&i&&!o)throw new Error(`The cacheId "${n}" does not exist in BaseTextureCache.`);return o||(o=new wi(t,e),o.cacheId=n,wi.addToCache(o,n)),o}static fromBuffer(t,e,i,s){t=t||new Float32Array(e*i*4);const n=new ko(t,{width:e,height:i,...s==null?void 0:s.resourceOptions});let o,a;return t instanceof Float32Array?(o=O.RGBA,a=st.FLOAT):t instanceof Int32Array?(o=O.RGBA_INTEGER,a=st.INT):t instanceof Uint32Array?(o=O.RGBA_INTEGER,a=st.UNSIGNED_INT):t instanceof Int16Array?(o=O.RGBA_INTEGER,a=st.SHORT):t instanceof Uint16Array?(o=O.RGBA_INTEGER,a=st.UNSIGNED_SHORT):t instanceof Int8Array?(o=O.RGBA,a=st.BYTE):(o=O.RGBA,a=st.UNSIGNED_BYTE),n.internal=!0,new wi(n,Object.assign({},UA,{type:a,format:o},s))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),mr[e]&&mr[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),mr[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=mr[t];if(e){const i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete mr[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete mr[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};Sl.defaultOptions={mipmap:Ye.POW2,anisotropicLevel:0,scaleMode:sr.LINEAR,wrapMode:Ir.CLAMP,alphaMode:se.UNPACK,target:ki.TEXTURE_2D,format:O.RGBA,type:st.UNSIGNED_BYTE},Sl._globalBatch=0;let dt=Sl;class Cl{constructor(){this.texArray=null,this.blend=0,this.type=$e.TRIANGLES,this.start=0,this.size=0,this.data=null}}let GA=0;class Lt{constructor(t,e=!0,i=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=GA++,this.disposeRunner=new we("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?Xe.ELEMENT_ARRAY_BUFFER:Xe.ARRAY_BUFFER}get index(){return this.type===Xe.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new Lt(t)}}class ao{constructor(t,e=0,i=!1,s=st.FLOAT,n,o,a,l=1){this.buffer=t,this.size=e,this.normalized=i,this.type=s,this.stride=n,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(t,e,i,s,n){return new ao(t,e,i,s,n)}}const HA={Float32Array,Uint32Array,Int32Array,Uint8Array};function $A(r,t){let e=0,i=0;const s={};for(let l=0;l<r.length;l++)i+=t[l],e+=r[l].length;const n=new ArrayBuffer(e*4);let o=null,a=0;for(let l=0;l<r.length;l++){const h=t[l],c=r[l],u=Jp(c);s[u]||(s[u]=new HA[u](n)),o=s[u];for(let d=0;d<c.length;d++){const f=(d/h|0)*i+a,p=d%h;o[f+p]=c[d]}a+=h}return new Float32Array(n)}const xd={5126:4,5123:2,5121:1};let WA=0;const VA={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Br{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=WA++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new we("disposeGeometry"),this.refCount=0}addAttribute(t,e,i=0,s=!1,n,o,a,l=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Lt||(e instanceof Array&&(e=new Float32Array(e)),e=new Lt(e));const h=t.split("|");if(h.length>1){for(let u=0;u<h.length;u++)this.addAttribute(h[u],e,i,s,n);return this}let c=this.buffers.indexOf(e);return c===-1&&(this.buffers.push(e),c=this.buffers.length-1),this.attributes[t]=new ao(c,i,s,n,o,a,l),this.instanced=this.instanced||l,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof Lt||(t instanceof Array&&(t=new Uint16Array(t)),t=new Lt(t)),t.type=Xe.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],e=[],i=new Lt;let s;for(s in this.attributes){const n=this.attributes[s],o=this.buffers[n.buffer];t.push(o.data),e.push(n.size*xd[n.type]/4),n.buffer=0}for(i.data=$A(t,e),s=0;s<this.buffers.length;s++)this.buffers[s]!==this.indexBuffer&&this.buffers[s].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new Br;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new Lt(this.buffers[e].data.slice(0));for(const e in this.attributes){const i=this.attributes[e];t.attributes[e]=new ao(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Xe.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new Br,i=[],s=[],n=[];let o;for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)s[l]=s[l]||0,s[l]+=o.buffers[l].data.length,n[l]=0}for(let a=0;a<o.buffers.length;a++)i[a]=new VA[Jp(o.buffers[a].data)](s[a]),e.buffers[a]=new Lt(i[a]);for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)i[l].set(o.buffers[l].data,n[l]),n[l]+=o.buffers[l].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.type=Xe.ELEMENT_ARRAY_BUFFER;let a=0,l=0,h=0,c=0;for(let u=0;u<o.buffers.length;u++)if(o.buffers[u]!==o.indexBuffer){c=u;break}for(const u in o.attributes){const d=o.attributes[u];(d.buffer|0)===c&&(l+=d.size*xd[d.type]/4)}for(let u=0;u<t.length;u++){const d=t[u].indexBuffer.data;for(let f=0;f<d.length;f++)e.indexBuffer.data[f+h]+=a;a+=t[u].buffers[c].data.length/l,h+=d.length}}return e}}class em extends Br{constructor(t=!1){super(),this._buffer=new Lt(null,t,!1),this._indexBuffer=new Lt(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,st.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,st.FLOAT).addAttribute("aColor",this._buffer,4,!0,st.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,st.FLOAT).addIndex(this._indexBuffer)}}const lo=Math.PI*2,XA=180/Math.PI,zA=Math.PI/180;var Yt=(r=>(r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC",r))(Yt||{});class At{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new At(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}}At.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const pn=[new At,new At,new At,new At];class pt{constructor(t=0,e=0,i=0,s=0){this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(s),this.type=Yt.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new pt(0,0,0,0)}clone(){return new pt(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}intersects(t,e){if(!e){const I=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=I)return!1;const W=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>W}const i=this.left,s=this.right,n=this.top,o=this.bottom;if(s<=i||o<=n)return!1;const a=pn[0].set(t.left,t.top),l=pn[1].set(t.left,t.bottom),h=pn[2].set(t.right,t.top),c=pn[3].set(t.right,t.bottom);if(h.x<=a.x||l.y<=a.y)return!1;const u=Math.sign(e.a*e.d-e.b*e.c);if(u===0||(e.apply(a,a),e.apply(l,l),e.apply(h,h),e.apply(c,c),Math.max(a.x,l.x,h.x,c.x)<=i||Math.min(a.x,l.x,h.x,c.x)>=s||Math.max(a.y,l.y,h.y,c.y)<=n||Math.min(a.y,l.y,h.y,c.y)>=o))return!1;const d=u*(l.y-a.y),f=u*(a.x-l.x),p=d*i+f*n,m=d*s+f*n,g=d*i+f*o,y=d*s+f*o;if(Math.max(p,m,g,y)<=d*a.x+f*a.y||Math.min(p,m,g,y)>=d*c.x+f*c.y)return!1;const A=u*(a.y-h.y),_=u*(h.x-a.x),b=A*i+_*n,C=A*s+_*n,N=A*i+_*o,P=A*s+_*o;return!(Math.max(b,C,N,P)<=A*a.x+_*a.y||Math.min(b,C,N,P)>=A*c.x+_*c.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),s=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=s,this.height=Math.max(n-s,0),this}ceil(t=1,e=.001){const i=Math.ceil((this.x+this.width-e)*t)/t,s=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=s-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),s=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=s,this.height=n-s,this}}pt.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Uo{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.radius=i,this.type=Yt.CIRC}clone(){return new Uo(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let s=this.x-t,n=this.y-e;return s*=s,n*=n,s+n<=i}getBounds(){return new pt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Uo.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Go{constructor(t=0,e=0,i=0,s=0){this.x=t,this.y=e,this.width=i,this.height=s,this.type=Yt.ELIP}clone(){return new Go(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let i=(t-this.x)/this.width,s=(e-this.y)/this.height;return i*=i,s*=s,i+s<=1}getBounds(){return new pt(this.x-this.width,this.y-this.height,this.width,this.height)}}Go.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class ri{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const i=[];for(let s=0,n=e.length;s<n;s++)i.push(e[s].x,e[s].y);e=i}this.points=e,this.type=Yt.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),e=new ri(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let i=!1;const s=this.points.length/2;for(let n=0,o=s-1;n<s;o=n++){const a=this.points[n*2],l=this.points[n*2+1],h=this.points[o*2],c=this.points[o*2+1];l>e!=c>e&&t<(h-a)*((e-l)/(c-l))+a&&(i=!i)}return i}}ri.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((r,t)=>`${r}, ${t}`,"")}]`};class Ho{constructor(t=0,e=0,i=0,s=0,n=20){this.x=t,this.y=e,this.width=i,this.height=s,this.radius=n,this.type=Yt.RREC}clone(){return new Ho(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let s=t-(this.x+i),n=e-(this.y+i);const o=i*i;if(s*s+n*n<=o||(s=t-(this.x+this.width-i),s*s+n*n<=o)||(n=e-(this.y+this.height-i),s*s+n*n<=o)||(s=t-(this.x+i),s*s+n*n<=o))return!0}return!1}}Ho.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Pt{constructor(t=1,e=0,i=0,s=1,n=0,o=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=s,this.tx=n,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,s,n,o){return this.a=t,this.b=e,this.c=i,this.d=s,this.tx=n,this.ty=o,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new At;const i=t.x,s=t.y;return e.x=this.a*i+this.c*s+this.tx,e.y=this.b*i+this.d*s+this.ty,e}applyInverse(t,e){e=e||new At;const i=1/(this.a*this.d+this.c*-this.b),s=t.x,n=t.y;return e.x=this.d*i*s+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*n+-this.b*i*s+(-this.ty*this.a+this.tx*this.b)*i,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),s=this.a,n=this.c,o=this.tx;return this.a=s*e-this.b*i,this.b=s*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this}append(t){const e=this.a,i=this.b,s=this.c,n=this.d;return this.a=t.a*e+t.b*s,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*s,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*s+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this}setTransform(t,e,i,s,n,o,a,l,h){return this.a=Math.cos(a+h)*n,this.b=Math.sin(a+h)*n,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=t-(i*this.a+s*this.c),this.ty=e-(i*this.b+s*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,s=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=s*t.a+this.d*t.c,this.d=s*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,s=this.c,n=this.d,o=t.pivot,a=-Math.atan2(-s,n),l=Math.atan2(i,e),h=Math.abs(a+l);return h<1e-5||Math.abs(lo-h)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=l),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(s*s+n*n),t.position.x=this.tx+(o.x*e+o.y*s),t.position.y=this.ty+(o.x*i+o.y*n),t}invert(){const t=this.a,e=this.b,i=this.c,s=this.d,n=this.tx,o=t*s-e*i;return this.a=s/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-s*n)/o,this.ty=-(t*this.ty-e*n)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Pt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}static get IDENTITY(){return new Pt}static get TEMP_MATRIX(){return new Pt}}Pt.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Hr=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],$r=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Wr=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Vr=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Il=[],rm=[],mn=Math.sign;function jA(){for(let r=0;r<16;r++){const t=[];Il.push(t);for(let e=0;e<16;e++){const i=mn(Hr[r]*Hr[e]+Wr[r]*$r[e]),s=mn($r[r]*Hr[e]+Vr[r]*$r[e]),n=mn(Hr[r]*Wr[e]+Wr[r]*Vr[e]),o=mn($r[r]*Wr[e]+Vr[r]*Vr[e]);for(let a=0;a<16;a++)if(Hr[a]===i&&$r[a]===s&&Wr[a]===n&&Vr[a]===o){t.push(a);break}}}for(let r=0;r<16;r++){const t=new Pt;t.set(Hr[r],$r[r],Wr[r],Vr[r],0,0),rm.push(t)}}jA();const Ft={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>Hr[r],uY:r=>$r[r],vX:r=>Wr[r],vY:r=>Vr[r],inv:r=>r&8?r&15:-r&7,add:(r,t)=>Il[r][t],sub:(r,t)=>Il[r][Ft.inv(t)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,t)=>Math.abs(r)*2<=Math.abs(t)?t>=0?Ft.S:Ft.N:Math.abs(t)*2<=Math.abs(r)?r>0?Ft.E:Ft.W:t>0?r>0?Ft.SE:Ft.SW:r>0?Ft.NE:Ft.NW,matrixAppendRotationInv:(r,t,e=0,i=0)=>{const s=rm[Ft.inv(t)];s.tx=e,s.ty=i,r.append(s)}};class or{constructor(t,e,i=0,s=0){this._x=i,this._y=s,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new or(t,e,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}or.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const Rl=class{constructor(){this.worldTransform=new Pt,this.localTransform=new Pt,this.position=new or(this.onChange,this,0,0),this.scale=new or(this.onChange,this,1,1),this.pivot=new or(this.onChange,this,0,0),this.skew=new or(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(r){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){const e=r.worldTransform,i=this.worldTransform;i.a=t.a*e.a+t.b*e.c,i.b=t.a*e.b+t.b*e.d,i.c=t.c*e.a+t.d*e.c,i.d=t.c*e.b+t.d*e.d,i.tx=t.tx*e.a+t.ty*e.c+e.tx,i.ty=t.tx*e.b+t.ty*e.d+e.ty,this._parentID=r._worldID,this._worldID++}}setFromMatrix(r){r.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())}};Rl.IDENTITY=new Rl;let Gh=Rl;Gh.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var YA=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,qA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function bd(r,t,e){const i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function Sa(r){const t=new Array(r);for(let e=0;e<t.length;e++)t[e]=!1;return t}function im(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Sa(2*t);case"bvec3":return Sa(3*t);case"bvec4":return Sa(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const $i=[{test:r=>r.type==="float"&&r.size===1&&!r.isArray,code:r=>`
            if(uv["${r}"] !== ud["${r}"].value)
            {
                ud["${r}"].value = uv["${r}"]
                gl.uniform1f(ud["${r}"].location, uv["${r}"])
            }
            `},{test:(r,t)=>(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(t==null||t.castToBaseTexture!==void 0),code:r=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${r}"], t);

            if(ud["${r}"].value !== t)
            {
                ud["${r}"].value = t;
                gl.uniform1i(ud["${r}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(r,t)=>r.type==="mat3"&&r.size===1&&!r.isArray&&t.a!==void 0,code:r=>`
            gl.uniformMatrix3fv(ud["${r}"].location, false, uv["${r}"].toArray(true));
            `,codeUbo:r=>`
                var ${r}_matrix = uv.${r}.toArray(true);

                data[offset] = ${r}_matrix[0];
                data[offset+1] = ${r}_matrix[1];
                data[offset+2] = ${r}_matrix[2];
        
                data[offset + 4] = ${r}_matrix[3];
                data[offset + 5] = ${r}_matrix[4];
                data[offset + 6] = ${r}_matrix[5];
        
                data[offset + 8] = ${r}_matrix[6];
                data[offset + 9] = ${r}_matrix[7];
                data[offset + 10] = ${r}_matrix[8];
            `},{test:(r,t)=>r.type==="vec2"&&r.size===1&&!r.isArray&&t.x!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${r}"].location, v.x, v.y);
                }`,codeUbo:r=>`
                v = uv.${r};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:r=>r.type==="vec2"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${r}"].location, v[0], v[1]);
                }
            `},{test:(r,t)=>r.type==="vec4"&&r.size===1&&!r.isArray&&t.width!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${r}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(r,t)=>r.type==="vec4"&&r.size===1&&!r.isArray&&t.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${r}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(r,t)=>r.type==="vec3"&&r.size===1&&!r.isArray&&t.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${r}"].location, v.red, v.green, v.blue)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:r=>r.type==="vec4"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${r}"].location, v[0], v[1], v[2], v[3])
                }`}],KA={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},ZA={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function QA(r,t){var i;const e=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const s in r.uniforms){const n=t[s];if(!n){((i=r.uniforms[s])==null?void 0:i.group)===!0&&(r.uniforms[s].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${s}, '${s}');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.${s}, syncData);
                    `));continue}const o=r.uniforms[s];let a=!1;for(let l=0;l<$i.length;l++)if($i[l].test(n,o)){e.push($i[l].code(s,o)),a=!0;break}if(!a){const l=(n.size===1&&!n.isArray?KA:ZA)[n.type].replace("location",`ud["${s}"].location`);e.push(`
            cu = ud["${s}"];
            cv = cu.value;
            v = uv["${s}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}const sm={};let xi=sm;function JA(){if(xi===sm||xi!=null&&xi.isContextLost()){const r=K.ADAPTER.createCanvas();let t;K.PREFER_ENV>=hi.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),xi=t}return xi}let gn;function tE(){if(!gn){gn=fe.MEDIUM;const r=JA();if(r&&r.getShaderPrecisionFormat){const t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);t&&(gn=t.precision?fe.HIGH:fe.MEDIUM)}}return gn}function Ad(r,t){const e=r.getShaderSource(t).split(`
`).map((h,c)=>`${c}: ${h}`),i=r.getShaderInfoLog(t),s=i.split(`
`),n={},o=s.map(h=>parseFloat(h.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(h=>h&&!n[h]?(n[h]=!0,!0):!1),a=[""];o.forEach(h=>{e[h-1]=`%c${e[h-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=e.join(`
`);a[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function eE(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||Ad(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||Ad(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}const rE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function nm(r){return rE[r]}let yn=null;const Ed={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function om(r,t){if(!yn){const e=Object.keys(Ed);yn={};for(let i=0;i<e.length;++i){const s=e[i];yn[r[s]]=Ed[s]}}return yn[t]}function Td(r,t,e){if(r.substring(0,9)!=="precision"){let i=t;return t===fe.HIGH&&e!==fe.HIGH&&(i=fe.MEDIUM),`precision ${i} float;
${r}`}else if(e!==fe.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}let cs;function iE(){if(typeof cs=="boolean")return cs;try{cs=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{cs=!1}return cs}let sE=0;const _n={},Pl=class Si{constructor(t,e,i="pixi-shader",s={}){this.extra={},this.id=sE++,this.vertexSrc=t||Si.defaultVertexSrc,this.fragmentSrc=e||Si.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=s,this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),_n[i]?(_n[i]++,i+=`-${_n[i]}`):_n[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}
${this.fragmentSrc}`,this.vertexSrc=Td(this.vertexSrc,Si.defaultVertexPrecision,fe.HIGH),this.fragmentSrc=Td(this.fragmentSrc,Si.defaultFragmentPrecision,tE())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return qA}static get defaultFragmentSrc(){return YA}static from(t,e,i){const s=t+e;let n=gd[s];return n||(gd[s]=n=new Si(t,e,i)),n}};Pl.defaultVertexPrecision=fe.HIGH,Pl.defaultFragmentPrecision=nr.apple.device?fe.HIGH:fe.MEDIUM;let ar=Pl,nE=0;class Se{constructor(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=nE++,this.static=!!e,this.ubo=!!i,t instanceof Lt?(this.buffer=t,this.buffer.type=Xe.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Lt(new Float32Array(1)),this.buffer.type=Xe.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,i){if(!this.ubo)this.uniforms[t]=new Se(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,e,i){return new Se(t,e,i)}static uboFrom(t,e){return new Se(t,e??!0,!0)}}class ze{constructor(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof Se?this.uniformGroup=e:this.uniformGroup=new Se(e):this.uniformGroup=new Se({}),this.disposeRunner=new we("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const i in e.uniforms){const s=e.uniforms[i];if(s.group===!0&&this.checkUniformExists(t,s))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,i){const s=ar.from(t,e);return new ze(s,i)}}class oE{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const i=new Int32Array(t);for(let n=0;n<t;n++)i[n]=n;this.defaultGroupCache[t]=Se.from({uSamplers:i},!0);let s=this.fragTemplate;s=s.replace(/%count%/gi,`${t}`),s=s.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new ar(this.vertexSrc,s)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new Pt,default:this.defaultGroupCache[t]};return new ze(this.programCache[t],e)}generateSampleSrc(t){let e="";e+=`
`,e+=`
`;for(let i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+=`if(vTextureId < ${i}.5)`),e+=`
{`,e+=`
	color = texture2D(uSamplers[${i}], vTextureCoord);`,e+=`
}`;return e+=`
`,e+=`
`,e}}class Ml{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function aE(){return!nr.apple.device}function lE(r){let t=!0;const e=K.ADAPTER.getNavigator();if(nr.tablet||nr.phone){if(nr.apple.device){const i=e.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)<11&&(t=!1)}if(nr.android.device){const i=e.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(t=!1)}}return t?r:4}class $o{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var hE=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,cE=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const ms=class _e extends $o{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=em,this.vertexSize=6,this.state=qe.for2d(),this.size=_e.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??lE(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??aE(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return yt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return cE}static get defaultFragmentTemplate(){return hE}setShaderGenerator({vertex:t=_e.defaultVertexSrc,fragment:e=_e.defaultFragmentTemplate}={}){this.shaderGenerator=new oE(t,e)}contextChange(){const t=this.renderer.gl;K.PREFER_ENV===hi.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),_e.defaultMaxTextures),this.maxTextures=kA(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=_e,i=this.size/4,s=Math.floor(i/this.maxTextures)+1;for(;t.length<i;)t.push(new Cl);for(;e.length<s;)e.push(new Ml);for(let n=0;n<this.maxTextures;n++)this._tempBoundTextures[n]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,i=_e._textureArrayPool,s=this.renderer.batch,n=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++dt._globalBatch,l=0,h=i[0],c=0;s.copyBoundTextures(n,e);for(let u=0;u<this._bufferSize;++u){const d=t[u];t[u]=null,d._batchEnabled!==a&&(h.count>=e&&(s.boundArray(h,n,a,e),this.buildDrawCalls(h,c,u),c=u,h=i[++l],++a),d._batchEnabled=a,d.touched=o,h.elements[h.count++]=d)}h.count>0&&(s.boundArray(h,n,a,e),this.buildDrawCalls(h,c,this._bufferSize),++l,++a);for(let u=0;u<n.length;u++)n[u]=null;dt._globalBatch=a}buildDrawCalls(t,e,i){const{_bufferedElements:s,_attributeBuffer:n,_indexBuffer:o,vertexSize:a}=this,l=_e._drawCallPool;let h=this._dcIndex,c=this._aIndex,u=this._iIndex,d=l[h];d.start=this._iIndex,d.texArray=t;for(let f=e;f<i;++f){const p=s[f],m=p._texture.baseTexture,g=Zp[m.alphaMode?1:0][p.blendMode];s[f]=null,e<f&&d.blend!==g&&(d.size=u-d.start,e=f,d=l[++h],d.texArray=t,d.start=u),this.packInterleavedGeometry(p,n,o,c,u),c+=p.vertexData.length/2*a,u+=p.indices.length,d.blend=g}e<i&&(d.size=u-d.start,++h),this._dcIndex=h,this._aIndex=c,this._iIndex=u}bindAndClearTexArray(t){const e=this.renderer.texture;for(let i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:i}=this;_e.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:i}=this.renderer,s=_e._drawCallPool;let n=null;for(let o=0;o<t;o++){const{texArray:a,type:l,size:h,start:c,blend:u}=s[o];n!==a&&(n=a,this.bindAndClearTexArray(a)),this.state.blendMode=u,i.set(this.state),e.drawElements(l,h,e.UNSIGNED_SHORT,c*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),_e.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=oo(Math.ceil(t/8)),i=pd(e),s=e*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);let n=this._aBuffers[s];return n||(this._aBuffers[s]=n=new Tl(s*this.vertexSize*4)),n}getIndexBuffer(t){const e=oo(Math.ceil(t/12)),i=pd(e),s=e*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);let n=this._iBuffers[i];return n||(this._iBuffers[i]=n=new Uint16Array(s)),n}packInterleavedGeometry(t,e,i,s,n){const{uint32View:o,float32View:a}=e,l=s/this.vertexSize,h=t.uvs,c=t.indices,u=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=Rt.shared.setValue(t._tintRGB).toPremultiplied(f,t._texture.baseTexture.alphaMode>0);for(let m=0;m<u.length;m+=2)a[s++]=u[m],a[s++]=u[m+1],a[s++]=h[m],a[s++]=h[m+1],o[s++]=p,a[s++]=d;for(let m=0;m<c.length;m++)i[n++]=l+c[m]}};ms.defaultBatchSize=4096,ms.extension={name:"batch",type:z.RendererPlugin},ms._drawCallPool=[],ms._textureArrayPool=[];let Xr=ms;tt.add(Xr);var uE=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,dE=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Bl=class gs extends ze{constructor(t,e,i){const s=ar.from(t||gs.defaultVertexSrc,e||gs.defaultFragmentSrc);super(s,i),this.padding=0,this.resolution=gs.defaultResolution,this.multisample=gs.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new qe}apply(t,e,i,s,n){t.applyFilter(this,e,i,s)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return dE}static get defaultFragmentSrc(){return uE}};Bl.defaultResolution=1,Bl.defaultMultisample=Ht.NONE;let re=Bl;class ho{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Rt(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:e,background:i,backgroundAlpha:s}=t,n=i??e;n!==void 0&&(this.color=n),this.alpha=s}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}ho.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},ho.extension={type:[z.RendererSystem,z.CanvasRendererSystem],name:"background"};tt.add(ho);class am{constructor(t){this.renderer=t,this.emptyRenderer=new $o(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:i}=this.renderer.texture;for(let s=e-1;s>=0;--s)t[s]=i[s]||null,t[s]&&(t[s]._batchLocation=s)}boundArray(t,e,i,s){const{elements:n,ids:o,count:a}=t;let l=0;for(let h=0;h<a;h++){const c=n[h],u=c._batchLocation;if(u>=0&&u<s&&e[u]===c){o[h]=u;continue}for(;l<s;){const d=e[l];if(d&&d._batchEnabled===i&&d._batchLocation===l){l++;continue}o[h]=l,c._batchLocation=l,e[l]=c;break}}}destroy(){this.renderer=null}}am.extension={type:z.RendererSystem,name:"batch"};tt.add(am);let wd=0;class co{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=wd++}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,i=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:i,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=wd++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;e.addEventListener!==void 0&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let i;if(K.PREFER_ENV>=hi.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const s=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}co.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},co.extension={type:z.RendererSystem,name:"context"};tt.add(co);class Fl{constructor(t,e){if(this.width=Math.round(t),this.height=Math.round(e),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new we("disposeFramebuffer"),this.multisample=Ht.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new dt(null,{scaleMode:sr.NEAREST,resolution:1,mipmap:Ye.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new dt(null,{scaleMode:sr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Ye.OFF,format:O.DEPTH_COMPONENT,type:st.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),!t||!e)throw new Error("Framebuffer width and height must not be zero");if(!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const s=this.colorTextures[i],n=s.resolution;s.setSize(t/n,e/n)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(t/i,e/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class lm extends dt{constructor(t={}){if(typeof t=="number"){const e=arguments[0],i=arguments[1],s=arguments[2],n=arguments[3];t={width:e,height:i,scaleMode:s,resolution:n}}t.width=t.width??100,t.height=t.height??100,t.multisample??(t.multisample=Ht.NONE),super(null,t),this.mipmap=Ye.OFF,this.valid=!0,this._clear=new Rt([0,0,0,0]),this.framebuffer=new Fl(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Fr extends Xs{constructor(t){const e=t,i=e.naturalWidth||e.videoWidth||e.width,s=e.naturalHeight||e.videoHeight||e.height;super(i,s),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,i){i===void 0&&!e.startsWith("data:")?t.crossOrigin=OA(e):i!==!1&&(t.crossOrigin=typeof i=="string"?i:"anonymous")}upload(t,e,i,s){const n=t.gl,o=e.realWidth,a=e.realHeight;if(s=s||this.source,typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement&&s.readyState<=1)return!1;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===se.UNPACK),!this.noSubImage&&e.target===n.TEXTURE_2D&&i.width===o&&i.height===a?n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,i.type,s):(i.width=o,i.height=a,n.texImage2D(e.target,0,i.internalFormat,e.format,i.type,s)),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;this.resize(e,i),super.update()}dispose(){this.source=null}}class hm extends Fr{constructor(t,e){if(e=e||{},typeof t=="string"){const i=new Image;Fr.crossOrigin(i,t,e.crossorigin),i.src=t,t=i}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??K.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.bitmap=null,this._load=null,e.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((e,i)=>{const s=this.source;this.url=s.src;const n=()=>{this.destroyed||(s.onload=null,s.onerror=null,this.update(),this._load=null,this.createBitmap?e(this.process()):e(this))};s.complete&&s.src?n():(s.onload=n,s.onerror=o=>{i(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,i=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:i?"cors":"no-cors"}).then(s=>s.blob()).then(s=>e(s,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===se.UNPACK?"premultiply":"none"})).then(s=>this.destroyed?Promise.reject():(this.bitmap=s,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,e,i){if(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,i,this.bitmap),!this.preserveBitmap){let s=!0;const n=e._glTextures;for(const o in n){const a=n[o];if(a!==i&&a.dirtyId!==e.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class Hh{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,i){const s=e.width,n=e.height;if(i){const o=t.width/2/s,a=t.height/2/n,l=t.x/s+o,h=t.y/n+a;i=Ft.add(i,Ft.NW),this.x0=l+o*Ft.uX(i),this.y0=h+a*Ft.uY(i),i=Ft.add(i,2),this.x1=l+o*Ft.uX(i),this.y1=h+a*Ft.uY(i),i=Ft.add(i,2),this.x2=l+o*Ft.uX(i),this.y2=h+a*Ft.uY(i),i=Ft.add(i,2),this.x3=l+o*Ft.uX(i),this.y3=h+a*Ft.uY(i)}else this.x0=t.x/s,this.y0=t.y/n,this.x1=(t.x+t.width)/s,this.y1=t.y/n,this.x2=(t.x+t.width)/s,this.y2=(t.y+t.height)/n,this.x3=t.x/s,this.y3=(t.y+t.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}Hh.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const Sd=new Hh;function vn(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}class it extends js{constructor(t,e,i,s,n,o,a){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new pt(0,0,1,1)),t instanceof it&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=s,this.valid=!1,this.destroyed=!1,this._uvs=Sd,this.uvMatrix=null,this.orig=i||e,this._rotate=Number(n||0),n===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new At(o.x,o.y):new At(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:e}=this.baseTexture;e!=null&&e.url&&De[e.url]&&it.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,it.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var s;const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),i=new it(this.baseTexture,!this.noFrame&&t,e,(s=this.trim)==null?void 0:s.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(i._frame=t),i}updateUvs(){this._uvs===Sd&&(this._uvs=new Hh),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},i=K.STRICT_TEXTURE_CACHE){const s=typeof t=="string";let n=null;if(s)n=t;else if(t instanceof dt){if(!t.cacheId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t.cacheId=`${a}-${oi()}`,dt.addToCache(t,t.cacheId)}n=t.cacheId}else{if(!t._pixiId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${oi()}`}n=t._pixiId}let o=De[n];if(s&&i&&!o)throw new Error(`The cacheId "${n}" does not exist in TextureCache.`);return!o&&!(t instanceof dt)?(e.resolution||(e.resolution=cr(t)),o=new it(new dt(t,e)),o.baseTexture.cacheId=n,dt.addToCache(o.baseTexture,n),it.addToCache(o,n)):!o&&t instanceof dt&&(o=new it(t),it.addToCache(o,n)),o}static fromURL(t,e){const i=Object.assign({autoLoad:!1},e==null?void 0:e.resourceOptions),s=it.from(t,Object.assign({resourceOptions:i},e),!1),n=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):n.load().then(()=>Promise.resolve(s))}static fromBuffer(t,e,i,s){return new it(dt.fromBuffer(t,e,i,s))}static fromLoader(t,e,i,s){const n=new dt(t,Object.assign({scaleMode:dt.defaultOptions.scaleMode,resolution:cr(e)},s)),{resource:o}=n;o instanceof hm&&(o.url=e);const a=new it(n);return i||(i=e),dt.addToCache(a.baseTexture,i),it.addToCache(a,i),i!==e&&(dt.addToCache(a.baseTexture,e),it.addToCache(a,e)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),De[e]&&De[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),De[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=De[t];if(e){const i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete De[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)De[t.textureCacheIds[e]]===t&&delete De[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:i,width:s,height:n}=t,o=e+s>this.baseTexture.width,a=i+n>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",h=`X: ${e} + ${s} = ${e+s} > ${this.baseTexture.width}`,c=`Y: ${i} + ${n} = ${i+n} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${h} ${l} ${c}`)}this.valid=s&&n&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return it._EMPTY||(it._EMPTY=new it(new dt),vn(it._EMPTY),vn(it._EMPTY.baseTexture)),it._EMPTY}static get WHITE(){if(!it._WHITE){const t=K.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),it._WHITE=new it(dt.from(t)),vn(it._WHITE),vn(it._WHITE.baseTexture)}return it._WHITE}}class ui extends it{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,i=!0){const s=this.baseTexture.resolution,n=Math.round(t*s)/s,o=Math.round(e*s)/s;this.valid=n>0&&o>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(n,o),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new ui(new lm(t))}}class cm{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,i=Ht.NONE){const s=new lm(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new ui(s)}getOptimalTexture(t,e,i=1,s=Ht.NONE){let n;t=Math.max(Math.ceil(t*i-1e-6),1),e=Math.max(Math.ceil(e*i-1e-6),1),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=oo(t),e=oo(e),n=((t&65535)<<16|e&65535)>>>0,s>1&&(n+=s*4294967296)):n=s>1?-s:-1,this.texturePool[n]||(this.texturePool[n]=[]);let o=this.texturePool[n].pop();return o||(o=this.createTexture(t,e,s)),o.filterPoolKey=n,o.setResolution(i),o}getFilterTexture(t,e,i){const s=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||Ht.NONE);return s.filterFrame=t.filterFrame,s}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const e in this.texturePool){const i=this.texturePool[e];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const i=this.texturePool[e];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}cm.SCREEN_KEY=-1;class fE extends Br{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class um extends Br{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Lt(this.vertices),this.uvBuffer=new Lt(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let i=0,s=0;return this.uvs[0]=i,this.uvs[1]=s,this.uvs[2]=i+e.width/t.width,this.uvs[3]=s,this.uvs[4]=i+e.width/t.width,this.uvs[5]=s+e.height/t.height,this.uvs[6]=i,this.uvs[7]=s+e.height/t.height,i=e.x,s=e.y,this.vertices[0]=i,this.vertices[1]=s,this.vertices[2]=i+e.width,this.vertices[3]=s,this.vertices[4]=i+e.width,this.vertices[5]=s+e.height,this.vertices[6]=i,this.vertices[7]=s+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class pE{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Ht.NONE,this.sourceFrame=new pt,this.destinationFrame=new pt,this.bindingSourceFrame=new pt,this.bindingDestinationFrame=new pt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const xn=[new At,new At,new At,new At],Ca=new Pt;class dm{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new cm,this.statePool=[],this.quad=new fE,this.quadUv=new um,this.tempRect=new pt,this.activeState={},this.globalUniforms=new Se({outputFrame:new pt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const i=this.renderer,s=this.defaultFilterStack,n=this.statePool.pop()||new pE,o=i.renderTexture;let a,l;if(o.current){const g=o.current;a=g.resolution,l=g.multisample}else a=i.resolution,l=i.multisample;let h=e[0].resolution||a,c=e[0].multisample??l,u=e[0].padding,d=e[0].autoFit,f=e[0].legacy??!0;for(let g=1;g<e.length;g++){const y=e[g];h=Math.min(h,y.resolution||a),c=Math.min(c,y.multisample??l),u=this.useMaxPadding?Math.max(u,y.padding):u+y.padding,d=d&&y.autoFit,f=f||(y.legacy??!0)}s.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),s.push(n),n.resolution=h,n.multisample=c,n.legacy=f,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(u);const p=this.tempRect.copyFrom(o.sourceFrame);i.projection.transform&&this.transformAABB(Ca.copyFrom(i.projection.transform).invert(),p),d?(n.sourceFrame.fit(p),(n.sourceFrame.width<=0||n.sourceFrame.height<=0)&&(n.sourceFrame.width=0,n.sourceFrame.height=0)):n.sourceFrame.intersects(p)||(n.sourceFrame.width=0,n.sourceFrame.height=0),this.roundFrame(n.sourceFrame,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,h,c),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;const m=this.tempRect;m.x=0,m.y=0,m.width=n.sourceFrame.width,m.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(o.sourceFrame),n.bindingDestinationFrame.copyFrom(o.destinationFrame),n.transform=i.projection.transform,i.projection.transform=null,o.bind(n.renderTexture,n.sourceFrame,m),i.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;const s=this.globalUniforms.uniforms;s.outputFrame=e.sourceFrame,s.resolution=e.resolution;const n=s.inputSize,o=s.inputPixel,a=s.inputClamp;if(n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],o[0]=Math.round(n[0]*e.resolution),o[1]=Math.round(n[1]*e.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=e.sourceFrame.width*n[2]-.5*o[2],a[3]=e.sourceFrame.height*n[3]-.5*o[3],e.legacy){const h=s.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();const l=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,l.renderTexture,ke.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let h=e.renderTexture,c=this.getOptimalFilterTexture(h.width,h.height,e.resolution);c.filterFrame=h.filterFrame;let u=0;for(u=0;u<i.length-1;++u){u===1&&e.multisample>1&&(c=this.getOptimalFilterTexture(h.width,h.height,e.resolution),c.filterFrame=h.filterFrame),i[u].apply(this,h,c,ke.CLEAR,e);const d=h;h=c,c=d}i[u].apply(this,h,l.renderTexture,ke.BLEND,e),u>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(c)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=ke.CLEAR){const{renderTexture:i,state:s}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t==null?void 0:t.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,i.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const n=s.stateId&1||this.forceClear;(e===ke.CLEAR||e===ke.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,i,s){const n=this.renderer;n.state.set(t.state),this.bindAndClear(i,s),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw($e.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw($e.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:i,destinationFrame:s}=this.activeState,{orig:n}=e._texture,o=t.set(s.width,0,0,s.height,i.x,i.y),a=e.worldTransform.copyTo(Pt.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/n.width,1/n.height),o.translate(e.anchor.x,e.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,i=1,s=Ht.NONE){return this.texturePool.getOptimalTexture(t,e,i,s)}getFilterTexture(t,e,i){if(typeof t=="number"){const n=t;t=e,e=n}t=t||this.activeState.renderTexture;const s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||Ht.NONE);return s.filterFrame=t.filterFrame,s}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const i=xn[0],s=xn[1],n=xn[2],o=xn[3];i.set(e.left,e.top),s.set(e.left,e.bottom),n.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(i,i),t.apply(s,s),t.apply(n,n),t.apply(o,o);const a=Math.min(i.x,s.x,n.x,o.x),l=Math.min(i.y,s.y,n.y,o.y),h=Math.max(i.x,s.x,n.x,o.x),c=Math.max(i.y,s.y,n.y,o.y);e.x=a,e.y=l,e.width=h-a,e.height=c-l}roundFrame(t,e,i,s,n){if(!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)){if(n){const{a:o,b:a,c:l,d:h}=n;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(h)>1e-4))return}n=n?Ca.copyFrom(n):Ca.identity(),n.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)}}}dm.extension={type:z.RendererSystem,name:"filter"};tt.add(dm);class mE{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Ht.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const gE=new pt;class fm{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Fl(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new pt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;K.PREFER_ENV===hi.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=s=>e.drawBuffersWEBGL(s):(this.hasMRT=!1,t.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,i=0){const{gl:s}=this;if(t){const n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,s.bindFramebuffer(s.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,n.mipLevel=i),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,n.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const o=e.width>>i,a=e.height>>i,l=o/e.width;this.setViewport(e.x*l,e.y*l,o,a)}else{const o=t.width>>i,a=t.height>>i;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,s.bindFramebuffer(s.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,i,s){const n=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),s=Math.round(s),(n.width!==i||n.height!==s||n.x!==t||n.y!==e)&&(n.x=t,n.y=e,n.width=i,n.height=s,this.gl.viewport(t,e,i,s))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,i,s,n=nl.COLOR|nl.DEPTH){const{gl:o}=this;o.clearColor(t,e,i,s),o.clear(n)}initFramebuffer(t){const{gl:e}=this,i=new mE(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i}resizeFramebuffer(t){const{gl:e}=this,i=t.glFramebuffers[this.CONTEXT_UID];if(i.stencil){e.bindRenderbuffer(e.RENDERBUFFER,i.stencil);let o;this.renderer.context.webGLVersion===1?o=e.DEPTH_STENCIL:t.depth&&t.stencil?o=e.DEPTH24_STENCIL8:t.depth?o=e.DEPTH_COMPONENT24:o=e.STENCIL_INDEX8,i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,o,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,o,t.width,t.height)}const s=t.colorTextures;let n=s.length;e.drawBuffers||(n=Math.min(n,1));for(let o=0;o<n;o++){const a=s[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:i}=this,s=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures;let o=n.length;i.drawBuffers||(o=Math.min(o,1)),s.multisample>1&&this.canMultisampleFramebuffer(t)?s.msaaBuffer=s.msaaBuffer||i.createRenderbuffer():s.msaaBuffer&&(i.deleteRenderbuffer(s.msaaBuffer),s.msaaBuffer=null,s.blitFramebuffer&&(s.blitFramebuffer.dispose(),s.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const h=n[l],c=h.parentTextureArray||h;this.renderer.texture.bind(c,0),l===0&&s.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,s.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,s.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,h.target,c._glTextures[this.CONTEXT_UID].texture,e),a.push(i.COLOR_ATTACHMENT0+l))}if(a.length>1&&i.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){const l=t.depthTexture;this.renderer.texture.bind(l,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,e)}if((t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)){s.stencil=s.stencil||i.createRenderbuffer();let l,h;this.renderer.context.webGLVersion===1?(l=i.DEPTH_STENCIL_ATTACHMENT,h=i.DEPTH_STENCIL):t.depth&&t.stencil?(l=i.DEPTH_STENCIL_ATTACHMENT,h=i.DEPTH24_STENCIL8):t.depth?(l=i.DEPTH_ATTACHMENT,h=i.DEPTH_COMPONENT24):(l=i.STENCIL_ATTACHMENT,h=i.STENCIL_INDEX8),i.bindRenderbuffer(i.RENDERBUFFER,s.stencil),s.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,h,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,h,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,l,i.RENDERBUFFER,s.stencil)}else s.stencil&&(i.deleteRenderbuffer(s.stencil),s.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let i=Ht.NONE;if(t<=1||e===null)return i;for(let s=0;s<e.length;s++)if(e[s]<=t){i=e[s];break}return i===1&&(i=Ht.NONE),i}blit(t,e,i){const{current:s,renderer:n,gl:o,CONTEXT_UID:a}=this;if(n.context.webGLVersion!==2||!s)return;const l=s.glFramebuffers[a];if(!l)return;if(!t){if(!l.msaaBuffer)return;const c=s.colorTextures[0];if(!c)return;l.blitFramebuffer||(l.blitFramebuffer=new Fl(s.width,s.height),l.blitFramebuffer.addColorTexture(0,c)),t=l.blitFramebuffer,t.colorTextures[0]!==c&&(t.colorTextures[0]=c,t.dirtyId++,t.dirtyFormat++),(t.width!==s.width||t.height!==s.height)&&(t.width=s.width,t.height=s.height,t.dirtyId++,t.dirtySize++)}e||(e=gE,e.width=s.width,e.height=s.height),i||(i=e);const h=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(e.left,e.top,e.right,e.bottom,i.left,i.top,i.right,i.bottom,o.COLOR_BUFFER_BIT,h?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,e){const i=t.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(!i)return;delete t.glFramebuffers[this.CONTEXT_UID];const n=this.managedFramebuffers.indexOf(t);n>=0&&this.managedFramebuffers.splice(n,1),t.disposeRunner.remove(this),e||(s.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&s.deleteRenderbuffer(i.msaaBuffer),i.stencil&&s.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&this.disposeFramebuffer(i.blitFramebuffer,e)}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil&&t.stencil)return;t.stencil=!0;const i=t.width,s=t.height,n=this.gl,o=e.stencil=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=n.DEPTH_STENCIL_ATTACHMENT,l=n.DEPTH_STENCIL):t.depth?(a=n.DEPTH_STENCIL_ATTACHMENT,l=n.DEPTH24_STENCIL8):(a=n.STENCIL_ATTACHMENT,l=n.STENCIL_INDEX8),e.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,e.multisample,l,i,s):n.renderbufferStorage(n.RENDERBUFFER,l,i,s),n.framebufferRenderbuffer(n.FRAMEBUFFER,a,n.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new pt}destroy(){this.renderer=null}}fm.extension={type:z.RendererSystem,name:"framebuffer"};tt.add(fm);const Ia={5126:4,5123:2,5121:1};class pm{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){let i=this.renderer.context.extensions.vertexArrayObject;K.PREFER_ENV===hi.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=()=>i.createVertexArrayOES(),t.bindVertexArray=s=>i.bindVertexArrayOES(s),t.deleteVertexArray=s=>i.deleteVertexArrayOES(s)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(e.webGLVersion!==2){const i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=(s,n)=>i.vertexAttribDivisorANGLE(s,n),t.drawElementsInstanced=(s,n,o,a,l)=>i.drawElementsInstancedANGLE(s,n,o,a,l),t.drawArraysInstanced=(s,n,o,a)=>i.drawArraysInstancedANGLE(s,n,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:i}=this;let s=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;s||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=s={},n=!0);const o=s[e.program.id]||this.initGeometryVao(t,e,n);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let i=0;i<t.buffers.length;i++){const s=t.buffers[i];e.update(s)}}checkCompatibility(t,e){const i=t.attributes,s=e.attributeData;for(const n in s)if(!i[n])throw new Error(`shader and geometry incompatible, geometry missing the "${n}" attribute`)}getSignature(t,e){const i=t.attributes,s=e.attributeData,n=["g",t.id];for(const o in i)s[o]&&n.push(o,s[o].location);return n.join("-")}initGeometryVao(t,e,i=!0){const s=this.gl,n=this.CONTEXT_UID,o=this.renderer.buffer,a=e.program;a.glPrograms[n]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,a);const l=this.getSignature(t,a),h=t.glVertexArrayObjects[this.CONTEXT_UID];let c=h[l];if(c)return h[a.id]=c,c;const u=t.buffers,d=t.attributes,f={},p={};for(const m in u)f[m]=0,p[m]=0;for(const m in d)!d[m].size&&a.attributeData[m]?d[m].size=a.attributeData[m].size:d[m].size||console.warn(`PIXI Geometry attribute '${m}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[m].buffer]+=d[m].size*Ia[d[m].type];for(const m in d){const g=d[m],y=g.size;g.stride===void 0&&(f[g.buffer]===y*Ia[g.type]?g.stride=0:g.stride=f[g.buffer]),g.start===void 0&&(g.start=p[g.buffer],p[g.buffer]+=y*Ia[g.type])}c=s.createVertexArray(),s.bindVertexArray(c);for(let m=0;m<u.length;m++){const g=u[m];o.bind(g),i&&g._glBuffers[n].refCount++}return this.activateVao(t,a),h[a.id]=c,h[l]=c,s.bindVertexArray(null),o.unbind(Xe.ARRAY_BUFFER),c}disposeGeometry(t,e){var a;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const i=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,n=t.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(t.disposeRunner.remove(this),!!i){if(o)for(let l=0;l<n.length;l++){const h=n[l]._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!e&&o.dispose(n[l],e))}if(!e){for(const l in i)if(l[0]==="g"){const h=i[l];this._activeVao===h&&this.unbind(),s.deleteVertexArray(h)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)}activateVao(t,e){const i=this.gl,s=this.CONTEXT_UID,n=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&n.bind(t.indexBuffer);let l=null;for(const h in a){const c=a[h],u=o[c.buffer],d=u._glBuffers[s];if(e.attributeData[h]){l!==d&&(n.bind(u),l=d);const f=e.attributeData[h].location;if(i.enableVertexAttribArray(f),i.vertexAttribPointer(f,c.size,c.type||i.FLOAT,c.normalized,c.stride,c.start),c.instance)if(this.hasInstance)i.vertexAttribDivisor(f,c.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,i,s){const{gl:n}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?n.UNSIGNED_SHORT:n.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?n.drawElementsInstanced(t,e||o.indexBuffer.data.length,l,(i||0)*a,s||1):n.drawElements(t,e||o.indexBuffer.data.length,l,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?n.drawArraysInstanced(t,i,e||o.getSize(),s||1):n.drawArrays(t,i,e||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}pm.extension={type:z.RendererSystem,name:"geometry"};tt.add(pm);const Cd=new Pt;class mm{constructor(t,e){this._texture=t,this.mapCoord=new Pt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){e===void 0&&(e=t);const i=this.mapCoord;for(let s=0;s<t.length;s+=2){const n=t[s],o=t[s+1];e[s]=n*i.a+o*i.c+i.tx,e[s+1]=n*i.b+o*i.d+i.ty}return e}update(t){const e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const s=e.orig,n=e.trim;n&&(Cd.set(s.width/n.width,0,0,s.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(Cd));const o=e.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,h=this.clampOffset;return a[0]=(e._frame.x+l+h)/o.width,a[1]=(e._frame.y+l+h)/o.height,a[2]=(e._frame.x+e._frame.width-l+h)/o.width,a[3]=(e._frame.y+e._frame.height-l+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&e.rotate===0,!0}}var yE=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,_E=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class vE extends re{constructor(t,e,i){let s=null;typeof t!="string"&&e===void 0&&i===void 0&&(s=t,t=void 0,e=void 0,i=void 0),super(t||_E,e||yE,i),this.maskSprite=s,this.maskMatrix=new Pt}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,i,s){const n=this._maskSprite,o=n._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new mm(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,i,s))}}class xE{constructor(t=null){this.type=$t.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=re.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=$t.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class gm{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let i=e;if(!i.isMaskData){const n=this.maskDataPool.pop()||new xE;n.pooled=!0,n.maskObject=e,i=n}const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(s),i._colorMask=s?s._colorMask:15,i.autoDetect&&this.detect(i),i._target=t,i.type!==$t.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case $t.SCISSOR:this.renderer.scissor.push(i);break;case $t.STENCIL:this.renderer.stencil.push(i);break;case $t.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case $t.COLOR:this.pushColorMask(i);break}i.type===$t.SPRITE&&this.maskStack.push(i)}pop(t){const e=this.maskStack.pop();if(!(!e||e._target!==t)){if(e.enabled)switch(e.type){case $t.SCISSOR:this.renderer.scissor.pop(e);break;case $t.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case $t.SPRITE:this.popSpriteMask(e);break;case $t.COLOR:this.popColorMask(e);break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){const i=this.maskStack[this.maskStack.length-1];i.type===$t.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=$t.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=$t.SCISSOR:t.type=$t.STENCIL:t.type=$t.COLOR}pushSpriteMask(t){const{maskObject:e}=t,i=t._target;let s=t._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex],s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new vE])),s[0].resolution=t.resolution,s[0].multisample=t.multisample,s[0].maskSprite=e;const n=i.filterArea;i.filterArea=e.getBounds(!0),this.renderer.filter.push(i,s),i.filterArea=n,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,i=t._colorMask=e&t.colorMask;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}popColorMask(t){const e=t._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}destroy(){this.renderer=null}}gm.extension={type:z.RendererSystem,name:"mask"};tt.add(gm);class ym{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,i=this.getStackLength();this.maskStack=t;const s=this.getStackLength();s!==i&&(s===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const Id=new Pt,Rd=[],_m=class Gn extends ym{constructor(t){super(t),this.glConst=K.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:i}=t,{renderer:s}=this,n=s.renderTexture,o=i.getBounds(!0,Rd.pop()??new pt);this.roundFrameToPixels(o,n.current?n.current.resolution:s.resolution,n.sourceFrame,n.destinationFrame,s.projection.transform),e&&o.fit(e),t._scissorRectLocal=o}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:i,c:s,d:n}=t;return(Math.abs(i)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(n)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||Gn.isMatrixRotated(e.worldTransform)||Gn.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const i=t._scissorRectLocal;return i.width>0&&i.height>0}roundFrameToPixels(t,e,i,s,n){Gn.isMatrixRotated(n)||(n=n?Id.copyFrom(n):Id.identity(),n.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.renderer.filter.transformAABB(n,t),t.fit(s),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&Rd.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;this.renderer.renderTexture.current?e=t.y:e=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};_m.extension={type:z.RendererSystem,name:"scissor"};let bE=_m;tt.add(bE);class vm extends ym{constructor(t){super(t),this.glConst=K.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:i}=this.renderer,s=t._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++;const n=t._colorMask;n!==0&&(t._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,s,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,n!==0&&(t._colorMask=n,i.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}pop(t){const e=this.renderer.gl;if(this.getStackLength()===0)e.disable(e.STENCIL_TEST);else{const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=i?i._colorMask:15;s!==0&&(i._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(i._colorMask=s,e.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}vm.extension={type:z.RendererSystem,name:"stencil"};tt.add(vm);class xm{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return yt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return yt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return yt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}xm.extension={type:[z.RendererSystem,z.CanvasRendererSystem],name:"_plugin"};tt.add(xm);class bm{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Pt,this.transform=null}update(t,e,i,s){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,s),this.transform&&this.projectionMatrix.append(this.transform);const n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)}calculateProjection(t,e,i,s){const n=this.projectionMatrix,o=s?-1:1;n.identity(),n.a=1/e.width*2,n.d=o*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-o-e.y*n.d}setTransform(t){}destroy(){this.renderer=null}}bm.extension={type:z.RendererSystem,name:"projection"};tt.add(bm);const AE=new Gh,Pd=new pt;class Am{constructor(t){this.renderer=t,this._tempMatrix=new Pt}generateTexture(t,e){const{region:i,...s}=e||{},n=(i==null?void 0:i.copyTo(Pd))||t.getLocalBounds(Pd,!0),o=s.resolution||this.renderer.resolution;n.width=Math.max(n.width,1/o),n.height=Math.max(n.height,1/o),s.width=n.width,s.height=n.height,s.resolution=o,s.multisample??(s.multisample=this.renderer.multisample);const a=ui.create(s);this._tempMatrix.tx=-n.x,this._tempMatrix.ty=-n.y;const l=t.transform;return t.transform=AE,this.renderer.render(t,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=l,a}destroy(){}}Am.extension={type:[z.RendererSystem,z.CanvasRendererSystem],name:"textureGenerator"};tt.add(Am);const Ur=new pt,us=new pt;class Em{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new pt,this.destinationFrame=new pt,this.viewportFrame=new pt}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,e,i){const s=this.renderer;this.current=t;let n,o,a;t?(n=t.baseTexture,a=n.resolution,e||(Ur.width=t.frame.width,Ur.height=t.frame.height,e=Ur),i||(us.x=t.frame.x,us.y=t.frame.y,us.width=e.width,us.height=e.height,i=us),o=n.framebuffer):(a=s.resolution,e||(Ur.width=s._view.screen.width,Ur.height=s._view.screen.height,e=Ur),i||(i=Ur,i.width=e.width,i.height=e.height));const l=this.viewportFrame;l.x=i.x*a,l.y=i.y*a,l.width=i.width*a,l.height=i.height*a,t||(l.y=s.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(i,e,a,!o),t?this.renderer.mask.setMaskStack(n.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)}clear(t,e){const i=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,s=Rt.shared.setValue(t||i);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&s.premultiply(s.alpha);const n=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=n.width!==o.width||n.height!==o.height;if(a){let{x:l,y:h,width:c,height:u}=this.viewportFrame;l=Math.round(l),h=Math.round(h),c=Math.round(c),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,h,c,u)}this.renderer.framebuffer.clear(s.red,s.green,s.blue,s.alpha,e),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}Em.extension={type:z.RendererSystem,name:"renderTexture"};tt.add(Em);class EE{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function TE(r,t){const e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const n=t.getActiveAttrib(r,s);if(n.name.startsWith("gl_"))continue;const o=om(t,n.type),a={type:o,name:n.name,size:nm(o),location:t.getAttribLocation(r,n.name)};e[n.name]=a}return e}function wE(r,t){const e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS);for(let s=0;s<i;s++){const n=t.getActiveUniform(r,s),o=n.name.replace(/\[.*?\]$/,""),a=!!n.name.match(/\[.*?\]$/),l=om(t,n.type);e[o]={name:o,index:s,type:l,size:n.size,isArray:a,value:im(l,n.size)}}return e}function SE(r,t){var a;const e=bd(r,r.VERTEX_SHADER,t.vertexSrc),i=bd(r,r.FRAGMENT_SHADER,t.fragmentSrc),s=r.createProgram();r.attachShader(s,e),r.attachShader(s,i);const n=(a=t.extra)==null?void 0:a.transformFeedbackVaryings;if(n&&(typeof r.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(s,n.names,n.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(s),r.getProgramParameter(s,r.LINK_STATUS)||eE(r,s,e,i),t.attributeData=TE(s,r),t.uniformData=wE(s,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const l=Object.keys(t.attributeData);l.sort((h,c)=>h>c?1:-1);for(let h=0;h<l.length;h++)t.attributeData[l[h]].location=h,r.bindAttribLocation(s,h,l[h]);r.linkProgram(s)}r.deleteShader(e),r.deleteShader(i);const o={};for(const l in t.uniformData){const h=t.uniformData[l];o[l]={location:r.getUniformLocation(s,l),value:im(h.type,h.size)}}return new EE(s,o)}function CE(r,t,e,i,s){e.buffer.update(s)}const IE={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Tm={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function RE(r){const t=r.map(n=>({data:n,offset:0,dataLen:0,dirty:0}));let e=0,i=0,s=0;for(let n=0;n<t.length;n++){const o=t[n];if(e=Tm[o.data.type],o.data.size>1&&(e=Math.max(e,16)*o.data.size),o.dataLen=e,i%e!==0&&i<16){const a=i%e%16;i+=a,s+=a}i+e>16?(s=Math.ceil(s/16)*16,o.offset=s,s+=e,i=e):(o.offset=s,i+=e,s+=e)}return s=Math.ceil(s/16)*16,{uboElements:t,size:s}}function PE(r,t){const e=[];for(const i in r)t[i]&&e.push(t[i]);return e.sort((i,s)=>i.index-s.index),e}function ME(r,t){if(!r.autoManage)return{size:0,syncFunc:CE};const e=PE(r.uniforms,t),{uboElements:i,size:s}=RE(e),n=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<i.length;o++){const a=i[o],l=r.uniforms[a.data.name],h=a.data.name;let c=!1;for(let u=0;u<$i.length;u++){const d=$i[u];if(d.codeUbo&&d.test(a.data,l)){n.push(`offset = ${a.offset/4};`,$i[u].codeUbo(a.data.name,l)),c=!0;break}}if(!c)if(a.data.size>1){const u=nm(a.data.type),d=Math.max(Tm[a.data.type]/16,1),f=u/d,p=(4-f%4)%4;n.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const u=IE[a.data.type];n.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};
                ${u};
                `)}}return n.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",n.join(`
`))}}let BE=0;const bn={textureCount:0,uboCount:0};class wm{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=BE++}systemCheck(){if(!iE())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const i=t.program,s=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(s.program)),e||(bn.textureCount=0,bn.uboCount=0,this.syncUniformGroup(t.uniformGroup,bn)),s}setUniforms(t){const e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)}syncUniformGroup(t,e){const i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))}syncUniforms(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=QA(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;const s=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),s(i.uniformData,t.uniforms,this.renderer,bn,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])}createSyncBufferGroup(t,e,i){const{gl:s}=this.renderer;this.renderer.buffer.bind(t.buffer);const n=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,s.uniformBlockBinding(e.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=ME(t,this.shader.program.uniformData)),t.autoManage){const l=new Float32Array(a.size/4);t.buffer.update(l)}return e.uniformGroups[t.id]=a.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,i){const s=t.uniforms,n=[`${i}-`];for(const o in s)n.push(o),e[o]&&n.push(e[o].type);return n.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,i=t.program,s=SE(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=s,s}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}wm.extension={type:z.RendererSystem,name:"shader"};tt.add(wm);class uo{constructor(t){this.renderer=t}run(t){const{renderer:e}=this;e.runners.init.emit(e.options),t.hello&&console.log(`PixiJS 7.3.3 - ${e.rendererLogId} - https://pixijs.com`),e.resize(e.screen.width,e.screen.height)}destroy(){}}uo.defaultOptions={hello:!1},uo.extension={type:[z.RendererSystem,z.CanvasRendererSystem],name:"startup"};tt.add(uo);function FE(r,t=[]){return t[lt.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[lt.ADD]=[r.ONE,r.ONE],t[lt.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[lt.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[lt.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[lt.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[lt.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[lt.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[lt.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[lt.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[lt.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[lt.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[lt.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[lt.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[lt.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[lt.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[lt.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[lt.NONE]=[0,0],t[lt.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[lt.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[lt.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[lt.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[lt.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[lt.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[lt.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[lt.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[lt.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[lt.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[lt.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[lt.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}const DE=0,OE=1,NE=2,LE=3,kE=4,UE=5,Sm=class Dl{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=lt.NONE,this._blendEq=!1,this.map=[],this.map[DE]=this.setBlend,this.map[OE]=this.setOffset,this.map[NE]=this.setCullFace,this.map[LE]=this.setDepthTest,this.map[kE]=this.setFrontFace,this.map[UE]=this.setDepthMask,this.checks=[],this.defaultState=new qe,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=FE(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,i=0;for(;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e=e>>1,i++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(Dl.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(Dl.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};Sm.extension={type:z.RendererSystem,name:"state"};let GE=Sm;tt.add(GE);class HE extends js{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter(s=>t.systems[s]),i=[...e,...Object.keys(t.systems).filter(s=>!e.includes(s))];for(const s of i)this.addSystem(t.systems[s],s)}addRunners(...t){t.forEach(e=>{this.runners[e]=new we(e)})}addSystem(t,e){const i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(const s in this.runners)this.runners[s].add(i);return this}emitWithCustomOptions(t,e){const i=Object.keys(this._systemsHash);t.items.forEach(s=>{const n=i.find(o=>this._systemsHash[o]===s);s[t.name](e[n])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const ys=class Hn{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=Hn.defaultMaxIdle,this.checkCountMax=Hn.defaultCheckCountMax,this.mode=Hn.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Ph.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let i=!1;for(let s=0;s<e.length;s++){const n=e[s];n.resource&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),e[s]=null,i=!0)}if(i){let s=0;for(let n=0;n<e.length;n++)e[n]!==null&&(e[s++]=e[n]);e.length=s}}unload(t){const e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(let s=t.children.length-1;s>=0;s--)this.unload(t.children[s])}destroy(){this.renderer=null}};ys.defaultMode=Ph.AUTO,ys.defaultMaxIdle=60*60,ys.defaultCheckCountMax=60*10,ys.extension={type:z.RendererSystem,name:"textureGC"};let zr=ys;tt.add(zr);class Ra{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=st.UNSIGNED_BYTE,this.internalFormat=O.RGBA,this.samplerType=0}}function $E(r){let t;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?t={[r.RGB]:q.FLOAT,[r.RGBA]:q.FLOAT,[r.ALPHA]:q.FLOAT,[r.LUMINANCE]:q.FLOAT,[r.LUMINANCE_ALPHA]:q.FLOAT,[r.R8]:q.FLOAT,[r.R8_SNORM]:q.FLOAT,[r.RG8]:q.FLOAT,[r.RG8_SNORM]:q.FLOAT,[r.RGB8]:q.FLOAT,[r.RGB8_SNORM]:q.FLOAT,[r.RGB565]:q.FLOAT,[r.RGBA4]:q.FLOAT,[r.RGB5_A1]:q.FLOAT,[r.RGBA8]:q.FLOAT,[r.RGBA8_SNORM]:q.FLOAT,[r.RGB10_A2]:q.FLOAT,[r.RGB10_A2UI]:q.FLOAT,[r.SRGB8]:q.FLOAT,[r.SRGB8_ALPHA8]:q.FLOAT,[r.R16F]:q.FLOAT,[r.RG16F]:q.FLOAT,[r.RGB16F]:q.FLOAT,[r.RGBA16F]:q.FLOAT,[r.R32F]:q.FLOAT,[r.RG32F]:q.FLOAT,[r.RGB32F]:q.FLOAT,[r.RGBA32F]:q.FLOAT,[r.R11F_G11F_B10F]:q.FLOAT,[r.RGB9_E5]:q.FLOAT,[r.R8I]:q.INT,[r.R8UI]:q.UINT,[r.R16I]:q.INT,[r.R16UI]:q.UINT,[r.R32I]:q.INT,[r.R32UI]:q.UINT,[r.RG8I]:q.INT,[r.RG8UI]:q.UINT,[r.RG16I]:q.INT,[r.RG16UI]:q.UINT,[r.RG32I]:q.INT,[r.RG32UI]:q.UINT,[r.RGB8I]:q.INT,[r.RGB8UI]:q.UINT,[r.RGB16I]:q.INT,[r.RGB16UI]:q.UINT,[r.RGB32I]:q.INT,[r.RGB32UI]:q.UINT,[r.RGBA8I]:q.INT,[r.RGBA8UI]:q.UINT,[r.RGBA16I]:q.INT,[r.RGBA16UI]:q.UINT,[r.RGBA32I]:q.INT,[r.RGBA32UI]:q.UINT,[r.DEPTH_COMPONENT16]:q.FLOAT,[r.DEPTH_COMPONENT24]:q.FLOAT,[r.DEPTH_COMPONENT32F]:q.FLOAT,[r.DEPTH_STENCIL]:q.FLOAT,[r.DEPTH24_STENCIL8]:q.FLOAT,[r.DEPTH32F_STENCIL8]:q.FLOAT}:t={[r.RGB]:q.FLOAT,[r.RGBA]:q.FLOAT,[r.ALPHA]:q.FLOAT,[r.LUMINANCE]:q.FLOAT,[r.LUMINANCE_ALPHA]:q.FLOAT,[r.DEPTH_STENCIL]:q.FLOAT},t}function WE(r){let t;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?t={[st.UNSIGNED_BYTE]:{[O.RGBA]:r.RGBA8,[O.RGB]:r.RGB8,[O.RG]:r.RG8,[O.RED]:r.R8,[O.RGBA_INTEGER]:r.RGBA8UI,[O.RGB_INTEGER]:r.RGB8UI,[O.RG_INTEGER]:r.RG8UI,[O.RED_INTEGER]:r.R8UI,[O.ALPHA]:r.ALPHA,[O.LUMINANCE]:r.LUMINANCE,[O.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[st.BYTE]:{[O.RGBA]:r.RGBA8_SNORM,[O.RGB]:r.RGB8_SNORM,[O.RG]:r.RG8_SNORM,[O.RED]:r.R8_SNORM,[O.RGBA_INTEGER]:r.RGBA8I,[O.RGB_INTEGER]:r.RGB8I,[O.RG_INTEGER]:r.RG8I,[O.RED_INTEGER]:r.R8I},[st.UNSIGNED_SHORT]:{[O.RGBA_INTEGER]:r.RGBA16UI,[O.RGB_INTEGER]:r.RGB16UI,[O.RG_INTEGER]:r.RG16UI,[O.RED_INTEGER]:r.R16UI,[O.DEPTH_COMPONENT]:r.DEPTH_COMPONENT16},[st.SHORT]:{[O.RGBA_INTEGER]:r.RGBA16I,[O.RGB_INTEGER]:r.RGB16I,[O.RG_INTEGER]:r.RG16I,[O.RED_INTEGER]:r.R16I},[st.UNSIGNED_INT]:{[O.RGBA_INTEGER]:r.RGBA32UI,[O.RGB_INTEGER]:r.RGB32UI,[O.RG_INTEGER]:r.RG32UI,[O.RED_INTEGER]:r.R32UI,[O.DEPTH_COMPONENT]:r.DEPTH_COMPONENT24},[st.INT]:{[O.RGBA_INTEGER]:r.RGBA32I,[O.RGB_INTEGER]:r.RGB32I,[O.RG_INTEGER]:r.RG32I,[O.RED_INTEGER]:r.R32I},[st.FLOAT]:{[O.RGBA]:r.RGBA32F,[O.RGB]:r.RGB32F,[O.RG]:r.RG32F,[O.RED]:r.R32F,[O.DEPTH_COMPONENT]:r.DEPTH_COMPONENT32F},[st.HALF_FLOAT]:{[O.RGBA]:r.RGBA16F,[O.RGB]:r.RGB16F,[O.RG]:r.RG16F,[O.RED]:r.R16F},[st.UNSIGNED_SHORT_5_6_5]:{[O.RGB]:r.RGB565},[st.UNSIGNED_SHORT_4_4_4_4]:{[O.RGBA]:r.RGBA4},[st.UNSIGNED_SHORT_5_5_5_1]:{[O.RGBA]:r.RGB5_A1},[st.UNSIGNED_INT_2_10_10_10_REV]:{[O.RGBA]:r.RGB10_A2,[O.RGBA_INTEGER]:r.RGB10_A2UI},[st.UNSIGNED_INT_10F_11F_11F_REV]:{[O.RGB]:r.R11F_G11F_B10F},[st.UNSIGNED_INT_5_9_9_9_REV]:{[O.RGB]:r.RGB9_E5},[st.UNSIGNED_INT_24_8]:{[O.DEPTH_STENCIL]:r.DEPTH24_STENCIL8},[st.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[O.DEPTH_STENCIL]:r.DEPTH32F_STENCIL8}}:t={[st.UNSIGNED_BYTE]:{[O.RGBA]:r.RGBA,[O.RGB]:r.RGB,[O.ALPHA]:r.ALPHA,[O.LUMINANCE]:r.LUMINANCE,[O.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[st.UNSIGNED_SHORT_5_6_5]:{[O.RGB]:r.RGB},[st.UNSIGNED_SHORT_4_4_4_4]:{[O.RGBA]:r.RGBA},[st.UNSIGNED_SHORT_5_5_5_1]:{[O.RGBA]:r.RGBA}},t}class Cm{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new dt,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=WE(t),this.samplerTypes=$E(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let s=0;s<e;s++)this.boundTextures[s]=null;this.emptyTextures={};const i=new Ra(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Ra(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let s=0;s<6;s++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let s=0;s<this.boundTextures.length;s++)this.bind(null,s)}bind(t,e=0){const{gl:i}=this;if(t=t==null?void 0:t.castToBaseTexture(),(t==null?void 0:t.valid)&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const s=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,s.texture)),s.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)):s.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let s=0;s<i.length;s++)i[s]===this.unknownTexture&&this.bind(null,s)}for(let s=0;s<i.length;s++)i[s]===t&&(this.currentLocation!==s&&(e.activeTexture(e.TEXTURE0+s),this.currentLocation=s),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[s]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:i,CONTEXT_UID:s}=this;if(i)for(let n=t-1;n>=0;--n){const o=e[n];o&&o._glTextures[s].samplerType!==q.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const e=new Ra(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){var i;e.internalFormat=((i=this.internalFormats[t.type])==null?void 0:i[t.format])??t.format,e.samplerType=this.samplerTypes[e.internalFormat]??q.FLOAT,this.webGLVersion===2&&t.type===st.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){var s;const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const i=this.renderer;if(this.initTextureType(t,e),(s=t.resource)==null?void 0:s.upload(i,t,e))e.samplerType!==q.FLOAT&&(this.hasIntegerTextures=!0);else{const n=t.realWidth,o=t.realHeight,a=i.gl;(e.width!==n||e.height!==o||e.dirtyId<0)&&(e.width=n,e.height=o,a.texImage2D(t.target,0,e.internalFormat,n,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:i}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const s=this.managedTextures.indexOf(t);s!==-1&&Hi(this.managedTextures,s,1)}}updateTextureStyle(t){var i;const e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===Ye.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=Ir.CLAMP:e.wrapMode=t.wrapMode,(i=t.resource)!=null&&i.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const i=this.gl;if(e.mipmap&&t.mipmap!==Ye.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===sr.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const s=this.renderer.context.extensions.anisotropicFiltering;if(s&&t.anisotropicLevel>0&&t.scaleMode===sr.LINEAR){const n=Math.min(t.anisotropicLevel,i.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,s.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===sr.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===sr.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}}Cm.extension={type:z.RendererSystem,name:"texture"};tt.add(Cm);class Im{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:i}=this,s=t._glTransformFeedbacks[i]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,s)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:i,renderer:s}=this;e&&s.shader.bind(e),i.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:i,CONTEXT_UID:s}=this,n=e.createTransformFeedback();t._glTransformFeedbacks[s]=n,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n);for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];a&&(i.buffer.update(a),a._glBuffers[s].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[s].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),n}disposeTransformFeedback(t,e){const i=t._glTransformFeedbacks[this.CONTEXT_UID],s=this.gl;t.disposeRunner.remove(this);const n=this.renderer.buffer;if(n)for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!e&&n.dispose(a,e))}i&&(e||s.deleteTransformFeedback(i),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Im.extension={type:z.RendererSystem,name:"transformFeedback"};tt.add(Im);class fo{constructor(t){this.renderer=t}init(t){this.screen=new pt(0,0,t.width,t.height),this.element=t.view||K.ADAPTER.createCanvas(),this.resolution=t.resolution||K.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const i=this.element.width/this.resolution,s=this.element.height/this.resolution;this.screen.width=i,this.screen.height=s,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${s}px`),this.renderer.emit("resize",i,s),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var e;t&&((e=this.element.parentNode)==null||e.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}fo.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},fo.extension={type:[z.RendererSystem,z.CanvasRendererSystem],name:"_view"};tt.add(fo);K.PREFER_ENV=hi.WEBGL2;K.STRICT_TEXTURE_CACHE=!1;K.RENDER_OPTIONS={...co.defaultOptions,...ho.defaultOptions,...fo.defaultOptions,...uo.defaultOptions};Object.defineProperties(K,{WRAP_MODE:{get(){return dt.defaultOptions.wrapMode},set(r){yt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),dt.defaultOptions.wrapMode=r}},SCALE_MODE:{get(){return dt.defaultOptions.scaleMode},set(r){yt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),dt.defaultOptions.scaleMode=r}},MIPMAP_TEXTURES:{get(){return dt.defaultOptions.mipmap},set(r){yt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),dt.defaultOptions.mipmap=r}},ANISOTROPIC_LEVEL:{get(){return dt.defaultOptions.anisotropicLevel},set(r){yt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),dt.defaultOptions.anisotropicLevel=r}},FILTER_RESOLUTION:{get(){return yt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),re.defaultResolution},set(r){re.defaultResolution=r}},FILTER_MULTISAMPLE:{get(){return yt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),re.defaultMultisample},set(r){re.defaultMultisample=r}},SPRITE_MAX_TEXTURES:{get(){return Xr.defaultMaxTextures},set(r){yt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Xr.defaultMaxTextures=r}},SPRITE_BATCH_SIZE:{get(){return Xr.defaultBatchSize},set(r){yt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Xr.defaultBatchSize=r}},CAN_UPLOAD_SAME_BUFFER:{get(){return Xr.canUploadSameBuffer},set(r){yt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Xr.canUploadSameBuffer=r}},GC_MODE:{get(){return zr.defaultMode},set(r){yt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),zr.defaultMode=r}},GC_MAX_IDLE:{get(){return zr.defaultMaxIdle},set(r){yt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),zr.defaultMaxIdle=r}},GC_MAX_CHECK_COUNT:{get(){return zr.defaultCheckCountMax},set(r){yt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),zr.defaultCheckCountMax=r}},PRECISION_VERTEX:{get(){return ar.defaultVertexPrecision},set(r){yt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),ar.defaultVertexPrecision=r}},PRECISION_FRAGMENT:{get(){return ar.defaultFragmentPrecision},set(r){yt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),ar.defaultFragmentPrecision=r}}});var ai=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(ai||{});class Pa{constructor(t,e=null,i=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=s}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const Rm=class le{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Pa(null,null,1/0),this.deltaMS=1/le.targetFPMS,this.elapsedMS=1/le.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=ai.NORMAL){return this._addListener(new Pa(t,e,i))}addOnce(t,e,i=ai.NORMAL){return this._addListener(new Pa(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*le.targetFPMS;const i=this._head;let s=i.next;for(;s;)s=s.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,le.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!le._shared){const t=le._shared=new le;t.autoStart=!0,t._protected=!0}return le._shared}static get system(){if(!le._system){const t=le._system=new le;t.autoStart=!0,t._protected=!0}return le._system}};Rm.targetFPMS=.06;let ne=Rm;Object.defineProperties(K,{TARGET_FPMS:{get(){return ne.targetFPMS},set(r){yt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),ne.targetFPMS=r}}});class Pm{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,ai.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?ne.shared:new ne,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}Pm.extension=z.Application;tt.add(Pm);const Mm=[];tt.handleByList(z.Renderer,Mm);function VE(r){for(const t of Mm)if(t.test(r))return new t(r);throw new Error("Unable to auto-detect a suitable renderer.")}var XE=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,zE=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const jE=XE,Bm=zE;class Fm{constructor(t){this.renderer=t}contextChange(t){let e;if(this.renderer.context.webGLVersion===1){const i=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,i)}else{const i=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,i)}e>=Ht.HIGH?this.multisample=Ht.HIGH:e>=Ht.MEDIUM?this.multisample=Ht.MEDIUM:e>=Ht.LOW?this.multisample=Ht.LOW:this.multisample=Ht.NONE}destroy(){}}Fm.extension={type:z.RendererSystem,name:"_multisample"};tt.add(Fm);class YE{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class Dm{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:i}=this,s=t._glBuffers[i]||this.createGLBuffer(t);e.bindBuffer(t.type,s.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:i,CONTEXT_UID:s}=this;if(this.boundBufferBases[e]!==t){const n=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[e]=t,i.bindBufferBase(i.UNIFORM_BUFFER,e,n.buffer)}}bindBufferRange(t,e,i){const{gl:s,CONTEXT_UID:n}=this;i=i||0;const o=t._glBuffers[n]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,e||0,o.buffer,i*256,256)}update(t){const{gl:e,CONTEXT_UID:i}=this,s=t._glBuffers[i]||this.createGLBuffer(t);if(t._updateID!==s.updateID)if(s.updateID=t._updateID,e.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const n=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,n)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const i=t._glBuffers[this.CONTEXT_UID],s=this.gl;t.disposeRunner.remove(this),i&&(e||s.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:i}=this;return t._glBuffers[e]=new YE(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}}Dm.extension={type:z.RendererSystem,name:"buffer"};tt.add(Dm);class Om{constructor(t){this.renderer=t}render(t,e){const i=this.renderer;let s,n,o,a;if(e&&(s=e.renderTexture,n=e.clear,o=e.transform,a=e.skipUpdateTransform),this.renderingToScreen=!s,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=o,!i.context.isLost){if(s||(this.lastObjectRendered=t),!a){const l=t.enableTempParent();t.updateTransform(),t.disableTempParent(l)}i.renderTexture.bind(s),i.batch.currentRenderer.start(),(n??i.background.clearBeforeRender)&&i.renderTexture.clear(),t.render(i),i.batch.currentRenderer.flush(),s&&(e.blit&&i.framebuffer.blit(),s.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}Om.extension={type:z.RendererSystem,name:"objectRenderer"};tt.add(Om);const $n=class Ol extends HE{constructor(t){super(),this.type=Tp.WEBGL,t=Object.assign({},K.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Se({projectionMatrix:new Pt},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Ol.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(yt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=Ol.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t!=null&&t.forceCanvas?!1:yA()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return yt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return yt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return yt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return yt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){yt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return yt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){yt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return yt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};$n.extension={type:z.Renderer,priority:1},$n.__plugins={},$n.__systems={};let $h=$n;tt.handleByMap(z.RendererPlugin,$h.__plugins);tt.handleByMap(z.RendererSystem,$h.__systems);tt.add($h);class Nm extends Xs{constructor(t,e){const{width:i,height:s}=e||{};super(i,s),this.items=[],this.itemDirtyIds=[];for(let n=0;n<t;n++){const o=new dt;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof Xs?this.addResourceAt(t[i],i):this.addResourceAt(tm(t[i],e),i))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const t=this.items.map(e=>e.resource).filter(e=>e).map(e=>e.load());return this._load=Promise.all(t).then(()=>{const{realWidth:e,realHeight:i}=this.items[0];return this.resize(e,i),this.update(),Promise.resolve(this)}),this._load}}class qE extends Nm{constructor(t,e){const{width:i,height:s}=e||{};let n,o;Array.isArray(t)?(n=t,o=t.length):o=t,super(o,{width:i,height:s}),n&&this.initFromArray(n,e)}addBaseTextureAt(t,e){if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=ki.TEXTURE_2D_ARRAY}upload(t,e,i){const{length:s,itemDirtyIds:n,items:o}=this,{gl:a}=t;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,s,0,e.format,i.type,null);for(let l=0;l<s;l++){const h=o[l];n[l]<h.dirtyId&&(n[l]=h.dirtyId,h.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,h.resource.width,h.resource.height,1,e.format,i.type,h.resource.source))}return!0}}class KE extends Fr{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return e&&t instanceof e?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const Lm=class _s extends Nm{constructor(t,e){const{width:i,height:s,autoLoad:n,linkBaseTexture:o}=e||{};if(t&&t.length!==_s.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:i,height:s});for(let a=0;a<_s.SIDES;a++)this.items[a].target=ki.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,t&&this.initFromArray(t,e),n!==!1&&this.load()}bind(t){super.bind(t),t.target=ki.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=ki.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,i){const s=this.itemDirtyIds;for(let n=0;n<_s.SIDES;n++){const o=this.items[n];(s[n]<o.dirtyId||i.dirtyId<e.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(t,o,i),s[n]=o.dirtyId):s[n]<-1&&(t.gl.texImage2D(o.target,0,i.internalFormat,e.realWidth,e.realHeight,0,e.format,i.type,null),s[n]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===_s.SIDES}};Lm.SIDES=6;let ZE=Lm;class Bi extends Fr{constructor(t,e){e=e||{};let i,s,n;typeof t=="string"?(i=Bi.EMPTY,s=t,n=!0):(i=t,s=null,n=!1),super(i),this.url=s,this.crossOrigin=e.crossOrigin??!0,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.ownsImageBitmap=e.ownsImageBitmap??n,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,e)=>{if(this.url===null){t(this);return}try{const i=await K.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const s=await i.blob();if(this.destroyed)return;const n=await createImageBitmap(s,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===se.UNPACK?"premultiply":"none"});if(this.destroyed){n.close();return}this.source=n,this.update(),t(this)}catch(i){if(this.destroyed)return;e(i),this.onError.emit(i)}}),this._load)}upload(t,e,i){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),super.upload(t,e,i)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return Bi._EMPTY=Bi._EMPTY??K.ADAPTER.createCanvas(0,0),Bi._EMPTY}}const Nl=class Wn extends Fr{constructor(t,e){e=e||{},super(K.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.update(),t(this)},Wn.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;Fr.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,i=t.height;if(!e||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let s=e*this.scale,n=i*this.scale;(this._overrideWidth||this._overrideHeight)&&(s=this._overrideWidth||this._overrideHeight/i*e,n=this._overrideHeight||this._overrideWidth/e*i),s=Math.round(s),n=Math.round(n);const o=this.source;o.width=s,o.height=n,o._pixiId=`canvas_${oi()}`,o.getContext("2d").drawImage(t,0,0,e,i,0,0,s,n),this._resolve(),this._resolve=null}}static getSize(t){const e=Wn.SVG_SIZE.exec(t),i={};return e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7]))),i}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return e==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&Wn.SVG_XML.test(t)}};Nl.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,Nl.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let Ll=Nl;const kl=class Ul extends Fr{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const i=document.createElement("video");e.autoLoad!==!1&&i.setAttribute("preload","auto"),e.playsinline!==!1&&(i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","")),e.muted===!0&&(i.setAttribute("muted",""),i.muted=!0),e.loop===!0&&i.setAttribute("loop",""),e.autoPlay!==!1&&i.setAttribute("autoplay",""),typeof t=="string"&&(t=[t]);const s=t[0].src||t[0];Fr.crossOrigin(i,s,e.crossorigin);for(let n=0;n<t.length;++n){const o=document.createElement("source");let{src:a,mime:l}=t[n];if(a=a||t[n],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const h=a.split("?").shift().toLowerCase(),c=h.slice(h.lastIndexOf(".")+1);l=l||Ul.MIME_TYPES[c]||`video/${c}`}o.src=a,l&&(o.type=l),i.appendChild(o)}t=i}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){if(this._updateFPS){const e=ne.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((e,i)=>{this.valid?e(this):(this._resolve=e,this._reject=i,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!e&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._configureAutoUpdate();const t=this.source;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(ne.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(ne.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(ne.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||Ul.TYPES.includes(e)}};kl.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],kl.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let km=kl;wl.push(Bi,hm,KE,km,Ll,ko,ZE,qE);class po{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?pt.EMPTY:(t=t||new pt(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:i,b:s,c:n,d:o,tx:a,ty:l}=t,h=i*e.x+n*e.y+a,c=s*e.x+o*e.y+l;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)}addQuad(t){let e=this.minX,i=this.minY,s=this.maxX,n=this.maxY,o=t[0],a=t[1];e=o<e?o:e,i=a<i?a:i,s=o>s?o:s,n=a>n?a:n,o=t[2],a=t[3],e=o<e?o:e,i=a<i?a:i,s=o>s?o:s,n=a>n?a:n,o=t[4],a=t[5],e=o<e?o:e,i=a<i?a:i,s=o>s?o:s,n=a>n?a:n,o=t[6],a=t[7],e=o<e?o:e,i=a<i?a:i,s=o>s?o:s,n=a>n?a:n,this.minX=e,this.minY=i,this.maxX=s,this.maxY=n}addFrame(t,e,i,s,n){this.addFrameMatrix(t.worldTransform,e,i,s,n)}addFrameMatrix(t,e,i,s,n){const o=t.a,a=t.b,l=t.c,h=t.d,c=t.tx,u=t.ty;let d=this.minX,f=this.minY,p=this.maxX,m=this.maxY,g=o*e+l*i+c,y=a*e+h*i+u;d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,m=y>m?y:m,g=o*s+l*i+c,y=a*s+h*i+u,d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,m=y>m?y:m,g=o*e+l*n+c,y=a*e+h*n+u,d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,m=y>m?y:m,g=o*s+l*n+c,y=a*s+h*n+u,d=g<d?g:d,f=y<f?y:f,p=g>p?g:p,m=y>m?y:m,this.minX=d,this.minY=f,this.maxX=p,this.maxY=m}addVertexData(t,e,i){let s=this.minX,n=this.minY,o=this.maxX,a=this.maxY;for(let l=e;l<i;l+=2){const h=t[l],c=t[l+1];s=h<s?h:s,n=c<n?c:n,o=h>o?h:o,a=c>a?c:a}this.minX=s,this.minY=n,this.maxX=o,this.maxY=a}addVertices(t,e,i,s){this.addVerticesMatrix(t.worldTransform,e,i,s)}addVerticesMatrix(t,e,i,s,n=0,o=n){const a=t.a,l=t.b,h=t.c,c=t.d,u=t.tx,d=t.ty;let f=this.minX,p=this.minY,m=this.maxX,g=this.maxY;for(let y=i;y<s;y+=2){const A=e[y],_=e[y+1],b=a*A+h*_+u,C=c*_+l*A+d;f=Math.min(f,b-n),m=Math.max(m,b+n),p=Math.min(p,C-o),g=Math.max(g,C+o)}this.minX=f,this.minY=p,this.maxX=m,this.maxY=g}addBounds(t){const e=this.minX,i=this.minY,s=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>s?t.maxX:s,this.maxY=t.maxY>n?t.maxY:n}addBoundsMask(t,e){const i=t.minX>e.minX?t.minX:e.minX,s=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=n&&s<=o){const a=this.minX,l=this.minY,h=this.maxX,c=this.maxY;this.minX=i<a?i:a,this.minY=s<l?s:l,this.maxX=n>h?n:h,this.maxY=o>c?o:c}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const i=t.minX>e.x?t.minX:e.x,s=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=n&&s<=o){const a=this.minX,l=this.minY,h=this.maxX,c=this.maxY;this.minX=i<a?i:a,this.minY=s<l?s:l,this.maxX=n>h?n:h,this.maxY=o>c?o:c}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,i,s,n,o){t-=n,e-=o,i+=n,s+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>s?this.maxY:s}}class Nt extends js{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Gh,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new po,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let i=0;i<e.length;++i){const s=e[i];Object.defineProperty(Nt.prototype,s,Object.getOwnPropertyDescriptor(t,s))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new pt),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new pt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new po);const e=this.transform,i=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(i==null?void 0:i.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const s=this._bounds,n=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=s,this._bounds.updateID+=this._boundsID-n,o}toGlobal(t,e,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,i,s){return e&&(t=e.toGlobal(t,i,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,e=0,i=1,s=1,n=0,o=0,a=0,l=0,h=0){return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=s||1,this.rotation=n,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=h,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new QE),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*XA}set angle(t){this.transform.rotation=t*zA}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,e._maskRefCount===0&&(e.renderable=!0,e.isMask=!1))}if(this._mask=t,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount===0&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}}class QE extends Nt{constructor(){super(...arguments),this.sortDirty=null}}Nt.prototype.displayObjectUpdateTransform=Nt.prototype.updateTransform;const JE=new Pt;function tT(r,t){return r.zIndex===t.zIndex?r._lastSortedIndex-t._lastSortedIndex:r.zIndex-t.zIndex}const Um=class Gl extends Nt{constructor(){super(),this.children=[],this.sortableChildren=Gl.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const i=this.getChildIndex(t),s=this.getChildIndex(e);this.children[i]=e,this.children[s]=t,this.onChildrenChange(i<s?i:s)}getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(t);Hi(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],i=this.children.indexOf(e);if(i===-1)return null;e.parent=null,e.transform._parentID=-1,Hi(this.children,i,1),this._boundsID++,this.onChildrenChange(i),e.emit("removed",this),this.emit("childRemoved",e,this,i)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Hi(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const i=t,s=e,n=s-i;let o;if(n>0&&n<=s){o=this.children.splice(i,n);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(n===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,i=this.children.length;e<i;++e){const s=this.children[e];s._lastSortedIndex=e,!t&&s.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(tT),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const i=this.children[t];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(!(!e.visible||!e.renderable))if(e.calculateBounds(),e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const i=super.getLocalBounds(t);if(!e)for(let s=0,n=this.children.length;s<n;++s){const o=this.children[s];o.visible&&o.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let i,s;this.cullArea?(i=this.cullArea,s=this.worldTransform):this._render!==Gl.prototype._render&&(i=this.getBounds(!0));const n=t.projection.transform;if(n&&(s?(s=JE.copyFrom(s),s.prepend(n)):s=n),i&&e.intersects(i,s))this._render(t);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],h=l.cullable;l.cullable=h||!this.cullArea,l.render(t),l.cullable=h}}render(t){var e;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(e=this.filters)!=null&&e.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let i=0,s=this.children.length;i<s;++i)this.children[i].render(t)}}renderAdvanced(t){var n,o,a;const e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<e.length;l++)e[l].enabled&&this._enabledFilters.push(e[l])}const s=e&&((n=this._enabledFilters)==null?void 0:n.length)||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==$t.NONE));if(s&&t.batch.flush(),e&&((o=this._enabledFilters)!=null&&o.length)&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let l=0,h=this.children.length;l<h;++l)this.children[l].render(t)}s&&t.batch.flush(),i&&t.mask.pop(this),e&&((a=this._enabledFilters)!=null&&a.length)&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e=typeof t=="boolean"?t:t==null?void 0:t.children,i=this.removeChildren(0,this.children.length);if(e)for(let s=0;s<i.length;++s)i[s].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;e!==0?this.scale.x=t/e:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;e!==0?this.scale.y=t/e:this.scale.y=1,this._height=t}};Um.defaultSortableChildren=!1;let Ie=Um;Ie.prototype.containerUpdateTransform=Ie.prototype.updateTransform;Object.defineProperties(K,{SORTABLE_CHILDREN:{get(){return Ie.defaultSortableChildren},set(r){yt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Ie.defaultSortableChildren=r}}});const ds=new At,eT=new Uint16Array([0,1,2,0,2,3]);class di extends Ie{constructor(t){super(),this._anchor=new or(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Rt(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=lt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||it.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=eT,this.pluginName="batch",this.isSprite=!0,this._roundPixels=K.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Tr(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Tr(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const e=this.transform.worldTransform,i=e.a,s=e.b,n=e.c,o=e.d,a=e.tx,l=e.ty,h=this.vertexData,c=t.trim,u=t.orig,d=this._anchor;let f=0,p=0,m=0,g=0;if(c?(p=c.x-d._x*u.width,f=p+c.width,g=c.y-d._y*u.height,m=g+c.height):(p=-d._x*u.width,f=p+u.width,g=-d._y*u.height,m=g+u.height),h[0]=i*p+n*g+a,h[1]=o*g+s*p+l,h[2]=i*f+n*g+a,h[3]=o*g+s*f+l,h[4]=i*f+n*m+a,h[5]=o*m+s*f+l,h[6]=i*p+n*m+a,h[7]=o*m+s*p+l,this._roundPixels){const y=K.RESOLUTION;for(let A=0;A<h.length;++A)h[A]=Math.round(h[A]*y)/y}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,e=this.vertexTrimmedData,i=t.orig,s=this._anchor,n=this.transform.worldTransform,o=n.a,a=n.b,l=n.c,h=n.d,c=n.tx,u=n.ty,d=-s._x*i.width,f=d+i.width,p=-s._y*i.height,m=p+i.height;if(e[0]=o*d+l*p+c,e[1]=h*p+a*d+u,e[2]=o*f+l*p+c,e[3]=h*p+a*f+u,e[4]=o*f+l*m+c,e[5]=h*m+a*f+u,e[6]=o*d+l*m+c,e[7]=h*m+a*d+u,this._roundPixels){const g=K.RESOLUTION;for(let y=0;y<e.length;++y)e[y]=Math.round(e[y]*g)/g}}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new po),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new pt),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,ds);const e=this._texture.orig.width,i=this._texture.orig.height,s=-e*this.anchor.x;let n=0;return ds.x>=s&&ds.x<s+e&&(n=-i*this.anchor.y,ds.y>=n&&ds.y<n+i)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const e=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!e)}this._texture=null}static from(t,e){const i=t instanceof it?t:it.from(t,e);return new di(i)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const e=Tr(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const e=Tr(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||it.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const Gm=new Pt;Nt.prototype._cacheAsBitmap=!1;Nt.prototype._cacheData=null;Nt.prototype._cacheAsBitmapResolution=null;Nt.prototype._cacheAsBitmapMultisample=null;class rT{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Nt.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(r){if(this._cacheAsBitmap===r)return;this._cacheAsBitmap=r;let t;r?(this._cacheData||(this._cacheData=new rT),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});Nt.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))};Nt.prototype._initCachedDisplayObject=function(r){var d,f;if((d=this._cacheData)!=null&&d.sprite)return;const t=this.alpha;this.alpha=1,r.batch.flush();const e=this.getLocalBounds(new pt,!0);if((f=this.filters)!=null&&f.length){const p=this.filters[0].padding;e.pad(p)}const i=this.cacheAsBitmapResolution||r.resolution;e.ceil(i),e.width=Math.max(e.width,1/i),e.height=Math.max(e.height,1/i);const s=r.renderTexture.current,n=r.renderTexture.sourceFrame.clone(),o=r.renderTexture.destinationFrame.clone(),a=r.projection.transform,l=ui.create({width:e.width,height:e.height,resolution:i,multisample:this.cacheAsBitmapMultisample??r.multisample}),h=`cacheAsBitmap_${oi()}`;this._cacheData.textureCacheId=h,dt.addToCache(l.baseTexture,h),it.addToCache(l,h);const c=this.transform.localTransform.copyTo(Gm).invert().translate(-e.x,-e.y);this.render=this._cacheData.originalRender,r.render(this,{renderTexture:l,clear:!0,transform:c,skipUpdateTransform:!1}),r.framebuffer.blit(),r.projection.transform=a,r.renderTexture.bind(s,n,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const u=new di(l);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u.alpha=t,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=u.containsPoint.bind(u)};Nt.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))};Nt.prototype._initCachedDisplayObjectCanvas=function(r){var c;if((c=this._cacheData)!=null&&c.sprite)return;const t=this.getLocalBounds(new pt,!0),e=this.alpha;this.alpha=1;const i=r.canvasContext.activeContext,s=r._projTransform,n=this.cacheAsBitmapResolution||r.resolution;t.ceil(n),t.width=Math.max(t.width,1/n),t.height=Math.max(t.height,1/n);const o=ui.create({width:t.width,height:t.height,resolution:n}),a=`cacheAsBitmap_${oi()}`;this._cacheData.textureCacheId=a,dt.addToCache(o.baseTexture,a),it.addToCache(o,a);const l=Gm;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=t.x,l.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),r.canvasContext.activeContext=i,r._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const h=new di(o);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(t.x/t.width),h.anchor.y=-(t.y/t.height),h.alpha=e,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)};Nt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Nt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Nt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,dt.removeFromCache(this._cacheData.textureCacheId),it.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Nt.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)};Nt.prototype.name=null;Ie.prototype.getChildByName=function(r,t){for(let e=0,i=this.children.length;e<i;e++)if(this.children[e].name===r)return this.children[e];if(t)for(let e=0,i=this.children.length;e<i;e++){const s=this.children[e];if(!s.getChildByName)continue;const n=s.getChildByName(r,!0);if(n)return n}return null};Nt.prototype.getGlobalPosition=function(r=new At,t=!1){return this.parent?this.parent.toGlobal(this.position,r,t):(r.x=this.position.x,r.y=this.position.y),r};var iT=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class sT extends re{constructor(t=1){super(jE,iT,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const nT={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},oT=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function aT(r){const t=nT[r],e=t.length;let i=oT,s="";const n="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<r;a++){let l=n.replace("%index%",a.toString());o=a,a>=e&&(o=r-a-1),l=l.replace("%value%",t[o].toString()),s+=l,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",r.toString()),i}const lT=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function hT(r,t){const e=Math.ceil(r/2);let i=lT,s="",n;t?n="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":n="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<r;o++){let a=n.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(e-1)}.0`),s+=a,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",r.toString()),i}class Hl extends re{constructor(t,e=8,i=4,s=re.defaultResolution,n=5){const o=hT(n,t),a=aT(n);super(o,a),this.horizontal=t,this.resolution=s,this._quality=0,this.quality=i,this.blur=e}apply(t,e,i,s){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,e,i,s);else{const n=t.getFilterTexture(),o=t.renderer;let a=e,l=n;this.state.blend=!1,t.applyFilter(this,a,l,ke.CLEAR);for(let h=1;h<this.passes-1;h++){t.bindAndClear(a,ke.BLIT),this.uniforms.uSampler=l;const c=l;l=a,a=c,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,i,s),t.returnFilterTexture(n)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class cT extends re{constructor(t=8,e=4,i=re.defaultResolution,s=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new Hl(!0,t,e,i,s),this.blurYFilter=new Hl(!1,t,e,i,s),this.resolution=i,this.quality=e,this.blur=t,this.repeatEdgePixels=!1}apply(t,e,i,s){const n=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(n&&o){const a=t.getFilterTexture();this.blurXFilter.apply(t,e,a,ke.CLEAR),this.blurYFilter.apply(t,a,i,s),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,e,i,s):this.blurXFilter.apply(t,e,i,s)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var uT=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class $l extends re{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(Bm,uT,t),this.alpha=1}_loadMatrix(t,e=!1){let i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i}_multiply(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t}_colorMatrix(t){const e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){const i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}tint(t,e){const[i,s,n]=Rt.shared.setValue(t).toArray(),o=[i,0,0,0,0,0,s,0,0,0,0,0,n,0,0,0,0,0,1,0];this._loadMatrix(o,e)}greyscale(t,e){const i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}blackAndWhite(t){const e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)}hue(t,e){t=(t||0)/180*Math.PI;const i=Math.cos(t),s=Math.sin(t),n=Math.sqrt,o=1/3,a=n(o),l=i+(1-i)*o,h=o*(1-i)-a*s,c=o*(1-i)+a*s,u=o*(1-i)+a*s,d=i+o*(1-i),f=o*(1-i)-a*s,p=o*(1-i)-a*s,m=o*(1-i)+a*s,g=i+o*(1-i),y=[l,h,c,0,0,u,d,f,0,0,p,m,g,0,0,0,0,0,1,0];this._loadMatrix(y,e)}contrast(t,e){const i=(t||0)+1,s=-.5*(i-1),n=[i,0,0,0,s,0,i,0,0,s,0,0,i,0,s,0,0,0,1,0];this._loadMatrix(n,e)}saturate(t=0,e){const i=t*2/3+1,s=(i-1)*-.5,n=[i,s,s,0,0,s,i,s,0,0,s,s,i,0,0,0,0,0,1,0];this._loadMatrix(n,e)}desaturate(){this.saturate(-1)}negative(t){const e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)}sepia(t){const e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)}technicolor(t){const e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)}polaroid(t){const e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)}toBGR(t){const e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)}kodachrome(t){const e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)}browni(t){const e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)}vintage(t){const e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)}colorTone(t,e,i,s,n){t=t||.2,e=e||.15,i=i||16770432,s=s||3375104;const o=Rt.shared,[a,l,h]=o.setValue(i).toArray(),[c,u,d]=o.setValue(s).toArray(),f=[.3,.59,.11,0,0,a,l,h,t,0,c,u,d,e,0,a-c,l-u,h-d,0,0];this._loadMatrix(f,n)}night(t,e){t=t||.1;const i=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(i,e)}predator(t,e){const i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)}lsd(t){const e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}$l.prototype.grayscale=$l.prototype.greyscale;var dT=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,fT=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class pT extends re{constructor(t,e){const i=new Pt;t.renderable=!1,super(fT,dT,{mapSampler:t._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=i,e==null&&(e=20),this.scale=new At(e,e)}apply(t,e,i,s){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const n=this.maskSprite.worldTransform,o=Math.sqrt(n.a*n.a+n.b*n.b),a=Math.sqrt(n.c*n.c+n.d*n.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=n.a/o,this.uniforms.rotation[1]=n.b/o,this.uniforms.rotation[2]=n.c/a,this.uniforms.rotation[3]=n.d/a),t.applyFilter(this,e,i,s)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var mT=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,gT=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class yT extends re{constructor(){super(gT,mT)}}var _T=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class vT extends re{constructor(t=.5,e=Math.random()){super(Bm,_T,{uNoise:0,uSeed:0}),this.noise=t,this.seed=e}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const Md={AlphaFilter:sT,BlurFilter:cT,BlurFilterPass:Hl,ColorMatrixFilter:$l,DisplacementFilter:pT,FXAAFilter:yT,NoiseFilter:vT};Object.entries(Md).forEach(([r,t])=>{Object.defineProperty(Md,r,{get(){return yt("7.1.0",`filters.${r} has moved to ${r}`),t}})});class xT{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(ne.system.add(this.tickerUpdate,this,ai.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(ne.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Ar=new xT;class qs{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=qs.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new At,this.page=new At,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,i,s,n){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class mo extends qs{constructor(){super(...arguments),this.client=new At,this.movement=new At,this.offset=new At,this.global=new At,this.screen=new At}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,i,s,n,o,a,l,h,c,u,d,f,p,m){throw new Error("Method not implemented.")}}class ve extends mo{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Wi extends mo{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Wi.DOM_DELTA_PIXEL=0,Wi.DOM_DELTA_LINE=1,Wi.DOM_DELTA_PAGE=2;const bT=2048,AT=new At,Ma=new At;class ET{constructor(t){this.dispatch=new js,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((i,s)=>i.priority-s.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let i=0,s=e.length;i<s;i++)e[i].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){Ar.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[i](this.rootTarget,this.rootTarget.eventMode,AT.set(t,e),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(t,e){if(!t.target)return;const i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let s=0,n=i.length-1;s<n;s++)if(t.currentTarget=i[s],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let s=i.length-2;s>=0;s--)if(t.currentTarget=i[s],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,i=this._allInteractiveElements){if(i.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const s=Array.isArray(e)?e:[e];for(let n=i.length-1;n>=0;n--)s.forEach(o=>{t.currentTarget=i[n],this.notifyTarget(t,o)})}propagationPath(t){const e=[t];for(let i=0;i<bT&&t!==this.rootTarget;i++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestMoveRecursive(t,e,i,s,n,o=!1){let a=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Ar.pauseUpdate=!1),t.interactiveChildren&&t.children){const c=t.children;for(let u=c.length-1;u>=0;u--){const d=c[u],f=this.hitTestMoveRecursive(d,this._isInteractive(e)?e:d.eventMode,i,s,n,o||n(t,i));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const p=t.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(t),f.push(t)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}const l=this._isInteractive(e),h=t.isInteractive();return l&&h&&this._allInteractiveElements.push(t),o||this._hitElements.length>0?null:a?this._hitElements:l&&!n(t,i)&&s(t,i)?h?[t]:[]:null}hitTestRecursive(t,e,i,s,n){if(this._interactivePrune(t)||n(t,i))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Ar.pauseUpdate=!1),t.interactiveChildren&&t.children){const l=t.children;for(let h=l.length-1;h>=0;h--){const c=l[h],u=this.hitTestRecursive(c,this._isInteractive(e)?e:c.eventMode,i,s,n);if(u){if(u.length>0&&!u[u.length-1].parent)continue;const d=t.isInteractive();return(u.length>0||d)&&u.push(t),u}}}const o=this._isInteractive(e),a=t.isInteractive();return o&&s(t,i)?a?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,e){var i;if(t.hitArea&&(t.worldTransform.applyInverse(e,Ma),!t.hitArea.contains(Ma.x,Ma.y)))return!0;if(t._mask){const s=t._mask.isMaskData?t._mask.maskObject:t._mask;if(s&&!((i=s.containsPoint)!=null&&i.call(s,e)))return!0}return!1}hitTestFn(t,e){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(e):!1}notifyTarget(t,e){var n,o;e=e??t.type;const i=`on${e}`;(o=(n=t.currentTarget)[i])==null||o.call(n,t);const s=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,s),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof ve)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),e.pointerType==="touch")this.dispatchEvent(e,"touchstart");else if(e.pointerType==="mouse"||e.pointerType==="pen"){const s=e.button===2;this.dispatchEvent(e,s?"rightdown":"mousedown")}const i=this.trackingData(t.pointerId);i.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){var l,h;if(!(t instanceof ve)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const e=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const i=e.pointerType==="mouse"||e.pointerType==="pen",s=this.trackingData(t.pointerId),n=this.findMountedTarget(s.overTargets);if(((l=s.overTargets)==null?void 0:l.length)>0&&n!==e.target){const c=t.type==="mousemove"?"mouseout":"pointerout",u=this.createPointerEvent(t,c,n);if(this.dispatchEvent(u,"pointerout"),i&&this.dispatchEvent(u,"mouseout"),!e.composedPath().includes(n)){const d=this.createPointerEvent(t,"pointerleave",n);for(d.eventPhase=d.AT_TARGET;d.target&&!e.composedPath().includes(d.target);)d.currentTarget=d.target,this.notifyTarget(d),i&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(u)}if(n!==e.target){const c=t.type==="mousemove"?"mouseover":"pointerover",u=this.clonePointerEvent(e,c);this.dispatchEvent(u,"pointerover"),i&&this.dispatchEvent(u,"mouseover");let d=n==null?void 0:n.parent;for(;d&&d!==this.rootTarget.parent&&d!==e.target;)d=d.parent;if(!d||d===this.rootTarget.parent){const f=this.clonePointerEvent(e,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==n&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),i&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(u)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(e,"pointermove"),a&&o.push("globalpointermove"),e.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(e,"touchmove"),a&&o.push("globaltouchmove")),i&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(e,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(h=e.target)==null?void 0:h.cursor),o.length>0&&this.all(e,o),this._allInteractiveElements.length=0,this._hitElements.length=0,s.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){var o;if(!(t instanceof ve)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),i=this.createPointerEvent(t),s=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),s&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(o=i.target)==null?void 0:o.cursor);const n=this.clonePointerEvent(i,"pointerenter");for(n.eventPhase=n.AT_TARGET;n.target&&n.target!==this.rootTarget.parent;)n.currentTarget=n.target,this.notifyTarget(n),s&&this.notifyTarget(n,"mouseenter"),n.target=n.target.parent;e.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(n)}mapPointerOut(t){if(!(t instanceof ve)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId);if(e.overTargets){const i=t.pointerType==="mouse"||t.pointerType==="pen",s=this.findMountedTarget(e.overTargets),n=this.createPointerEvent(t,"pointerout",s);this.dispatchEvent(n),i&&this.dispatchEvent(n,"mouseout");const o=this.createPointerEvent(t,"pointerleave",s);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;e.overTargets=null,this.freeEvent(n),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof ve)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=performance.now(),i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const a=i.button===2;this.dispatchEvent(i,a?"rightup":"mouseup")}const s=this.trackingData(t.pointerId),n=this.findMountedTarget(s.pressTargetsByButton[t.button]);let o=n;if(n&&!i.composedPath().includes(n)){let a=n;for(;a&&!i.composedPath().includes(a);){if(i.currentTarget=a,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const l=i.button===2;this.notifyTarget(i,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete s.pressTargetsByButton[t.button],o=a}if(o){const a=this.clonePointerEvent(i,"click");a.target=o,a.path=null,s.clicksByButton[t.button]||(s.clicksByButton[t.button]={clickCount:0,target:a.target,timeStamp:e});const l=s.clicksByButton[t.button];if(l.target===a.target&&e-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=e,a.detail=l.clickCount,a.pointerType==="mouse"){const h=a.button===2;this.dispatchEvent(a,h?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(i)}mapPointerUpOutside(t){if(!(t instanceof ve)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),i=this.findMountedTarget(e.pressTargetsByButton[t.button]),s=this.createPointerEvent(t);if(i){let n=i;for(;n;)s.currentTarget=n,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"?this.notifyTarget(s,"touchendoutside"):(s.pointerType==="mouse"||s.pointerType==="pen")&&this.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),n=n.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(s)}mapWheel(t){if(!(t instanceof Wi)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let i=1;i<t.length&&t[i].parent===e;i++)e=t[i];return e}createPointerEvent(t,e,i){const s=this.allocateEvent(ve);return this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.nativeEvent=t.nativeEvent,s.originalEvent=t,s.target=i??this.hitTest(s.global.x,s.global.y)??this._hitElements[0],typeof e=="string"&&(s.type=e),s}createWheelEvent(t){const e=this.allocateEvent(Wi);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const i=this.allocateEvent(ve);return i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice(),i.type=e??i.type,i}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof ve&&e instanceof ve&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof mo&&e instanceof mo&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.shiftKey=t.shiftKey,e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}notifyListeners(t,e){const i=t.currentTarget._events[e];if(i&&t.currentTarget.isInteractive())if("fn"in i)i.once&&t.currentTarget.removeListener(e,i.fn,void 0,!0),i.fn.call(i.context,t);else for(let s=0,n=i.length;s<n&&!t.propagationImmediatelyStopped;s++)i[s].once&&t.currentTarget.removeListener(e,i[s].fn,void 0,!0),i[s].fn.call(i[s].context,t)}}const TT=1,wT={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Wl=class Vl{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new ET(null),Ar.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new ve(null),this.rootWheelEvent=new Wi(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Vl.defaultEventFeatures},{set:(e,i,s)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=s),e[i]=s,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:e,resolution:i}=this.renderer;this.setTargetElement(e),this.resolution=i,Vl._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const i=this.cursorStyles[t];if(i)switch(typeof i){case"string":e&&(this.domElement.style.cursor=i);break;case"function":i(t);break;case"object":e&&Object.assign(this.domElement.style,i);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this.rootPointerEvent}onPointerDown(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let i=0,s=e.length;i<s;i++){const n=e[i],o=this.bootstrapEvent(this.rootPointerEvent,n);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Ar.pointerMoved();const e=this.normalizeToPointerData(t);for(let i=0,s=e.length;i<s;i++){const n=this.bootstrapEvent(this.rootPointerEvent,e[i]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const i=e!==this.domElement?"outside":"",s=this.normalizeToPointerData(t);for(let n=0,o=s.length;n<o;n++){const a=this.bootstrapEvent(this.rootPointerEvent,s[n]);a.type+=i,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this.normalizeToPointerData(t);for(let i=0,s=e.length;i<s;i++){const n=this.bootstrapEvent(this.rootPointerEvent,e[i]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,Ar.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Ar.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Ar.removeTickerListener();const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,i){const s=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},n=1/this.resolution;t.x=(e-s.left)*(this.domElement.width/s.width)*n,t.y=(i-s.top)*(this.domElement.height/s.height)*n}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let i=0,s=t.changedTouches.length;i<s;i++){const n=t.changedTouches[i];typeof n.button>"u"&&(n.button=0),typeof n.buttons>"u"&&(n.buttons=1),typeof n.isPrimary>"u"&&(n.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof n.width>"u"&&(n.width=n.radiusX||1),typeof n.height>"u"&&(n.height=n.radiusY||1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="touch"),typeof n.pointerId>"u"&&(n.pointerId=n.identifier||0),typeof n.pressure>"u"&&(n.pressure=n.force||.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),typeof n.layerX>"u"&&(n.layerX=n.offsetX=n.clientX),typeof n.layerY>"u"&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,n.type=t.type,e.push(n)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const i=t;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=TT),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,e.push(i)}else e.push(t);return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=wT[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};Wl.extension={name:"events",type:[z.RendererSystem,z.CanvasRendererSystem]},Wl.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let Xl=Wl;tt.add(Xl);function Bd(r){return r==="dynamic"||r==="static"}const ST={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??Bd(Xl.defaultEventMode)},set interactive(r){yt("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=r,this.eventMode=r?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Xl.defaultEventMode},set eventMode(r){this._internalInteractive=Bd(r),this._internalEventMode=r},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(r,t,e){const i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,s=typeof t=="function"?void 0:t;r=i?`${r}capture`:r,t=typeof t=="function"?t:t.handleEvent,this.on(r,t,s)},removeEventListener(r,t,e){const i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,s=typeof t=="function"?void 0:t;r=i?`${r}capture`:r,t=typeof t=="function"?t:t.handleEvent,this.off(r,t,s)},dispatchEvent(r){if(!(r instanceof qs))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};Nt.mixin(ST);const CT={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Nt.mixin(CT);const IT=9,An=100,RT=0,PT=0,Fd=2,Dd=1,MT=-1e3,BT=-1e3,FT=2;class Hm{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(nr.tablet||nr.phone)&&this.createTouchHook();const e=document.createElement("div");e.style.width=`${An}px`,e.style.height=`${An}px`,e.style.position="absolute",e.style.top=`${RT}px`,e.style.left=`${PT}px`,e.style.zIndex=Fd.toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${Dd}px`,t.style.height=`${Dd}px`,t.style.position="absolute",t.style.top=`${MT}px`,t.style.left=`${BT}px`,t.style.zIndex=FT.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)==null||t.appendChild(this.div))}deactivate(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)==null||t.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const e=t.children;if(e)for(let i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}update(){const t=performance.now();if(nr.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:e,y:i,width:s,height:n}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,h=s/o*l,c=n/a*l;let u=this.div;u.style.left=`${e}px`,u.style.top=`${i}px`,u.style.width=`${o}px`,u.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const f=this.children[d];if(f.renderId!==this.renderId)f._accessibleActive=!1,Hi(this.children,d,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,d--;else{u=f._accessibleDiv;let p=f.hitArea;const m=f.worldTransform;f.hitArea?(u.style.left=`${(m.tx+p.x*m.a)*h}px`,u.style.top=`${(m.ty+p.y*m.d)*c}px`,u.style.width=`${p.width*m.a*h}px`,u.style.height=`${p.height*m.d*c}px`):(p=f.getBounds(),this.capHitArea(p),u.style.left=`${p.x*h}px`,u.style.top=`${p.y*c}px`,u.style.width=`${p.width*h}px`,u.style.height=`${p.height*c}px`,u.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(u.title=f.accessibleTitle),u.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&u.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==u.title||f.tabIndex!==u.tabIndex)&&(u.title=f.accessibleTitle,u.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(u))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:e,height:i}=this.renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>i&&(t.height=i-t.y)}addChild(t){let e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=`${An}px`,e.style.height=`${An}px`,e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=Fd.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,e){const{displayObject:i}=t.target,s=this.renderer.events.rootBoundary,n=Object.assign(new qs(s),{target:i});s.rootTarget=this.renderer.lastObjectRendered,e.forEach(o=>s.dispatchEvent(n,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===IT&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}Hm.extension={name:"accessibility",type:[z.RendererPlugin,z.CanvasRendererPlugin]};tt.add(Hm);const $m=class zl{constructor(t){this.stage=new Ie,t=Object.assign({forceCanvas:!1},t),this.renderer=VE(t),zl._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){var t;return(t=this.renderer)==null?void 0:t.view}get screen(){var t;return(t=this.renderer)==null?void 0:t.screen}destroy(t,e){const i=zl._plugins.slice(0);i.reverse(),i.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};$m._plugins=[];let Wm=$m;tt.handleByList(z.Application,Wm._plugins);class Vm{static init(t){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let e,i;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:s,clientHeight:n}=this._resizeTo;e=s,i=n}this.renderer.resize(e,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Vm.extension=z.Application;tt.add(Vm);const Od={loader:z.LoadParser,resolver:z.ResolveParser,cache:z.CacheParser,detection:z.DetectionParser};tt.handle(z.Asset,r=>{const t=r.ref;Object.entries(Od).filter(([e])=>!!t[e]).forEach(([e,i])=>tt.add(Object.assign(t[e],{extension:t[e].extension??i})))},r=>{const t=r.ref;Object.keys(Od).filter(e=>!!t[e]).forEach(e=>tt.remove(t[e]))});class DT{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<e;i++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function is(r,t){if(Array.isArray(t)){for(const e of t)if(r.startsWith(`data:${e}`))return!0;return!1}return r.startsWith(`data:${t}`)}function Or(r,t){const e=r.split("?")[0],i=Wt.extname(e).toLowerCase();return Array.isArray(t)?t.includes(i):i===t}const be=(r,t,e=!1)=>(Array.isArray(r)||(r=[r]),t?r.map(i=>typeof i=="string"||e?t(i):i):r),jl=(r,t)=>{const e=t.split("?")[1];return e&&(r+=`?${e}`),r};function Xm(r,t,e,i,s){const n=t[e];for(let o=0;o<n.length;o++){const a=n[o];e<t.length-1?Xm(r.replace(i[e],a),t,e+1,i,s):s.push(r.replace(i[e],a))}}function OT(r){const t=/\{(.*?)\}/g,e=r.match(t),i=[];if(e){const s=[];e.forEach(n=>{const o=n.substring(1,n.length-1).split(",");s.push(o)}),Xm(r,s,0,e,i)}else i.push(r);return i}const go=r=>!Array.isArray(r);class NT{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=be(t);let s;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(e)){s=l.getCacheableAssets(i,e);break}}s||(s={},i.forEach(a=>{s[a]=e}));const n=Object.keys(s),o={cacheKeys:n,keys:i};if(i.forEach(a=>{this._cacheMap.set(a,o)}),n.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==e&&console.warn("[Cache] already has key:",a),this._cache.set(a,s[a])}),e instanceof it){const a=e;i.forEach(l=>{a.baseTexture!==it.EMPTY.baseTexture&&dt.addToCache(a.baseTexture,l),it.addToCache(a,l)})}}remove(t){if(!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(i=>{this._cache.delete(i)}),e.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const Kr=new NT;class LT{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,i)=>(this._parsersValidated=!1,t[e]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const i={promise:null,parser:null};return i.promise=(async()=>{var o,a;let s=null,n=null;if(e.loadParser&&(n=this._parserHash[e.loadParser],n||console.warn(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!n){for(let l=0;l<this.parsers.length;l++){const h=this.parsers[l];if(h.load&&((o=h.test)!=null&&o.call(h,t,e,this))){n=h;break}}if(!n)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=await n.load(t,e,this),i.parser=n;for(let l=0;l<this.parsers.length;l++){const h=this.parsers[l];h.parse&&h.parse&&await((a=h.testParse)==null?void 0:a.call(h,s,e,this))&&(s=await h.parse(s,e,this)||s,i.parser=h)}return s})(),i}async load(t,e){this._parsersValidated||this._validateParsers();let i=0;const s={},n=go(t),o=be(t,h=>({alias:[h],src:h})),a=o.length,l=o.map(async h=>{const c=Wt.toAbsolute(h.src);if(!s[h.src])try{this.promiseCache[c]||(this.promiseCache[c]=this._getLoadPromiseAndParser(c,h)),s[h.src]=await this.promiseCache[c].promise,e&&e(++i/a)}catch(u){throw delete this.promiseCache[c],delete s[h.src],new Error(`[Loader.load] Failed to load ${c}.
${u}`)}});return await Promise.all(l),n?s[o[0].src]:s}async unload(t){const e=be(t,i=>({alias:[i],src:i})).map(async i=>{var o,a;const s=Wt.toAbsolute(i.src),n=this.promiseCache[s];if(n){const l=await n.promise;delete this.promiseCache[s],(a=(o=n.parser)==null?void 0:o.unload)==null||a.call(o,l,i,this)}});await Promise.all(e)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(t[e.name]&&console.warn(`[Assets] loadParser name conflict "${e.name}"`),{...t,[e.name]:e}),{})}}var Re=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(Re||{});const kT=".json",UT="application/json",GT={extension:{type:z.LoadParser,priority:Re.Low},name:"loadJson",test(r){return is(r,UT)||Or(r,kT)},async load(r){return await(await K.ADAPTER.fetch(r)).json()}};tt.add(GT);const HT=".txt",$T="text/plain",WT={name:"loadTxt",extension:{type:z.LoadParser,priority:Re.Low},test(r){return is(r,$T)||Or(r,HT)},async load(r){return await(await K.ADAPTER.fetch(r)).text()}};tt.add(WT);const VT=["normal","bold","100","200","300","400","500","600","700","800","900"],XT=[".ttf",".otf",".woff",".woff2"],zT=["font/ttf","font/otf","font/woff","font/woff2"],jT=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function YT(r){const t=Wt.extname(r),e=Wt.basename(r,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1));let i=e.length>0;for(const n of e)if(!n.match(jT)){i=!1;break}let s=e.join(" ");return i||(s=`"${s.replace(/[\\"]/g,"\\$&")}"`),s}const qT=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function KT(r){return qT.test(r)?r:encodeURI(r)}const ZT={extension:{type:z.LoadParser,priority:Re.Low},name:"loadWebFont",test(r){return is(r,zT)||Or(r,XT)},async load(r,t){var i,s,n;const e=K.ADAPTER.getFontFaceSet();if(e){const o=[],a=((i=t.data)==null?void 0:i.family)??YT(r),l=((n=(s=t.data)==null?void 0:s.weights)==null?void 0:n.filter(c=>VT.includes(c)))??["normal"],h=t.data??{};for(let c=0;c<l.length;c++){const u=l[c],d=new FontFace(a,`url(${KT(r)})`,{...h,weight:u});await d.load(),e.add(d),o.push(d)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){(Array.isArray(r)?r:[r]).forEach(t=>K.ADAPTER.getFontFaceSet().delete(t))}};tt.add(ZT);let Nd=0,Ba;const QT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",JT={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${QT}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},tw={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let Fa;class ew{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const e=URL.createObjectURL(new Blob([JT.code],{type:"application/javascript"})),i=new Worker(e);i.addEventListener("message",s=>{i.terminate(),URL.revokeObjectURL(e),t(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Ba===void 0&&(Ba=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<Ba&&(Fa||(Fa=URL.createObjectURL(new Blob([tw.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(Fa),t.addEventListener("message",e=>{this.complete(e.data),this.returnWorker(e.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const i=new Promise((s,n)=>{this.queue.push({id:t,arguments:e,resolve:s,reject:n})});return this.next(),i}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const e=this.queue.pop(),i=e.id;this.resolveHash[Nd]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:Nd++,id:i})}}const Ld=new ew;function Ks(r,t,e){r.resource.internal=!0;const i=new it(r),s=()=>{delete t.promiseCache[e],Kr.has(e)&&Kr.remove(e)};return i.baseTexture.once("destroyed",()=>{e in t.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),s())}),i.once("destroyed",()=>{r.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),s())}),i}const rw=[".jpeg",".jpg",".png",".webp",".avif"],iw=["image/jpeg","image/png","image/webp","image/avif"];async function sw(r){const t=await K.ADAPTER.fetch(r);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${t.status} ${t.statusText}`);const e=await t.blob();return await createImageBitmap(e)}const Wo={name:"loadTextures",extension:{type:z.LoadParser,priority:Re.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return is(r,iw)||Or(r,rw)},async load(r,t,e){var a;const i=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let s;i?this.config.preferWorkers&&await Ld.isImageBitmapSupported()?s=await Ld.loadImageBitmap(r):s=await sw(r):s=await new Promise((l,h)=>{const c=new Image;c.crossOrigin=this.config.crossOrigin,c.src=r,c.complete?l(c):(c.onload=()=>l(c),c.onerror=u=>h(u))});const n={...t.data};n.resolution??(n.resolution=cr(r)),i&&((a=n.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(n.resourceOptions={...n.resourceOptions},n.resourceOptions.ownsImageBitmap=!0);const o=new dt(s,n);return o.resource.src=r,Ks(o,e,r)},unload(r){r.destroy(!0)}};tt.add(Wo);const nw=".svg",ow="image/svg+xml",aw={extension:{type:z.LoadParser,priority:Re.High},name:"loadSVG",test(r){return is(r,ow)||Or(r,nw)},async testParse(r){return Ll.test(r)},async parse(r,t,e){var n;const i=new Ll(r,(n=t==null?void 0:t.data)==null?void 0:n.resourceOptions);await i.load();const s=new dt(i,{resolution:cr(r),...t==null?void 0:t.data});return s.resource.src=t.src,Ks(s,e,t.src)},async load(r,t){return(await K.ADAPTER.fetch(r)).text()},unload:Wo.unload};tt.add(aw);const lw=[".mp4",".m4v",".webm",".ogv"],hw=["video/mp4","video/webm","video/ogg"],cw={name:"loadVideo",extension:{type:z.LoadParser,priority:Re.High},config:{defaultAutoPlay:!0},test(r){return is(r,hw)||Or(r,lw)},async load(r,t,e){var o;let i;const s=await(await K.ADAPTER.fetch(r)).blob(),n=URL.createObjectURL(s);try{const a={autoPlay:this.config.defaultAutoPlay,...(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions},l=new km(n,a);await l.load();const h=new dt(l,{alphaMode:await gA(),resolution:cr(r),...t==null?void 0:t.data});h.resource.src=r,i=Ks(h,e,r),i.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(n)})}catch(a){throw URL.revokeObjectURL(n),a}return i},unload(r){r.destroy(!0)}};tt.add(cw);class uw{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}getAlias(t){const{alias:e,name:i,src:s,srcs:n}=t;return be(e||i||s||n,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const i=[];Array.isArray(e)?e.forEach(s=>{const n=s.src??s.srcs,o=s.alias??s.name;let a;if(typeof o=="string"){const l=this._createBundleAssetId(t,o);i.push(l),a=[o,l]}else{const l=o.map(h=>this._createBundleAssetId(t,h));i.push(...l),a=[...o,...l]}this.add({...s,alias:a,src:n})}):Object.keys(e).forEach(s=>{const n=[s,this._createBundleAssetId(t,s)];if(typeof e[s]=="string")this.add({alias:n,src:e[s]});else if(Array.isArray(e[s]))this.add({alias:n,src:e[s]});else{const o=e[s],a=o.src??o.srcs;this.add({...o,alias:n,src:Array.isArray(a)?a:[a]})}i.push(...n)}),this._bundles[t]=i}add(t,e,i,s,n){const o=[];typeof t=="string"||Array.isArray(t)&&typeof t[0]=="string"?(yt("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:t,src:e,data:i,format:s,loadParser:n})):Array.isArray(t)?o.push(...t):o.push(t);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},be(o).forEach(l=>{const{src:h,srcs:c}=l;let{data:u,format:d,loadParser:f}=l;const p=be(h||c).map(y=>typeof y=="string"?OT(y):Array.isArray(y)?y:[y]),m=this.getAlias(l);Array.isArray(m)?m.forEach(a):a(m);const g=[];p.forEach(y=>{y.forEach(A=>{let _={};if(typeof A!="object"){_.src=A;for(let b=0;b<this._parsers.length;b++){const C=this._parsers[b];if(C.test(A)){_=C.parse(A);break}}}else u=A.data??u,d=A.format??d,f=A.loadParser??f,_={..._,...A};if(!m)throw new Error(`[Resolver] alias is undefined for this asset: ${_.src}`);_=this.buildResolvedAsset(_,{aliases:m,data:u,format:d,loadParser:f}),g.push(_)})}),m.forEach(y=>{this._assetMap[y]=g})})}resolveBundle(t){const e=go(t);t=be(t);const i={};return t.forEach(s=>{const n=this._bundles[s];if(n){const o=this.resolve(n),a={};for(const l in o){const h=o[l];a[this._extractAssetIdFromBundle(s,l)]=h}i[s]=a}}),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const i={};for(const s in e)i[s]=e[s].src;return i}return e.src}resolve(t){const e=go(t);t=be(t);const i={};return t.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let n=this._assetMap[s];const o=n[0],a=this._getPreferredOrder(n);a==null||a.priority.forEach(l=>{a.params[l].forEach(h=>{const c=n.filter(u=>u[l]?u[l]===h:!1);c.length&&(n=c)})}),this._resolverHash[s]=n[0]??o}else this._resolverHash[s]=this.buildResolvedAsset({alias:[s],src:s},{});i[s]=this._resolverHash[s]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const i=t[0],s=this._preferredOrder.find(n=>n.params.format.includes(i.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}buildResolvedAsset(t,e){const{aliases:i,data:s,loadParser:n,format:o}=e;return(this._basePath||this._rootPath)&&(t.src=Wt.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...s||{},...t.data},t.loadParser=n??t.loadParser,t.format=o??Wt.extname(t.src).slice(1),t.srcs=t.src,t.name=t.alias,t}}class dw{constructor(){this._detections=[],this._initialized=!1,this.resolver=new uw,this.loader=new LT,this.cache=Kr,this._backgroundLoader=new DT(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var n,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let a=t.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const e=((n=t.texturePreference)==null?void 0:n.resolution)??1,i=typeof e=="number"?[e]:e,s=await this._detectFormats({preferredFormats:(o=t.texturePreference)==null?void 0:o.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:s,resolution:i}}),t.preferences&&this.setPreferences(t.preferences)}add(t,e,i,s,n){this.resolver.add(t,e,i,s,n)}async load(t,e){this._initialized||await this.init();const i=go(t),s=be(t).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(h=>!this.resolver.hasKey(h))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),n=this.resolver.resolve(s),o=await this._mapLoadToResolve(n,e);return i?o[s[0]]:o}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let i=!1;typeof t=="string"&&(i=!0,t=[t]);const s=this.resolver.resolveBundle(t),n={},o=Object.keys(s);let a=0,l=0;const h=()=>{e==null||e(++a/l)},c=o.map(u=>{const d=s[u];return l+=Object.keys(d).length,this._mapLoadToResolve(d,h).then(f=>{n[u]=f})});return await Promise.all(c),i?n[t[0]]:n}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Kr.get(t);const e={};for(let i=0;i<t.length;i++)e[i]=Kr.get(t[i]);return e}async _mapLoadToResolve(t,e){const i=Object.values(t),s=Object.keys(t);this._backgroundLoader.active=!1;const n=await this.loader.load(i,e);this._backgroundLoader.active=!0;const o={};return i.forEach((a,l)=>{const h=n[a.src],c=[a.src];a.alias&&c.push(...a.alias),o[s[l]]=h,Kr.set(c,h)}),o}async unload(t){this._initialized||await this.init();const e=be(t).map(s=>typeof s!="string"?s.src:s),i=this.resolver.resolve(e);await this._unloadFromResolved(i)}async unloadBundle(t){this._initialized||await this.init(),t=be(t);const e=this.resolver.resolveBundle(t),i=Object.keys(e).map(s=>this._unloadFromResolved(e[s]));await Promise.all(i)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(i=>{Kr.remove(i.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const i of t.detections)t.skipDetections||await i.test()?e=await i.add(e):t.skipDetections||(e=await i.remove(e));return e=e.filter((i,s)=>e.indexOf(i)===s),e}get detections(){return this._detections}get preferWorkers(){return Wo.config.preferWorkers}set preferWorkers(t){yt("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(i=>i in t).forEach(i=>{e.config[i]=t[i]})})}}const En=new dw;tt.handleByList(z.LoadParser,En.loader.parsers).handleByList(z.ResolveParser,En.resolver.parsers).handleByList(z.CacheParser,En.cache.parsers).handleByList(z.DetectionParser,En.detections);const fw={extension:z.CacheParser,test:r=>Array.isArray(r)&&r.every(t=>t instanceof it),getCacheableAssets:(r,t)=>{const e={};return r.forEach(i=>{t.forEach((s,n)=>{e[i+(n===0?"":n+1)]=s})}),e}};tt.add(fw);async function zm(r){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(r)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const pw={extension:{type:z.DetectionParser,priority:1},test:async()=>zm("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(t=>t!=="avif")};tt.add(pw);const mw={extension:{type:z.DetectionParser,priority:0},test:async()=>zm("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(t=>t!=="webp")};tt.add(mw);const kd=["png","jpg","jpeg"],gw={extension:{type:z.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...kd],remove:async r=>r.filter(t=>!kd.includes(t))};tt.add(gw);const yw="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Wh(r){return yw?!1:document.createElement("video").canPlayType(r)!==""}const _w={extension:{type:z.DetectionParser,priority:0},test:async()=>Wh("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(t=>t!=="webm")};tt.add(_w);const vw={extension:{type:z.DetectionParser,priority:0},test:async()=>Wh("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(t=>t!=="mp4"&&t!=="m4v")};tt.add(vw);const xw={extension:{type:z.DetectionParser,priority:0},test:async()=>Wh("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(t=>t!=="ogv")};tt.add(xw);const bw={extension:z.ResolveParser,test:Wo.test,parse:r=>{var t;return{resolution:parseFloat(((t=K.RETINA_PREFIX.exec(r))==null?void 0:t[1])??"1"),format:Wt.extname(r).slice(1),src:r}}};tt.add(bw);var ce=(r=>(r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",r))(ce||{});const yo={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1};let Je,Ci;function Ud(){Ci={s3tc:Je.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Je.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Je.getExtension("WEBGL_compressed_texture_etc"),etc1:Je.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Je.getExtension("WEBGL_compressed_texture_pvrtc")||Je.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Je.getExtension("WEBGL_compressed_texture_atc"),astc:Je.getExtension("WEBGL_compressed_texture_astc")}}const Aw={extension:{type:z.DetectionParser,priority:2},test:async()=>{const r=K.ADAPTER.createCanvas().getContext("webgl");return r?(Je=r,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async r=>{Ci||Ud();const t=[];for(const e in Ci)Ci[e]&&t.push(e);return[...t,...r]},remove:async r=>(Ci||Ud(),r.filter(t=>!(t in Ci)))};tt.add(Aw);class Ew extends ko{constructor(t,e={width:1,height:1,autoLoad:!0}){let i,s;typeof t=="string"?(i=t,s=new Uint8Array):(i=null,s=t),super(s,e),this.origin=i,this.buffer=s?new Tl(s):null,this._load=null,this.loaded=!1,this.origin!==null&&e.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new Tl(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class ii extends Ew{constructor(t,e){super(t,e),this.format=e.format,this.levels=e.levels||1,this._width=e.width,this._height=e.height,this._extension=ii._formatToExtension(this.format),(e.levelBuffers||this.buffer)&&(this._levelBuffers=e.levelBuffers||ii._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,e,i){const s=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;s.pixelStorei(s.UNPACK_ALIGNMENT,4);for(let n=0,o=this.levels;n<o;n++){const{levelID:a,levelWidth:l,levelHeight:h,levelBuffer:c}=this._levelBuffers[n];s.compressedTexImage2D(s.TEXTURE_2D,a,this.format,l,h,0,c)}return!0}onBlobLoaded(){this._levelBuffers=ii._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,e,i,s,n,o,a){const l=new Array(i);let h=t.byteOffset,c=o,u=a,d=c+s-1&~(s-1),f=u+n-1&~(n-1),p=d*f*yo[e];for(let m=0;m<i;m++)l[m]={levelID:m,levelWidth:i>1?c:d,levelHeight:i>1?u:f,levelBuffer:new Uint8Array(t.buffer,h,p)},h+=p,c=c>>1||1,u=u>>1||1,d=c+s-1&~(s-1),f=u+n-1&~(n-1),p=d*f*yo[e];return l}}const Da=4,Tn=124,Tw=32,Gd=20,ww=542327876,wn={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},Sw={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Sn={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},Cw=1,Iw=2,Rw=4,Pw=64,Mw=512,Bw=131072,Fw=827611204,Dw=861165636,Ow=894720068,Nw=808540228,Lw=4,kw={[Fw]:ce.COMPRESSED_RGBA_S3TC_DXT1_EXT,[Dw]:ce.COMPRESSED_RGBA_S3TC_DXT3_EXT,[Ow]:ce.COMPRESSED_RGBA_S3TC_DXT5_EXT},Uw={70:ce.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:ce.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:ce.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:ce.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:ce.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:ce.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:ce.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:ce.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:ce.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function Gw(r){const t=new Uint32Array(r);if(t[0]!==ww)throw new Error("Invalid DDS file magic word");const e=new Uint32Array(r,0,Tn/Uint32Array.BYTES_PER_ELEMENT),i=e[wn.HEIGHT],s=e[wn.WIDTH],n=e[wn.MIPMAP_COUNT],o=new Uint32Array(r,wn.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,Tw/Uint32Array.BYTES_PER_ELEMENT),a=o[Cw];if(a&Rw){const l=o[Sw.FOURCC];if(l!==Nw){const A=kw[l],_=Da+Tn,b=new Uint8Array(r,_);return[new ii(b,{format:A,width:s,height:i,levels:n})]}const h=Da+Tn,c=new Uint32Array(t.buffer,h,Gd/Uint32Array.BYTES_PER_ELEMENT),u=c[Sn.DXGI_FORMAT],d=c[Sn.RESOURCE_DIMENSION],f=c[Sn.MISC_FLAG],p=c[Sn.ARRAY_SIZE],m=Uw[u];if(m===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${u}`);if(f===Lw)throw new Error("DDSParser does not support cubemap textures");if(d===6)throw new Error("DDSParser does not supported 3D texture data");const g=new Array,y=Da+Tn+Gd;if(p===1)g.push(new Uint8Array(r,y));else{const A=yo[m];let _=0,b=s,C=i;for(let P=0;P<n;P++){const I=Math.max(1,b+3&-4),W=Math.max(1,C+3&-4),Z=I*W*A;_+=Z,b=b>>>1,C=C>>>1}let N=y;for(let P=0;P<p;P++)g.push(new Uint8Array(r,N,_)),N+=_}return g.map(A=>new ii(A,{format:m,width:s,height:i,levels:n}))}throw a&Pw?new Error("DDSParser does not support uncompressed texture data."):a&Mw?new Error("DDSParser does not supported YUV uncompressed texture data."):a&Bw?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&Iw?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const Hd=[171,75,84,88,32,49,49,187,13,10,26,10],Hw=67305985,ye={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Yl=64,$d={[st.UNSIGNED_BYTE]:1,[st.UNSIGNED_SHORT]:2,[st.INT]:4,[st.UNSIGNED_INT]:4,[st.FLOAT]:4,[st.HALF_FLOAT]:8},$w={[O.RGBA]:4,[O.RGB]:3,[O.RG]:2,[O.RED]:1,[O.LUMINANCE]:1,[O.LUMINANCE_ALPHA]:2,[O.ALPHA]:1},Ww={[st.UNSIGNED_SHORT_4_4_4_4]:2,[st.UNSIGNED_SHORT_5_5_5_1]:2,[st.UNSIGNED_SHORT_5_6_5]:2};function Vw(r,t,e=!1){const i=new DataView(t);if(!Xw(r,i))return null;const s=i.getUint32(ye.ENDIANNESS,!0)===Hw,n=i.getUint32(ye.GL_TYPE,s),o=i.getUint32(ye.GL_FORMAT,s),a=i.getUint32(ye.GL_INTERNAL_FORMAT,s),l=i.getUint32(ye.PIXEL_WIDTH,s),h=i.getUint32(ye.PIXEL_HEIGHT,s)||1,c=i.getUint32(ye.PIXEL_DEPTH,s)||1,u=i.getUint32(ye.NUMBER_OF_ARRAY_ELEMENTS,s)||1,d=i.getUint32(ye.NUMBER_OF_FACES,s),f=i.getUint32(ye.NUMBER_OF_MIPMAP_LEVELS,s),p=i.getUint32(ye.BYTES_OF_KEY_VALUE_DATA,s);if(h===0||c!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(u!==1)throw new Error("WebGL does not support array textures");const m=4,g=4,y=l+3&-4,A=h+3&-4,_=new Array(u);let b=l*h;n===0&&(b=y*A);let C;if(n!==0?$d[n]?C=$d[n]*$w[o]:C=Ww[n]:C=yo[a],C===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const N=e?jw(i,p,s):null;let P=b*C,I=l,W=h,Z=y,ct=A,H=Yl+p;for(let T=0;T<f;T++){const F=i.getUint32(H,s);let J=H+4;for(let Q=0;Q<u;Q++){let $=_[Q];$||($=_[Q]=new Array(f)),$[T]={levelID:T,levelWidth:f>1||n!==0?I:Z,levelHeight:f>1||n!==0?W:ct,levelBuffer:new Uint8Array(t,J,P)},J+=P}H+=F+4,H=H%4!==0?H+4-H%4:H,I=I>>1||1,W=W>>1||1,Z=I+m-1&~(m-1),ct=W+g-1&~(g-1),P=Z*ct*C}return n!==0?{uncompressed:_.map(T=>{let F=T[0].levelBuffer,J=!1;return n===st.FLOAT?F=new Float32Array(T[0].levelBuffer.buffer,T[0].levelBuffer.byteOffset,T[0].levelBuffer.byteLength/4):n===st.UNSIGNED_INT?(J=!0,F=new Uint32Array(T[0].levelBuffer.buffer,T[0].levelBuffer.byteOffset,T[0].levelBuffer.byteLength/4)):n===st.INT&&(J=!0,F=new Int32Array(T[0].levelBuffer.buffer,T[0].levelBuffer.byteOffset,T[0].levelBuffer.byteLength/4)),{resource:new ko(F,{width:T[0].levelWidth,height:T[0].levelHeight}),type:n,format:J?zw(o):o}}),kvData:N}:{compressed:_.map(T=>new ii(null,{format:a,width:l,height:h,levels:f,levelBuffers:T})),kvData:N}}function Xw(r,t){for(let e=0;e<Hd.length;e++)if(t.getUint8(e)!==Hd[e])return console.error(`${r} is not a valid *.ktx file!`),!1;return!0}function zw(r){switch(r){case O.RGBA:return O.RGBA_INTEGER;case O.RGB:return O.RGB_INTEGER;case O.RG:return O.RG_INTEGER;case O.RED:return O.RED_INTEGER;default:return r}}function jw(r,t,e){const i=new Map;let s=0;for(;s<t;){const n=r.getUint32(Yl+s,e),o=Yl+s+4,a=3-(n+3)%4;if(n===0||n>t-s){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<n&&r.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const h=new TextDecoder().decode(new Uint8Array(r.buffer,o,l)),c=new DataView(r.buffer,o+l+1,n-l-1);i.set(h,c),s+=4+n+a}return i}const Yw={extension:{type:z.LoadParser,priority:Re.High},name:"loadDDS",test(r){return Or(r,".dds")},async load(r,t,e){const i=await(await K.ADAPTER.fetch(r)).arrayBuffer(),s=Gw(i).map(n=>{const o=new dt(n,{mipmap:Ye.OFF,alphaMode:se.NO_PREMULTIPLIED_ALPHA,resolution:cr(r),...t.data});return Ks(o,e,r)});return s.length===1?s[0]:s},unload(r){Array.isArray(r)?r.forEach(t=>t.destroy(!0)):r.destroy(!0)}};tt.add(Yw);const qw={extension:{type:z.LoadParser,priority:Re.High},name:"loadKTX",test(r){return Or(r,".ktx")},async load(r,t,e){const i=await(await K.ADAPTER.fetch(r)).arrayBuffer(),{compressed:s,uncompressed:n,kvData:o}=Vw(r,i),a=s??n,l={mipmap:Ye.OFF,alphaMode:se.NO_PREMULTIPLIED_ALPHA,resolution:cr(r),...t.data},h=a.map(c=>{a===n&&Object.assign(l,{type:c.type,format:c.format});const u=c.resource??c,d=new dt(u,l);return d.ktxKeyValueData=o,Ks(d,e,r)});return h.length===1?h[0]:h},unload(r){Array.isArray(r)?r.forEach(t=>t.destroy(!0)):r.destroy(!0)}};tt.add(qw);const Kw={extension:z.ResolveParser,test:r=>{const t=Wt.extname(r).slice(1);return["basis","ktx","dds"].includes(t)},parse:r=>{var e,i;const t=Wt.extname(r).slice(1);if(t==="ktx"){const s=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(s.some(n=>r.endsWith(n)))return{resolution:parseFloat(((e=K.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:s.find(n=>r.endsWith(n)),src:r}}return{resolution:parseFloat(((i=K.RETINA_PREFIX.exec(r))==null?void 0:i[1])??"1"),format:t,src:r}}};tt.add(Kw);const Cn=new pt,Zw=4,jm=class vs{constructor(t){this.renderer=t,this._rendererPremultipliedAlpha=!1}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}async image(t,e,i,s){const n=new Image;return n.src=await this.base64(t,e,i,s),n}async base64(t,e,i,s){const n=this.canvas(t,s);if(n.toBlob!==void 0)return new Promise((o,a)=>{n.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}const h=new FileReader;h.onload=()=>o(h.result),h.onerror=a,h.readAsDataURL(l)},e,i)});if(n.toDataURL!==void 0)return n.toDataURL(e,i);if(n.convertToBlob!==void 0){const o=await n.convertToBlob({type:e,quality:i});return new Promise((a,l)=>{const h=new FileReader;h.onload=()=>a(h.result),h.onerror=l,h.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t,e){const{pixels:i,width:s,height:n,flipY:o,premultipliedAlpha:a}=this._rawPixels(t,e);o&&vs._flipY(i,s,n),a&&vs._unpremultiplyAlpha(i);const l=new BA(s,n,1),h=new ImageData(new Uint8ClampedArray(i.buffer),s,n);return l.context.putImageData(h,0,0),l.canvas}pixels(t,e){const{pixels:i,width:s,height:n,flipY:o,premultipliedAlpha:a}=this._rawPixels(t,e);return o&&vs._flipY(i,s,n),a&&vs._unpremultiplyAlpha(i),i}_rawPixels(t,e){const i=this.renderer;if(!i)throw new Error("The Extract has already been destroyed");let s,n=!1,o=!1,a,l=!1;t&&(t instanceof ui?a=t:(a=i.generateTexture(t,{region:e,resolution:i.resolution,multisample:i.multisample}),l=!0,e&&(Cn.width=e.width,Cn.height=e.height,e=Cn)));const h=i.gl;if(a){if(s=a.baseTexture.resolution,e=e??a.frame,n=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===O.RGBA,!l){i.renderTexture.bind(a);const f=a.framebuffer.glFramebuffers[i.CONTEXT_UID];f.blitFramebuffer&&i.framebuffer.bind(f.blitFramebuffer)}}else s=i.resolution,e||(e=Cn,e.width=i.width/s,e.height=i.height/s),n=!0,o=this._rendererPremultipliedAlpha,i.renderTexture.bind();const c=Math.max(Math.round(e.width*s),1),u=Math.max(Math.round(e.height*s),1),d=new Uint8Array(Zw*c*u);return h.readPixels(Math.round(e.x*s),Math.round(e.y*s),c,u,h.RGBA,h.UNSIGNED_BYTE,d),l&&(a==null||a.destroy(!0)),{pixels:d,width:c,height:u,flipY:n,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(t,e,i){const s=e<<2,n=i>>1,o=new Uint8Array(s);for(let a=0;a<n;a++){const l=a*s,h=(i-a-1)*s;o.set(t.subarray(l,l+s)),t.copyWithin(l,h,h+s),t.set(o,h)}}static _unpremultiplyAlpha(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const e=t.length;for(let i=0;i<e;i+=4){const s=t[i+3];if(s!==0){const n=255.001/s;t[i]=t[i]*n+.5,t[i+1]=t[i+1]*n+.5,t[i+2]=t[i+2]*n+.5}}}};jm.extension={name:"extract",type:z.RendererSystem};let Qw=jm;tt.add(Qw);const _o={build(r){const t=r.points;let e,i,s,n,o,a;if(r.type===Yt.CIRC){const p=r.shape;e=p.x,i=p.y,o=a=p.radius,s=n=0}else if(r.type===Yt.ELIP){const p=r.shape;e=p.x,i=p.y,o=p.width,a=p.height,s=n=0}else{const p=r.shape,m=p.width/2,g=p.height/2;e=p.x+m,i=p.y+g,o=a=Math.max(0,Math.min(p.radius,Math.min(m,g))),s=m-o,n=g-a}if(!(o>=0&&a>=0&&s>=0&&n>=0)){t.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),h=l*8+(s?4:0)+(n?4:0);if(t.length=h,h===0)return;if(l===0){t.length=8,t[0]=t[6]=e+s,t[1]=t[3]=i+n,t[2]=t[4]=e-s,t[5]=t[7]=i-n;return}let c=0,u=l*4+(s?2:0)+2,d=u,f=h;{const p=s+o,m=n,g=e+p,y=e-p,A=i+m;if(t[c++]=g,t[c++]=A,t[--u]=A,t[--u]=y,n){const _=i-m;t[d++]=y,t[d++]=_,t[--f]=_,t[--f]=g}}for(let p=1;p<l;p++){const m=Math.PI/2*(p/l),g=s+Math.cos(m)*o,y=n+Math.sin(m)*a,A=e+g,_=e-g,b=i+y,C=i-y;t[c++]=A,t[c++]=b,t[--u]=b,t[--u]=_,t[d++]=_,t[d++]=C,t[--f]=C,t[--f]=A}{const p=s,m=n+a,g=e+p,y=e-p,A=i+m,_=i-m;t[c++]=g,t[c++]=A,t[--f]=_,t[--f]=g,s&&(t[c++]=y,t[c++]=A,t[--f]=_,t[--f]=y)}},triangulate(r,t){const e=r.points,i=t.points,s=t.indices;if(e.length===0)return;let n=i.length/2;const o=n;let a,l;if(r.type!==Yt.RREC){const c=r.shape;a=c.x,l=c.y}else{const c=r.shape;a=c.x+c.width/2,l=c.y+c.height/2}const h=r.matrix;i.push(r.matrix?h.a*a+h.c*l+h.tx:a,r.matrix?h.b*a+h.d*l+h.ty:l),n++,i.push(e[0],e[1]);for(let c=2;c<e.length;c+=2)i.push(e[c],e[c+1]),s.push(n++,o,n);s.push(o+1,o,n)}};function Wd(r,t=!1){const e=r.length;if(e<6)return;let i=0;for(let s=0,n=r[e-2],o=r[e-1];s<e;s+=2){const a=r[s],l=r[s+1];i+=(a-n)*(l+o),n=a,o=l}if(!t&&i>0||t&&i<=0){const s=e/2;for(let n=s+s%2;n<e;n+=2){const o=e-n-2,a=e-n-1,l=n,h=n+1;[r[o],r[l]]=[r[l],r[o]],[r[a],r[h]]=[r[h],r[a]]}}}const Ym={build(r){r.points=r.shape.points.slice()},triangulate(r,t){let e=r.points;const i=r.holes,s=t.points,n=t.indices;if(e.length>=6){Wd(e,!1);const o=[];for(let h=0;h<i.length;h++){const c=i[h];Wd(c.points,!0),o.push(e.length/2),e=e.concat(c.points)}const a=jx(e,o,2);if(!a)return;const l=s.length/2;for(let h=0;h<a.length;h+=3)n.push(a[h]+l),n.push(a[h+1]+l),n.push(a[h+2]+l);for(let h=0;h<e.length;h++)s.push(e[h])}}},Jw={build(r){const t=r.shape,e=t.x,i=t.y,s=t.width,n=t.height,o=r.points;o.length=0,s>=0&&n>=0&&o.push(e,i,e+s,i,e+s,i+n,e,i+n)},triangulate(r,t){const e=r.points,i=t.points;if(e.length===0)return;const s=i.length/2;i.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(s,s+1,s+2,s+1,s+2,s+3)}},tS={build(r){_o.build(r)},triangulate(r,t){_o.triangulate(r,t)}};var ue=(r=>(r.MITER="miter",r.BEVEL="bevel",r.ROUND="round",r))(ue||{}),wr=(r=>(r.BUTT="butt",r.ROUND="round",r.SQUARE="square",r))(wr||{});const Qi={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(r,t=20){if(!this.adaptive||!r||isNaN(r))return t;let e=Math.ceil(r/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}};class Vd{static curveTo(t,e,i,s,n,o){const a=o[o.length-2],l=o[o.length-1]-e,h=a-t,c=s-e,u=i-t,d=Math.abs(l*u-h*c);if(d<1e-8||n===0)return(o[o.length-2]!==t||o[o.length-1]!==e)&&o.push(t,e),null;const f=l*l+h*h,p=c*c+u*u,m=l*c+h*u,g=n*Math.sqrt(f)/d,y=n*Math.sqrt(p)/d,A=g*m/f,_=y*m/p,b=g*u+y*h,C=g*c+y*l,N=h*(y+A),P=l*(y+A),I=u*(g+_),W=c*(g+_),Z=Math.atan2(P-C,N-b),ct=Math.atan2(W-C,I-b);return{cx:b+t,cy:C+e,radius:n,startAngle:Z,endAngle:ct,anticlockwise:h*c>u*l}}static arc(t,e,i,s,n,o,a,l,h){const c=a-o,u=Qi._segmentsCount(Math.abs(c)*n,Math.ceil(Math.abs(c)/lo)*40),d=c/(u*2),f=d*2,p=Math.cos(d),m=Math.sin(d),g=u-1,y=g%1/g;for(let A=0;A<=g;++A){const _=A+y*A,b=d+o+f*_,C=Math.cos(b),N=-Math.sin(b);h.push((p*C+m*N)*n+i,(p*-N+m*C)*n+s)}}}class eS{constructor(){this.reset()}begin(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Vh{static curveLength(t,e,i,s,n,o,a,l){let h=0,c=0,u=0,d=0,f=0,p=0,m=0,g=0,y=0,A=0,_=0,b=t,C=e;for(let N=1;N<=10;++N)c=N/10,u=c*c,d=u*c,f=1-c,p=f*f,m=p*f,g=m*t+3*p*c*i+3*f*u*n+d*a,y=m*e+3*p*c*s+3*f*u*o+d*l,A=b-g,_=C-y,b=g,C=y,h+=Math.sqrt(A*A+_*_);return h}static curveTo(t,e,i,s,n,o,a){const l=a[a.length-2],h=a[a.length-1];a.length-=2;const c=Qi._segmentsCount(Vh.curveLength(l,h,t,e,i,s,n,o));let u=0,d=0,f=0,p=0,m=0;a.push(l,h);for(let g=1,y=0;g<=c;++g)y=g/c,u=1-y,d=u*u,f=d*u,p=y*y,m=p*y,a.push(f*l+3*d*y*t+3*u*p*i+m*n,f*h+3*d*y*e+3*u*p*s+m*o)}}function Xd(r,t,e,i,s,n,o,a){const l=r-e*s,h=t-i*s,c=r+e*n,u=t+i*n;let d,f;o?(d=i,f=-e):(d=-i,f=e);const p=l+d,m=h+f,g=c+d,y=u+f;return a.push(p,m,g,y),2}function Gr(r,t,e,i,s,n,o,a){const l=e-r,h=i-t;let c=Math.atan2(l,h),u=Math.atan2(s-r,n-t);a&&c<u?c+=Math.PI*2:!a&&c>u&&(u+=Math.PI*2);let d=c;const f=u-c,p=Math.abs(f),m=Math.sqrt(l*l+h*h),g=(15*p*Math.sqrt(m)/Math.PI>>0)+1,y=f/g;if(d+=y,a){o.push(r,t,e,i);for(let A=1,_=d;A<g;A++,_+=y)o.push(r,t,r+Math.sin(_)*m,t+Math.cos(_)*m);o.push(r,t,s,n)}else{o.push(e,i,r,t);for(let A=1,_=d;A<g;A++,_+=y)o.push(r+Math.sin(_)*m,t+Math.cos(_)*m,r,t);o.push(s,n,r,t)}return g*2}function rS(r,t){const e=r.shape;let i=r.points||e.points.slice();const s=t.closePointEps;if(i.length===0)return;const n=r.lineStyle,o=new At(i[0],i[1]),a=new At(i[i.length-2],i[i.length-1]),l=e.type!==Yt.POLY||e.closeStroke,h=Math.abs(o.x-a.x)<s&&Math.abs(o.y-a.y)<s;if(l){i=i.slice(),h&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));const $=(o.x+a.x)*.5,j=(a.y+o.y)*.5;i.unshift($,j),i.push($,j)}const c=t.points,u=i.length/2;let d=i.length;const f=c.length/2,p=n.width/2,m=p*p,g=n.miterLimit*n.miterLimit;let y=i[0],A=i[1],_=i[2],b=i[3],C=0,N=0,P=-(A-b),I=y-_,W=0,Z=0,ct=Math.sqrt(P*P+I*I);P/=ct,I/=ct,P*=p,I*=p;const H=n.alignment,T=(1-H)*2,F=H*2;l||(n.cap===wr.ROUND?d+=Gr(y-P*(T-F)*.5,A-I*(T-F)*.5,y-P*T,A-I*T,y+P*F,A+I*F,c,!0)+2:n.cap===wr.SQUARE&&(d+=Xd(y,A,P,I,T,F,!0,c))),c.push(y-P*T,A-I*T,y+P*F,A+I*F);for(let $=1;$<u-1;++$){y=i[($-1)*2],A=i[($-1)*2+1],_=i[$*2],b=i[$*2+1],C=i[($+1)*2],N=i[($+1)*2+1],P=-(A-b),I=y-_,ct=Math.sqrt(P*P+I*I),P/=ct,I/=ct,P*=p,I*=p,W=-(b-N),Z=_-C,ct=Math.sqrt(W*W+Z*Z),W/=ct,Z/=ct,W*=p,Z*=p;const j=_-y,wt=A-b,k=_-C,L=N-b,ht=j*k+wt*L,xt=wt*k-L*j,bt=xt<0;if(Math.abs(xt)<.001*Math.abs(ht)){c.push(_-P*T,b-I*T,_+P*F,b+I*F),ht>=0&&(n.join===ue.ROUND?d+=Gr(_,b,_-P*T,b-I*T,_-W*T,b-Z*T,c,!1)+4:d+=2,c.push(_-W*F,b-Z*F,_+W*T,b+Z*T));continue}const Bt=(-P+y)*(-I+b)-(-P+_)*(-I+A),gt=(-W+C)*(-Z+b)-(-W+_)*(-Z+N),S=(j*gt-k*Bt)/xt,G=(L*Bt-wt*gt)/xt,D=(S-_)*(S-_)+(G-b)*(G-b),Y=_+(S-_)*T,nt=b+(G-b)*T,v=_-(S-_)*F,x=b-(G-b)*F,E=Math.min(j*j+wt*wt,k*k+L*L),w=bt?T:F,R=E+w*w*m,M=D<=R;let X=n.join;if(X===ue.MITER&&D/m>g&&(X=ue.BEVEL),M)switch(X){case ue.MITER:{c.push(Y,nt,v,x);break}case ue.BEVEL:{bt?c.push(Y,nt,_+P*F,b+I*F,Y,nt,_+W*F,b+Z*F):c.push(_-P*T,b-I*T,v,x,_-W*T,b-Z*T,v,x),d+=2;break}case ue.ROUND:{bt?(c.push(Y,nt,_+P*F,b+I*F),d+=Gr(_,b,_+P*F,b+I*F,_+W*F,b+Z*F,c,!0)+4,c.push(Y,nt,_+W*F,b+Z*F)):(c.push(_-P*T,b-I*T,v,x),d+=Gr(_,b,_-P*T,b-I*T,_-W*T,b-Z*T,c,!1)+4,c.push(_-W*T,b-Z*T,v,x));break}}else{switch(c.push(_-P*T,b-I*T,_+P*F,b+I*F),X){case ue.MITER:{bt?c.push(v,x,v,x):c.push(Y,nt,Y,nt),d+=2;break}case ue.ROUND:{bt?d+=Gr(_,b,_+P*F,b+I*F,_+W*F,b+Z*F,c,!0)+2:d+=Gr(_,b,_-P*T,b-I*T,_-W*T,b-Z*T,c,!1)+2;break}}c.push(_-W*T,b-Z*T,_+W*F,b+Z*F),d+=2}}y=i[(u-2)*2],A=i[(u-2)*2+1],_=i[(u-1)*2],b=i[(u-1)*2+1],P=-(A-b),I=y-_,ct=Math.sqrt(P*P+I*I),P/=ct,I/=ct,P*=p,I*=p,c.push(_-P*T,b-I*T,_+P*F,b+I*F),l||(n.cap===wr.ROUND?d+=Gr(_-P*(T-F)*.5,b-I*(T-F)*.5,_-P*T,b-I*T,_+P*F,b+I*F,c,!1)+2:n.cap===wr.SQUARE&&(d+=Xd(_,b,P,I,T,F,!1,c)));const J=t.indices,Q=Qi.epsilon*Qi.epsilon;for(let $=f;$<d+f-2;++$)y=c[$*2],A=c[$*2+1],_=c[($+1)*2],b=c[($+1)*2+1],C=c[($+2)*2],N=c[($+2)*2+1],!(Math.abs(y*(b-N)+_*(N-A)+C*(A-b))<Q)&&J.push($,$+1,$+2)}function iS(r,t){let e=0;const i=r.shape,s=r.points||i.points,n=i.type!==Yt.POLY||i.closeStroke;if(s.length===0)return;const o=t.points,a=t.indices,l=s.length/2,h=o.length/2;let c=h;for(o.push(s[0],s[1]),e=1;e<l;e++)o.push(s[e*2],s[e*2+1]),a.push(c,c+1),c++;n&&a.push(c,h)}function zd(r,t){r.lineStyle.native?iS(r,t):rS(r,t)}class Xh{static curveLength(t,e,i,s,n,o){const a=t-2*i+n,l=e-2*s+o,h=2*i-2*t,c=2*s-2*e,u=4*(a*a+l*l),d=4*(a*h+l*c),f=h*h+c*c,p=2*Math.sqrt(u+d+f),m=Math.sqrt(u),g=2*u*m,y=2*Math.sqrt(f),A=d/m;return(g*p+m*d*(p-y)+(4*f*u-d*d)*Math.log((2*m+A+p)/(A+y)))/(4*g)}static curveTo(t,e,i,s,n){const o=n[n.length-2],a=n[n.length-1],l=Qi._segmentsCount(Xh.curveLength(o,a,t,e,i,s));let h=0,c=0;for(let u=1;u<=l;++u){const d=u/l;h=o+(t-o)*d,c=a+(e-a)*d,n.push(h+(t+(i-t)*d-h)*d,c+(e+(s-e)*d-c)*d)}}}const Oa={[Yt.POLY]:Ym,[Yt.CIRC]:_o,[Yt.ELIP]:_o,[Yt.RECT]:Jw,[Yt.RREC]:tS},jd=[],In=[];class vo{constructor(t,e=null,i=null,s=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=s,this.type=t.type}clone(){return new vo(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const bi=new At,qm=class Km extends em{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new po,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),In.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),jd.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,i=null,s=null){const n=new vo(t,e,i,s);return this.graphicsData.push(n),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const i=new vo(t,null,null,e),s=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=s.lineStyle,s.holes.push(i),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let i=0;i<e.length;++i){const s=e[i];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(t,bi):bi.copyFrom(t),s.shape.contains(bi.x,bi.y))){let n=!1;if(s.holes){for(let o=0;o<s.holes.length;o++)if(s.holes[o].shape.contains(bi.x,bi.y)){n=!0;break}}if(!n)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let i=null,s=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],s=i.style);for(let l=this.shapeIndex;l<e.length;l++){this.shapeIndex++;const h=e[l],c=h.fillStyle,u=h.lineStyle;Oa[h.type].build(h),h.matrix&&this.transformPoints(h.points,h.matrix),(c.visible||u.visible)&&this.processHoles(h.holes);for(let d=0;d<2;d++){const f=d===0?c:u;if(!f.visible)continue;const p=f.texture.baseTexture,m=this.indices.length,g=this.points.length/2;p.wrapMode=Ir.REPEAT,d===0?this.processFill(h):this.processLine(h);const y=this.points.length/2-g;y!==0&&(i&&!this._compareStyles(s,f)&&(i.end(m,g),i=null),i||(i=jd.pop()||new eS,i.begin(f,m,g),this.batches.push(i),s=f),this.addUvs(this.points,t,f.texture,g,y,f.matrix))}}const n=this.indices.length,o=this.points.length/2;if(i&&i.end(n,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const i=this.graphicsData[t],s=i.fillStyle,n=i.lineStyle;if(s&&!s.texture.baseTexture.valid||n&&!n.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,i=t.length;e<i;e++){const s=t[e];for(let n=0;n<s.size;n++){const o=s.start+n;this.indicesUint16[o]=this.indicesUint16[o]-s.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<Km.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++dt._globalBatch;for(let u=0;u<this.drawCalls.length;u++)this.drawCalls[u].texArray.clear(),In.push(this.drawCalls[u]);this.drawCalls.length=0;const e=this.colors,i=this.textureIds;let s=In.pop();s||(s=new Cl,s.texArray=new Ml),s.texArray.count=0,s.start=0,s.size=0,s.type=$e.TRIANGLES;let n=0,o=null,a=0,l=!1,h=$e.TRIANGLES,c=0;this.drawCalls.push(s);for(let u=0;u<this.batches.length;u++){const d=this.batches[u],f=8,p=d.style,m=p.texture.baseTexture;l!==!!p.native&&(l=!!p.native,h=l?$e.LINES:$e.TRIANGLES,o=null,n=f,t++),o!==m&&(o=m,m._batchEnabled!==t&&(n===f&&(t++,n=0,s.size>0&&(s=In.pop(),s||(s=new Cl,s.texArray=new Ml),this.drawCalls.push(s)),s.start=c,s.size=0,s.texArray.count=0,s.type=h),m.touched=1,m._batchEnabled=t,m._batchLocation=n,m.wrapMode=Ir.REPEAT,s.texArray.elements[s.texArray.count++]=m,n++)),s.size+=d.size,c+=d.size,a=m._batchLocation,this.addColors(e,p.color,p.alpha,d.attribSize,d.attribStart),this.addTextureIds(i,a,d.attribSize,d.attribStart)}dt._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,i=this.colors,s=this.textureIds,n=new ArrayBuffer(t.length*3*4),o=new Float32Array(n),a=new Uint32Array(n);let l=0;for(let h=0;h<t.length/2;h++)o[l++]=t[h*2],o[l++]=t[h*2+1],o[l++]=e[h*2],o[l++]=e[h*2+1],a[l++]=i[h],o[l++]=s[h];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?Ym.triangulate(t,this):Oa[t.type].triangulate(t,this)}processLine(t){zd(t,this);for(let e=0;e<t.holes.length;e++)zd(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const i=t[e];Oa[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let i=0;i<t.length/2;i++){const s=t[i*2],n=t[i*2+1];t[i*2]=e.a*s+e.c*n+e.tx,t[i*2+1]=e.b*s+e.d*n+e.ty}}addColors(t,e,i,s,n=0){const o=Rt.shared.setValue(e).toLittleEndianNumber(),a=Rt.shared.setValue(o).toPremultiplied(i);t.length=Math.max(t.length,n+s);for(let l=0;l<s;l++)t[n+l]=a}addTextureIds(t,e,i,s=0){t.length=Math.max(t.length,s+i);for(let n=0;n<i;n++)t[s+n]=e}addUvs(t,e,i,s,n,o=null){let a=0;const l=e.length,h=i.frame;for(;a<n;){let u=t[(s+a)*2],d=t[(s+a)*2+1];if(o){const f=o.a*u+o.c*d+o.tx;d=o.b*u+o.d*d+o.ty,u=f}a++,e.push(u/h.width,d/h.height)}const c=i.baseTexture;(h.width<c.width||h.height<c.height)&&this.adjustUvs(e,i,l,n)}adjustUvs(t,e,i,s){const n=e.baseTexture,o=1e-6,a=i+s*2,l=e.frame,h=l.width/n.width,c=l.height/n.height;let u=l.x/l.width,d=l.y/l.height,f=Math.floor(t[i]+o),p=Math.floor(t[i+1]+o);for(let m=i+2;m<a;m+=2)f=Math.min(f,Math.floor(t[m]+o)),p=Math.min(p,Math.floor(t[m+1]+o));u-=f,d-=p;for(let m=i;m<a;m+=2)t[m]=(t[m]+u)*h,t[m+1]=(t[m+1]+d)*c}};qm.BATCHABLE_SIZE=100;let sS=qm;class Vo{constructor(){this.color=16777215,this.alpha=1,this.texture=it.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new Vo;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=it.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class zh extends Vo{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=wr.BUTT,this.join=ue.MITER,this.miterLimit=10}clone(){const t=new zh;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=wr.BUTT,this.join=ue.MITER,this.miterLimit=10}}const Na={},ql=class Vn extends Ie{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Vo,this._lineStyle=new zh,this._matrix=null,this._holeMode=!1,this.state=qe.for2d(),this._geometry=t||new sS,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Rt(16777215),this.blendMode=lt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Vn(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,i,s=.5,n=!1){return typeof t=="number"&&(t={width:t,color:e,alpha:i,alignment:s,native:n}),this.lineTextureStyle(t)}lineTextureStyle(t){const e={width:0,texture:it.WHITE,color:t!=null&&t.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:wr.BUTT,join:ue.MITER,miterLimit:10};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const i=t.width>0&&t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:i},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new ri,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new ri,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const i=this.currentPath.points,s=i[i.length-2],n=i[i.length-1];return(s!==t||n!==e)&&i.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,i,s){this._initCurve();const n=this.currentPath.points;return n.length===0&&this.moveTo(0,0),Xh.curveTo(t,e,i,s,n),this}bezierCurveTo(t,e,i,s,n,o){return this._initCurve(),Vh.curveTo(t,e,i,s,n,o,this.currentPath.points),this}arcTo(t,e,i,s,n){this._initCurve(t,e);const o=this.currentPath.points,a=Vd.curveTo(t,e,i,s,n,o);if(a){const{cx:l,cy:h,radius:c,startAngle:u,endAngle:d,anticlockwise:f}=a;this.arc(l,h,c,u,d,f)}return this}arc(t,e,i,s,n,o=!1){if(s===n)return this;if(!o&&n<=s?n+=lo:o&&s<=n&&(s+=lo),n-s===0)return this;const a=t+Math.cos(s)*i,l=e+Math.sin(s)*i,h=this._geometry.closePointEps;let c=this.currentPath?this.currentPath.points:null;if(c){const u=Math.abs(c[c.length-2]-a),d=Math.abs(c[c.length-1]-l);u<h&&d<h||c.push(a,l)}else this.moveTo(a,l),c=this.currentPath.points;return Vd.arc(a,l,t,e,i,s,n,o,c),this}beginFill(t=0,e){return this.beginTextureFill({texture:it.WHITE,color:t,alpha:e})}normalizeColor(t){const e=Rt.shared.setValue(t.color??0);t.color=e.toNumber(),t.alpha??(t.alpha=e.alpha)}beginTextureFill(t){const e={texture:it.WHITE,color:16777215,matrix:null};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const i=t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:i},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,i,s){return this.drawShape(new pt(t,e,i,s))}drawRoundedRect(t,e,i,s,n){return this.drawShape(new Ho(t,e,i,s,n))}drawCircle(t,e,i){return this.drawShape(new Uo(t,e,i))}drawEllipse(t,e,i,s){return this.drawShape(new Go(t,e,i,s))}drawPolygon(...t){let e,i=!0;const s=t[0];s.points?(i=s.closeStroke,e=s.points):Array.isArray(t[0])?e=t[0]:e=t;const n=new ri(e);return n.closeStroke=i,this.drawShape(n),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===Yt.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(let s=0;s<i;s++){const n=t.batches[s],o=n.style.color,a=new Float32Array(this.vertexData.buffer,n.attribStart*4*2,n.attribSize*2),l=new Float32Array(t.uvsFloat32.buffer,n.attribStart*4*2,n.attribSize*2),h=new Uint16Array(t.indicesUint16.buffer,n.start*2,n.size),c={vertexData:a,blendMode:e,indices:h,uvs:l,_batchRGB:Rt.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[s]=c}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,i=this.batches.length;e<i;e++){const s=this.batches[e];s.worldAlpha=this.worldAlpha*s.alpha,t.plugins[this.pluginName].render(s)}}}_renderDirect(t){const e=this._resolveDirectShader(t),i=this._geometry,s=this.worldAlpha,n=e.uniforms,o=i.drawCalls;n.translationMatrix=this.transform.worldTransform,Rt.shared.setValue(this._tintColor).premultiply(s).toArray(n.tint),t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(t,i.drawCalls[a])}_renderDrawCallDirect(t,e){const{texArray:i,type:s,size:n,start:o}=e,a=i.count;for(let l=0;l<a;l++)t.texture.bind(i.elements[l],l);t.geometry.draw(s,n,o)}_resolveDirectShader(t){let e=this.shader;const i=this.pluginName;if(!e){if(!Na[i]){const{maxTextures:s}=t.plugins[i],n=new Int32Array(s);for(let l=0;l<s;l++)n[l]=l;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Pt,default:Se.from({uSamplers:n},!0)},a=t.plugins[i]._shader.program;Na[i]=new ze(a,o)}e=Na[i]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:i,maxX:s,maxY:n}=t.bounds;this._bounds.addFrame(this.transform,e,i,s,n)}containsPoint(t){return this.worldTransform.applyInverse(t,Vn._TEMP_POINT),this._geometry.containsPoint(Vn._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e._tintRGB=Rt.shared.setValue(this._tintColor).multiply(e._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,i=e.a,s=e.b,n=e.c,o=e.d,a=e.tx,l=e.ty,h=this._geometry.points,c=this.vertexData;let u=0;for(let d=0;d<h.length;d+=2){const f=h[d],p=h[d+1];c[u++]=i*f+n*p+a,c[u++]=o*p+s*f+l}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};ql.curves=Qi,ql._TEMP_POINT=new At;let jh=ql;class nS{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}}const La=new At,Yd=new ri,Zm=class Qm extends Ie{constructor(t,e,i,s=$e.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=i||qe.for2d(),this.drawMode=s,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=K.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===$e.TRIANGLES&&e.length<Qm.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;const s=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[s]),t.plugins[s].render(this)}calculateVertices(){const t=this.geometry.buffers[0],e=t.data,i=t._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));const s=this.transform.worldTransform,n=s.a,o=s.b,a=s.c,l=s.d,h=s.tx,c=s.ty,u=this.vertexData;for(let d=0;d<u.length/2;d++){const f=e[d*2],p=e[d*2+1];u[d*2]=n*f+a*p+h,u[d*2+1]=o*f+l*p+c}if(this._roundPixels){const d=K.RESOLUTION;for(let f=0;f<u.length;++f)u[f]=Math.round(u[f]*d)/d}this.vertexDirty=i}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new nS(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,La);const e=this.geometry.getBuffer("aVertexPosition").data,i=Yd.points,s=this.geometry.getIndex().data,n=s.length,o=this.drawMode===4?3:1;for(let a=0;a+2<n;a+=o){const l=s[a]*2,h=s[a+1]*2,c=s[a+2]*2;if(i[0]=e[l],i[1]=e[l+1],i[2]=e[h],i[3]=e[h+1],i[4]=e[c],i[5]=e[c+1],Yd.contains(La.x,La.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};Zm.BATCHABLE_SIZE=100;let qd=Zm;class oS extends Br{constructor(t,e,i){super();const s=new Lt(t),n=new Lt(e,!0),o=new Lt(i,!0,!0);this.addAttribute("aVertexPosition",s,2,!1,st.FLOAT).addAttribute("aTextureCoord",n,2,!1,st.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var aS=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,lS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Kd extends ze{constructor(t,e){const i={uSampler:t,alpha:1,uTextureMatrix:Pt.IDENTITY,uColor:new Float32Array([1,1,1,1])};e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e),e.uniforms&&Object.assign(i,e.uniforms),super(e.program||ar.from(lS,aS),i),this._colorDirty=!1,this.uvMatrix=new mm(t),this.batchable=e.program===void 0,this.pluginName=e.pluginName,this._tintColor=new Rt(e.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture.alphaMode;Rt.shared.setValue(this._tintColor).premultiply(this._alpha,t).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class Zd{constructor(t,e,i){this.geometry=new Br,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let s=0;s<t.length;++s){let n=t[s];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||st.FLOAT,offset:n.offset},e[s]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let e=0;this.indexBuffer=new Lt(PA(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=e,e+=a.size,this.dynamicStride+=a.size}const i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new Lt(this.dynamicData,!1,!1);let s=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=s,s+=a.size,this.staticStride+=a.size}const n=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(n),this.staticDataUint32=new Uint32Array(n),this.staticBuffer=new Lt(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===st.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===st.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(t,e,i){for(let s=0;s<this.dynamicProperties.length;s++){const n=this.dynamicProperties[s];n.uploadFunction(t,e,i,n.type===st.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,e,i){for(let s=0;s<this.staticProperties.length;s++){const n=this.staticProperties[s];n.uploadFunction(t,e,i,n.type===st.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var hS=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,cS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class Jm extends $o{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new Pt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:st.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=ze.from(cS,hS,{}),this.state=qe.for2d()}render(t){const e=t.children,i=t._maxSize,s=t._batchSize,n=this.renderer;let o=e.length;if(o===0)return;o>i&&!t.autoResize&&(o=i);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const l=e[0]._texture.baseTexture,h=l.alphaMode>0;this.state.blendMode=Qp(t.blendMode,h),n.state.set(this.state);const c=n.gl,u=t.worldTransform.copyTo(this.tempMatrix);u.prepend(n.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=u.toArray(!0),this.shader.uniforms.uColor=Rt.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,h).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let f=0,p=0;f<o;f+=s,p+=1){let m=o-f;m>s&&(m=s),p>=a.length&&a.push(this._generateOneMoreBuffer(t));const g=a[p];g.uploadDynamic(e,f,m);const y=t._bufferUpdateIDs[p]||0;d=d||g._updateID<y,d&&(g._updateID=t._updateID,g.uploadStatic(e,f,m)),n.geometry.bind(g.geometry),c.drawElements(c.TRIANGLES,m*6,c.UNSIGNED_SHORT,0)}}generateBuffers(t){const e=[],i=t._maxSize,s=t._batchSize,n=t._properties;for(let o=0;o<i;o+=s)e.push(new Zd(this.properties,n,s));return e}_generateOneMoreBuffer(t){const e=t._batchSize,i=t._properties;return new Zd(this.properties,i,e)}uploadVertices(t,e,i,s,n,o){let a=0,l=0,h=0,c=0;for(let u=0;u<i;++u){const d=t[e+u],f=d._texture,p=d.scale.x,m=d.scale.y,g=f.trim,y=f.orig;g?(l=g.x-d.anchor.x*y.width,a=l+g.width,c=g.y-d.anchor.y*y.height,h=c+g.height):(a=y.width*(1-d.anchor.x),l=y.width*-d.anchor.x,h=y.height*(1-d.anchor.y),c=y.height*-d.anchor.y),s[o]=l*p,s[o+1]=c*m,s[o+n]=a*p,s[o+n+1]=c*m,s[o+n*2]=a*p,s[o+n*2+1]=h*m,s[o+n*3]=l*p,s[o+n*3+1]=h*m,o+=n*4}}uploadPosition(t,e,i,s,n,o){for(let a=0;a<i;a++){const l=t[e+a].position;s[o]=l.x,s[o+1]=l.y,s[o+n]=l.x,s[o+n+1]=l.y,s[o+n*2]=l.x,s[o+n*2+1]=l.y,s[o+n*3]=l.x,s[o+n*3+1]=l.y,o+=n*4}}uploadRotation(t,e,i,s,n,o){for(let a=0;a<i;a++){const l=t[e+a].rotation;s[o]=l,s[o+n]=l,s[o+n*2]=l,s[o+n*3]=l,o+=n*4}}uploadUvs(t,e,i,s,n,o){for(let a=0;a<i;++a){const l=t[e+a]._texture._uvs;l?(s[o]=l.x0,s[o+1]=l.y0,s[o+n]=l.x1,s[o+n+1]=l.y1,s[o+n*2]=l.x2,s[o+n*2+1]=l.y2,s[o+n*3]=l.x3,s[o+n*3+1]=l.y3,o+=n*4):(s[o]=0,s[o+1]=0,s[o+n]=0,s[o+n+1]=0,s[o+n*2]=0,s[o+n*2+1]=0,s[o+n*3]=0,s[o+n*3+1]=0,o+=n*4)}}uploadTint(t,e,i,s,n,o){for(let a=0;a<i;++a){const l=t[e+a],h=Rt.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);s[o]=h,s[o+n]=h,s[o+n*2]=h,s[o+n*3]=h,o+=n*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}Jm.extension={name:"particle",type:z.RendererPlugin};tt.add(Jm);var Xo=(r=>(r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",r))(Xo||{});const Rn={willReadFrequently:!0},Oe=class rt{static get experimentalLetterSpacingSupported(){let t=rt._experimentalLetterSpacingSupported;if(t!==void 0){const e=K.ADAPTER.getCanvasRenderingContext2D().prototype;t=rt._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,i,s,n,o,a,l,h){this.text=t,this.style=e,this.width=i,this.height=s,this.lines=n,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=h}static measureText(t,e,i,s=rt._canvas){i=i??e.wordWrap;const n=e.toFontString(),o=rt.measureFont(n);o.fontSize===0&&(o.fontSize=e.fontSize,o.ascent=e.fontSize);const a=s.getContext("2d",Rn);a.font=n;const l=(i?rt.wordWrap(t,e,s):t).split(/(?:\r\n|\r|\n)/),h=new Array(l.length);let c=0;for(let p=0;p<l.length;p++){const m=rt._measureText(l[p],e.letterSpacing,a);h[p]=m,c=Math.max(c,m)}let u=c+e.strokeThickness;e.dropShadow&&(u+=e.dropShadowDistance);const d=e.lineHeight||o.fontSize+e.strokeThickness;let f=Math.max(d,o.fontSize+e.strokeThickness*2)+e.leading+(l.length-1)*(d+e.leading);return e.dropShadow&&(f+=e.dropShadowDistance),new rt(t,e,u,f,l,h,d+e.leading,c,o)}static _measureText(t,e,i){let s=!1;rt.experimentalLetterSpacingSupported&&(rt.experimentalLetterSpacing?(i.letterSpacing=`${e}px`,i.textLetterSpacing=`${e}px`,s=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let n=i.measureText(t).width;return n>0&&(s?n-=e:n+=(rt.graphemeSegmenter(t).length-1)*e),n}static wordWrap(t,e,i=rt._canvas){const s=i.getContext("2d",Rn);let n=0,o="",a="";const l=Object.create(null),{letterSpacing:h,whiteSpace:c}=e,u=rt.collapseSpaces(c),d=rt.collapseNewlines(c);let f=!u;const p=e.wordWrapWidth+h,m=rt.tokenize(t);for(let g=0;g<m.length;g++){let y=m[g];if(rt.isNewline(y)){if(!d){a+=rt.addLine(o),f=!u,o="",n=0;continue}y=" "}if(u){const _=rt.isBreakingSpace(y),b=rt.isBreakingSpace(o[o.length-1]);if(_&&b)continue}const A=rt.getFromCache(y,h,l,s);if(A>p)if(o!==""&&(a+=rt.addLine(o),o="",n=0),rt.canBreakWords(y,e.breakWords)){const _=rt.wordWrapSplit(y);for(let b=0;b<_.length;b++){let C=_[b],N=C,P=1;for(;_[b+P];){const W=_[b+P];if(!rt.canBreakChars(N,W,y,b,e.breakWords))C+=W;else break;N=W,P++}b+=P-1;const I=rt.getFromCache(C,h,l,s);I+n>p&&(a+=rt.addLine(o),f=!1,o="",n=0),o+=C,n+=I}}else{o.length>0&&(a+=rt.addLine(o),o="",n=0);const _=g===m.length-1;a+=rt.addLine(y,!_),f=!1,o="",n=0}else A+n>p&&(f=!1,a+=rt.addLine(o),o="",n=0),(o.length>0||!rt.isBreakingSpace(y)||f)&&(o+=y,n+=A)}return a+=rt.addLine(o,!1),a}static addLine(t,e=!0){return t=rt.trimRight(t),t=e?`${t}
`:t,t}static getFromCache(t,e,i,s){let n=i[t];return typeof n!="number"&&(n=rt._measureText(t,e,s)+e,i[t]=n),n}static collapseSpaces(t){return t==="normal"||t==="pre-line"}static collapseNewlines(t){return t==="normal"}static trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const i=t[e];if(!rt.isBreakingSpace(i))break;t=t.slice(0,-1)}return t}static isNewline(t){return typeof t!="string"?!1:rt._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:rt._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let i="";if(typeof t!="string")return e;for(let s=0;s<t.length;s++){const n=t[s],o=t[s+1];if(rt.isBreakingSpace(n,o)||rt.isNewline(n)){i!==""&&(e.push(i),i=""),e.push(n);continue}i+=n}return i!==""&&e.push(i),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,s,n){return!0}static wordWrapSplit(t){return rt.graphemeSegmenter(t)}static measureFont(t){if(rt._fonts[t])return rt._fonts[t];const e={ascent:0,descent:0,fontSize:0},i=rt._canvas,s=rt._context;s.font=t;const n=rt.METRICS_STRING+rt.BASELINE_SYMBOL,o=Math.ceil(s.measureText(n).width);let a=Math.ceil(s.measureText(rt.BASELINE_SYMBOL).width);const l=Math.ceil(rt.HEIGHT_MULTIPLIER*a);if(a=a*rt.BASELINE_MULTIPLIER|0,o===0||l===0)return rt._fonts[t]=e,e;i.width=o,i.height=l,s.fillStyle="#f00",s.fillRect(0,0,o,l),s.font=t,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(n,0,a);const h=s.getImageData(0,0,o,l).data,c=h.length,u=o*4;let d=0,f=0,p=!1;for(d=0;d<a;++d){for(let m=0;m<u;m+=4)if(h[f+m]!==255){p=!0;break}if(!p)f+=u;else break}for(e.ascent=a-d,f=c-u,p=!1,d=l;d>a;--d){for(let m=0;m<u;m+=4)if(h[f+m]!==255){p=!0;break}if(!p)f-=u;else break}return e.descent=d-a,e.fontSize=e.ascent+e.descent,rt._fonts[t]=e,e}static clearMetrics(t=""){t?delete rt._fonts[t]:rt._fonts={}}static get _canvas(){var t;if(!rt.__canvas){let e;try{const i=new OffscreenCanvas(0,0);if((t=i.getContext("2d",Rn))!=null&&t.measureText)return rt.__canvas=i,i;e=K.ADAPTER.createCanvas()}catch{e=K.ADAPTER.createCanvas()}e.width=e.height=10,rt.__canvas=e}return rt.__canvas}static get _context(){return rt.__context||(rt.__context=rt._canvas.getContext("2d",Rn)),rt.__context}};Oe.METRICS_STRING="|q",Oe.BASELINE_SYMBOL="M",Oe.BASELINE_MULTIPLIER=1.4,Oe.HEIGHT_MULTIPLIER=2,Oe.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return t=>[...r.segment(t)].map(e=>e.segment)}return r=>[...r]})(),Oe.experimentalLetterSpacing=!1,Oe._fonts={},Oe._newlines=[10,13],Oe._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let br=Oe;const uS=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],tg=class xs{constructor(t){this.styleID=0,this.reset(),Ua(this,t,t)}clone(){const t={};return Ua(t,this,xs.defaultStyle),new xs(t)}reset(){Ua(this,xs.defaultStyle,xs.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=ka(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=ka(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){dS(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=ka(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let i=e.length-1;i>=0;i--){let s=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!uS.includes(s)&&(s=`"${s}"`),e[i]=s}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};tg.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Xo.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let ur=tg;function ka(r){const t=Rt.shared,e=i=>{const s=t.setValue(i);return s.alpha===1?s.toHex():s.toRgbaString()};return Array.isArray(r)?r.map(e):e(r)}function dS(r,t){if(!Array.isArray(r)||!Array.isArray(t)||r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(r[e]!==t[e])return!1;return!0}function Ua(r,t,e){for(const i in e)Array.isArray(t[i])?r[i]=t[i].slice():r[i]=t[i]}const fS={texture:!0,children:!1,baseTexture:!0},eg=class Kl extends di{constructor(t,e,i){let s=!1;i||(i=K.ADAPTER.createCanvas(),s=!0),i.width=3,i.height=3;const n=it.from(i);n.orig=new pt,n.trim=new pt,super(n),this._ownCanvas=s,this.canvas=i,this.context=i.getContext("2d",{willReadFrequently:!0}),this._resolution=Kl.defaultResolution??K.RESOLUTION,this._autoResolution=Kl.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return br.experimentalLetterSpacing}static set experimentalLetterSpacing(t){yt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),br.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const i=this.context,s=br.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),n=s.width,o=s.height,a=s.lines,l=s.lineHeight,h=s.lineWidths,c=s.maxLineWidth,u=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,n)+e.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+e.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;let d,f;const p=e.dropShadow?2:1;for(let m=0;m<p;++m){const g=e.dropShadow&&m===0,y=g?Math.ceil(Math.max(1,o)+e.padding*2):0,A=y*this._resolution;if(g){i.fillStyle="black",i.strokeStyle="black";const b=e.dropShadowColor,C=e.dropShadowBlur*this._resolution,N=e.dropShadowDistance*this._resolution;i.shadowColor=Rt.shared.setValue(b).setAlpha(e.dropShadowAlpha).toRgbaString(),i.shadowBlur=C,i.shadowOffsetX=Math.cos(e.dropShadowAngle)*N,i.shadowOffsetY=Math.sin(e.dropShadowAngle)*N+A}else i.fillStyle=this._generateFillStyle(e,a,s),i.strokeStyle=e.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;let _=(l-u.fontSize)/2;l-u.fontSize<0&&(_=0);for(let b=0;b<a.length;b++)d=e.strokeThickness/2,f=e.strokeThickness/2+b*l+u.ascent+_,e.align==="right"?d+=c-h[b]:e.align==="center"&&(d+=(c-h[b])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(a[b],d+e.padding,f+e.padding-y,!0),e.fill&&this.drawLetterSpacing(a[b],d+e.padding,f+e.padding-y)}this.updateTexture()}drawLetterSpacing(t,e,i,s=!1){const n=this._style.letterSpacing;let o=!1;if(br.experimentalLetterSpacingSupported&&(br.experimentalLetterSpacing?(this.context.letterSpacing=`${n}px`,this.context.textLetterSpacing=`${n}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),n===0||o){s?this.context.strokeText(t,e,i):this.context.fillText(t,e,i);return}let a=e;const l=br.graphemeSegmenter(t);let h=this.context.measureText(t).width,c=0;for(let u=0;u<l.length;++u){const d=l[u];s?this.context.strokeText(d,a,i):this.context.fillText(d,a,i);let f="";for(let p=u+1;p<l.length;++p)f+=l[p];c=this.context.measureText(f).width,a+=h-c+n,h=c}}updateTexture(){const t=this.canvas;if(this._style.trim){const o=DA(t);o.data&&(t.width=o.width,t.height=o.height,this.context.putImageData(o.data,0,0))}const e=this._texture,i=this._style,s=i.trim?0:i.padding,n=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-s,e.trim.y=-s,e.orig.width=e._frame.width-s*2,e.orig.height=e._frame.height-s*2,this._onTextureUpdate(),n.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,i){const s=t.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;let n;const o=t.dropShadow?t.dropShadowDistance:0,a=t.padding||0,l=this.canvas.width/this._resolution-o-a*2,h=this.canvas.height/this._resolution-o-a*2,c=s.slice(),u=t.fillGradientStops.slice();if(!u.length){const d=c.length+1;for(let f=1;f<d;++f)u.push(f/d)}if(c.unshift(s[0]),u.unshift(0),c.push(s[s.length-1]),u.push(1),t.fillGradientType===Xo.LINEAR_VERTICAL){n=this.context.createLinearGradient(l/2,a,l/2,h+a);const d=i.fontProperties.fontSize+t.strokeThickness;for(let f=0;f<e.length;f++){const p=i.lineHeight*(f-1)+d,m=i.lineHeight*f;let g=m;f>0&&p>m&&(g=(m+p)/2);const y=m+d,A=i.lineHeight*(f+1);let _=y;f+1<e.length&&A<y&&(_=(y+A)/2);const b=(_-g)/h;for(let C=0;C<c.length;C++){let N=0;typeof u[C]=="number"?N=u[C]:N=C/c.length;let P=Math.min(1,Math.max(0,g/h+N*b));P=Number(P.toFixed(5)),n.addColorStop(P,c[C])}}}else{n=this.context.createLinearGradient(a,h/2,l+a,h/2);const d=c.length+1;let f=1;for(let p=0;p<c.length;p++){let m;typeof u[p]=="number"?m=u[p]:m=f/d,n.addColorStop(m,c[p]),f++}}return n}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},fS,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=Tr(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=Tr(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof ur?this._style=t:this._style=new ur(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};eg.defaultAutoResolution=!0;let xo=eg;class pS{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function mS(r,t){var i;let e=!1;if((i=r==null?void 0:r._textures)!=null&&i.length){for(let s=0;s<r._textures.length;s++)if(r._textures[s]instanceof it){const n=r._textures[s].baseTexture;t.includes(n)||(t.push(n),e=!0)}}return e}function gS(r,t){if(r.baseTexture instanceof dt){const e=r.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function yS(r,t){if(r._texture&&r._texture instanceof it){const e=r._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function _S(r,t){return t instanceof xo?(t.updateText(!0),!0):!1}function vS(r,t){if(t instanceof ur){const e=t.toFontString();return br.measureFont(e),!0}return!1}function xS(r,t){if(r instanceof xo){t.includes(r.style)||t.push(r.style),t.includes(r)||t.push(r);const e=r._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function bS(r,t){return r instanceof ur?(t.includes(r)||t.push(r),!0):!1}const rg=class ig{constructor(t){this.limiter=new pS(ig.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(xS),this.registerFindHook(bS),this.registerFindHook(mS),this.registerFindHook(gS),this.registerFindHook(yS),this.registerUploadHook(_S),this.registerUploadHook(vS)}upload(t){return new Promise(e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,ne.system.addOnce(this.tick,this,ai.UTILITY))):e()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let e=!1;if(t&&!t._destroyed){for(let i=0,s=this.uploadHooks.length;i<s;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)ne.system.addOnce(this.tick,this,ai.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let e=0,i=t.length;e<i;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof Ie)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&ne.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};rg.uploadsPerFrame=4;let Zl=rg;Object.defineProperties(K,{UPLOADS_PER_FRAME:{get(){return Zl.uploadsPerFrame},set(r){yt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Zl.uploadsPerFrame=r}}});function sg(r,t){return t instanceof dt?(t._glTextures[r.CONTEXT_UID]||r.texture.bind(t),!0):!1}function AS(r,t){if(!(t instanceof jh))return!1;const{geometry:e}=t;t.finishPoly(),e.updateBatches();const{batches:i}=e;for(let s=0;s<i.length;s++){const{texture:n}=i[s].style;n&&sg(r,n.baseTexture)}return e.batchable||r.geometry.bind(e,t._resolveDirectShader(r)),!0}function ES(r,t){return r instanceof jh?(t.push(r),!0):!1}class ng extends Zl{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(ES),this.registerUploadHook(sg),this.registerUploadHook(AS)}}ng.extension={name:"prepare",type:z.RendererSystem};tt.add(ng);var TS=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,wS=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,SS=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,Qd=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,CS=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Pn=new Pt;class og extends $o{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new um,this.state=qe.for2d()}contextChange(){const t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=ze.from(Qd,CS,e),this.shader=t.context.webGLVersion>1?ze.from(wS,TS,e):ze.from(Qd,SS,e)}render(t){const e=this.renderer,i=this.quad;let s=i.vertices;s[0]=s[6]=t._width*-t.anchor.x,s[1]=s[3]=t._height*-t.anchor.y,s[2]=s[4]=t._width*(1-t.anchor.x),s[5]=s[7]=t._height*(1-t.anchor.y);const n=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;s=i.uvs,s[0]=s[6]=-n,s[1]=s[3]=-o,s[2]=s[4]=1-n,s[5]=s[7]=1-o,i.invalidate();const a=t._texture,l=a.baseTexture,h=l.alphaMode>0,c=t.tileTransform.localTransform,u=t.uvMatrix;let d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[e.CONTEXT_UID]?d=l.wrapMode!==Ir.CLAMP:l.wrapMode===Ir.CLAMP&&(l.wrapMode=Ir.REPEAT));const f=d?this.simpleShader:this.shader,p=a.width,m=a.height,g=t._width,y=t._height;Pn.set(c.a*p/g,c.b*p/y,c.c*m/g,c.d*m/y,c.tx/g,c.ty/y),Pn.invert(),d?Pn.prepend(u.mapCoord):(f.uniforms.uMapCoord=u.mapCoord.toArray(!0),f.uniforms.uClampFrame=u.uClampFrame,f.uniforms.uClampOffset=u.uClampOffset),f.uniforms.uTransform=Pn.toArray(!0),f.uniforms.uColor=Rt.shared.setValue(t.tint).premultiply(t.worldAlpha,h).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,e.shader.bind(f),e.geometry.bind(i),this.state.blendMode=Qp(t.blendMode,h),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}og.extension={name:"tilingSprite",type:z.RendererPlugin};tt.add(og);const ag=class bs{constructor(t,e,i=null){this.linkedSheets=[],this._texture=t instanceof it?t:null,this.baseTexture=t instanceof dt?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;const s=this.baseTexture.resource;this.resolution=this._updateResolution(i||(s?s.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let i=cr(t,null);return i===null&&(i=typeof e=="number"?e:parseFloat(e??"1")),i!==1&&this.baseTexture.setResolution(i),i}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=bs.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const i=bs.BATCH_SIZE;for(;e-t<i&&e<this._frameKeys.length;){const s=this._frameKeys[e],n=this._frames[s],o=n.frame;if(o){let a=null,l=null;const h=n.trimmed!==!1&&n.sourceSize?n.sourceSize:n.frame,c=new pt(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);n.rotated?a=new pt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new pt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),n.trimmed!==!1&&n.spriteSourceSize&&(l=new pt(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[s]=new it(this.baseTexture,a,c,l,n.rotated?2:0,n.anchor,n.borders),it.addToCache(this.textures[s],s.toString())}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){const s=t[e][i];this.animations[e].push(this.textures[s])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*bs.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*bs.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};ag.BATCH_SIZE=1e3;let Jd=ag;const IS=["jpg","png","jpeg","avif","webp"];function lg(r,t,e){const i={};if(r.forEach(s=>{i[s]=t}),Object.keys(t.textures).forEach(s=>{i[s]=t.textures[s]}),!e){const s=Wt.dirname(r[0]);t.linkedSheets.forEach((n,o)=>{const a=lg([`${s}/${t.data.meta.related_multi_packs[o]}`],n,!0);Object.assign(i,a)})}return i}const RS={extension:z.Asset,cache:{test:r=>r instanceof Jd,getCacheableAssets:(r,t)=>lg(r,t,!1)},resolver:{test:r=>{const t=r.split("?")[0].split("."),e=t.pop(),i=t.pop();return e==="json"&&IS.includes(i)},parse:r=>{var e;const t=r.split(".");return{resolution:parseFloat(((e=K.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:t[t.length-2],src:r}}},loader:{name:"spritesheetLoader",extension:{type:z.LoadParser,priority:Re.Normal},async testParse(r,t){return Wt.extname(t.src).toLowerCase()===".json"&&!!r.frames},async parse(r,t,e){var l,h;let i=Wt.dirname(t.src);i&&i.lastIndexOf("/")!==i.length-1&&(i+="/");let s=i+r.meta.image;s=jl(s,t.src);const n=(await e.load([s]))[s],o=new Jd(n.baseTexture,r,t.src);await o.parse();const a=(l=r==null?void 0:r.meta)==null?void 0:l.related_multi_packs;if(Array.isArray(a)){const c=[];for(const d of a){if(typeof d!="string")continue;let f=i+d;(h=t.data)!=null&&h.ignoreMultiPack||(f=jl(f,t.src),c.push(e.load({src:f,data:{ignoreMultiPack:!0}})))}const u=await Promise.all(c);o.linkedSheets=u,u.forEach(d=>{d.linkedSheets=[o].concat(o.linkedSheets.filter(f=>f!==d))})}return o},unload(r){r.destroy(!0)}}};tt.add(RS);class bo{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Xn{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const n in e){const o=e[n].match(/^[a-z]+/gm)[0],a=e[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const h in a){const c=a[h].split("="),u=c[0],d=c[1].replace(/"/gm,""),f=parseFloat(d),p=isNaN(f)?d:f;l[u]=p}i[o].push(l)}const s=new bo;return i.info.forEach(n=>s.info.push({face:n.face,size:parseInt(n.size,10)})),i.common.forEach(n=>s.common.push({lineHeight:parseInt(n.lineHeight,10)})),i.page.forEach(n=>s.page.push({id:parseInt(n.id,10),file:n.file})),i.char.forEach(n=>s.char.push({id:parseInt(n.id,10),page:parseInt(n.page,10),x:parseInt(n.x,10),y:parseInt(n.y,10),width:parseInt(n.width,10),height:parseInt(n.height,10),xoffset:parseInt(n.xoffset,10),yoffset:parseInt(n.yoffset,10),xadvance:parseInt(n.xadvance,10)})),i.kerning.forEach(n=>s.kerning.push({first:parseInt(n.first,10),second:parseInt(n.second,10),amount:parseInt(n.amount,10)})),i.distanceField.forEach(n=>s.distanceField.push({distanceRange:parseInt(n.distanceRange,10),fieldType:n.fieldType})),s}}class Ql{static test(t){const e=t;return typeof t!="string"&&"getElementsByTagName"in t&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const e=new bo,i=t.getElementsByTagName("info"),s=t.getElementsByTagName("common"),n=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),l=t.getElementsByTagName("distanceField");for(let h=0;h<i.length;h++)e.info.push({face:i[h].getAttribute("face"),size:parseInt(i[h].getAttribute("size"),10)});for(let h=0;h<s.length;h++)e.common.push({lineHeight:parseInt(s[h].getAttribute("lineHeight"),10)});for(let h=0;h<n.length;h++)e.page.push({id:parseInt(n[h].getAttribute("id"),10)||0,file:n[h].getAttribute("file")});for(let h=0;h<o.length;h++){const c=o[h];e.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(let h=0;h<a.length;h++)e.kerning.push({first:parseInt(a[h].getAttribute("first"),10),second:parseInt(a[h].getAttribute("second"),10),amount:parseInt(a[h].getAttribute("amount"),10)});for(let h=0;h<l.length;h++)e.distanceField.push({fieldType:l[h].getAttribute("fieldType"),distanceRange:parseInt(l[h].getAttribute("distanceRange"),10)});return e}}class Jl{static test(t){return typeof t=="string"&&t.includes("<font>")?Ql.test(K.ADAPTER.parseXML(t)):!1}static parse(t){return Ql.parse(K.ADAPTER.parseXML(t))}}const Ga=[Xn,Ql,Jl];function PS(r){for(let t=0;t<Ga.length;t++)if(Ga[t].test(r))return Ga[t];return null}function MS(r,t,e,i,s,n){const o=e.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=e.dropShadow?e.dropShadowDistance:0,h=e.padding||0,c=r.width/i-l-h*2,u=r.height/i-l-h*2,d=o.slice(),f=e.fillGradientStops.slice();if(!f.length){const p=d.length+1;for(let m=1;m<p;++m)f.push(m/p)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),e.fillGradientType===Xo.LINEAR_VERTICAL){a=t.createLinearGradient(c/2,h,c/2,u+h);let p=0;const m=(n.fontProperties.fontSize+e.strokeThickness)/u;for(let g=0;g<s.length;g++){const y=n.lineHeight*g;for(let A=0;A<d.length;A++){let _=0;typeof f[A]=="number"?_=f[A]:_=A/d.length;const b=y/u+_*m;let C=Math.max(p,b);C=Math.min(C,1),a.addColorStop(C,d[A]),p=C}}}else{a=t.createLinearGradient(h,u/2,c+h,u/2);const p=d.length+1;let m=1;for(let g=0;g<d.length;g++){let y;typeof f[g]=="number"?y=f[g]:y=m/p,a.addColorStop(y,d[g]),m++}}return a}function BS(r,t,e,i,s,n,o){const a=e.text,l=e.fontProperties;t.translate(i,s),t.scale(n,n);const h=o.strokeThickness/2,c=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=MS(r,t,o,n,[a],e),t.strokeStyle=o.stroke,o.dropShadow){const u=o.dropShadowColor,d=o.dropShadowBlur*n,f=o.dropShadowDistance*n;t.shadowColor=Rt.shared.setValue(u).setAlpha(o.dropShadowAlpha).toRgbaString(),t.shadowBlur=d,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(a,h,c+e.lineHeight-l.descent),o.fill&&t.fillText(a,h,c+e.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function zn(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}function hg(r){return Array.from?Array.from(r):r.split("")}function FS(r){typeof r=="string"&&(r=[r]);const t=[];for(let e=0,i=r.length;e<i;e++){const s=r[e];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);const n=s[0].charCodeAt(0),o=s[1].charCodeAt(0);if(o<n)throw new Error("[BitmapFont]: Invalid character range.");for(let a=n,l=o;a<=l;a++)t.push(String.fromCharCode(a))}else t.push(...hg(s))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const gr=class Ne{constructor(t,e,i){var c;const[s]=t.info,[n]=t.common,[o]=t.page,[a]=t.distanceField,l=cr(o.file),h={};this._ownsTextures=i,this.font=s.face,this.size=s.size,this.lineHeight=n.lineHeight/l,this.chars={},this.pageTextures=h;for(let u=0;u<t.page.length;u++){const{id:d,file:f}=t.page[u];h[d]=e instanceof Array?e[u]:e[f],a!=null&&a.fieldType&&a.fieldType!=="none"&&(h[d].baseTexture.alphaMode=se.NO_PREMULTIPLIED_ALPHA,h[d].baseTexture.mipmap=Ye.OFF)}for(let u=0;u<t.char.length;u++){const{id:d,page:f}=t.char[u];let{x:p,y:m,width:g,height:y,xoffset:A,yoffset:_,xadvance:b}=t.char[u];p/=l,m/=l,g/=l,y/=l,A/=l,_/=l,b/=l;const C=new pt(p+h[f].frame.x/l,m+h[f].frame.y/l,g,y);this.chars[d]={xOffset:A,yOffset:_,xAdvance:b,kerning:{},texture:new it(h[f].baseTexture,C),page:f}}for(let u=0;u<t.kerning.length;u++){let{first:d,second:f,amount:p}=t.kerning[u];d/=l,f/=l,p/=l,this.chars[f]&&(this.chars[f].kerning[d]=p)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=((c=a==null?void 0:a.fieldType)==null?void 0:c.toLowerCase())??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,i){let s;if(t instanceof bo)s=t;else{const o=PS(t);if(!o)throw new Error("Unrecognized data format for font.");s=o.parse(t)}e instanceof it&&(e=[e]);const n=new Ne(s,e,i);return Ne.available[n.font]=n,n}static uninstall(t){const e=Ne.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete Ne.available[t]}static from(t,e,i){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:s,padding:n,resolution:o,textureWidth:a,textureHeight:l,...h}=Object.assign({},Ne.defaultOptions,i),c=FS(s),u=e instanceof ur?e:new ur(e),d=a,f=new bo;f.info[0]={face:u.fontFamily,size:u.fontSize},f.common[0]={lineHeight:u.fontSize};let p=0,m=0,g,y,A,_=0;const b=[];for(let N=0;N<c.length;N++){g||(g=K.ADAPTER.createCanvas(),g.width=a,g.height=l,y=g.getContext("2d"),A=new dt(g,{resolution:o,...h}),b.push(new it(A)),f.page.push({id:b.length-1,file:""}));const P=c[N],I=br.measureText(P,u,!1,g),W=I.width,Z=Math.ceil(I.height),ct=Math.ceil((u.fontStyle==="italic"?2:1)*W);if(m>=l-Z*o){if(m===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${P}')`);--N,g=null,y=null,A=null,m=0,p=0,_=0;continue}if(_=Math.max(Z+I.fontProperties.descent,_),ct*o+p>=d){if(p===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${P}')`);--N,m+=_*o,m=Math.ceil(m),p=0,_=0;continue}BS(g,y,I,p,m,o,u);const H=zn(I.text);f.char.push({id:H,page:b.length-1,x:p/o,y:m/o,width:ct,height:Z,xoffset:0,yoffset:0,xadvance:W-(u.dropShadow?u.dropShadowDistance:0)-(u.stroke?u.strokeThickness:0)}),p+=(ct+2*n)*o,p=Math.ceil(p)}if(!(i!=null&&i.skipKerning))for(let N=0,P=c.length;N<P;N++){const I=c[N];for(let W=0;W<P;W++){const Z=c[W],ct=y.measureText(I).width,H=y.measureText(Z).width,T=y.measureText(I+Z).width-(ct+H);T&&f.kerning.push({first:zn(I),second:zn(Z),amount:T})}}const C=new Ne(f,b,!0);return Ne.available[t]!==void 0&&Ne.uninstall(t),Ne.available[t]=C,C}};gr.ALPHA=[["a","z"],["A","Z"]," "],gr.NUMERIC=[["0","9"]],gr.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],gr.ASCII=[[" ","~"]],gr.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:gr.ALPHANUMERIC},gr.available={};let yr=gr;var DS=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,OS=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const tf=[],ef=[],rf=[],NS=class cg extends Ie{constructor(t,e={}){super();const{align:i,tint:s,maxWidth:n,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},cg.styleDefaults,e);if(!yr.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=i,this._tintColor=new Rt(s),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=t,this._maxWidth=n,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new or(()=>{this.dirty=!0},this,0,0),this._roundPixels=K.ROUND_PIXELS,this.dirty=!0,this._resolution=K.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var ct;const t=yr.available[this._fontName],e=this.fontSize,i=e/t.size,s=new At,n=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",h=hg(l),c=this._maxWidth*t.size/e,u=t.distanceFieldType==="none"?tf:ef;let d=null,f=0,p=0,m=0,g=-1,y=0,A=0,_=0,b=0;for(let H=0;H<h.length;H++){const T=h[H],F=zn(T);if(/(?:\s)/.test(T)&&(g=H,y=f,b++),T==="\r"||T===`
`){o.push(f),a.push(-1),p=Math.max(p,f),++m,++A,s.x=0,s.y+=t.lineHeight,d=null,b=0;continue}const J=t.chars[F];if(!J)continue;d&&J.kerning[d]&&(s.x+=J.kerning[d]);const Q=rf.pop()||{texture:it.EMPTY,line:0,charCode:0,prevSpaces:0,position:new At};Q.texture=J.texture,Q.line=m,Q.charCode=F,Q.position.x=Math.round(s.x+J.xOffset+this._letterSpacing/2),Q.position.y=Math.round(s.y+J.yOffset),Q.prevSpaces=b,n.push(Q),f=Q.position.x+Math.max(J.xAdvance-J.xOffset,J.texture.orig.width),s.x+=J.xAdvance+this._letterSpacing,_=Math.max(_,J.yOffset+J.texture.height),d=F,g!==-1&&c>0&&s.x>c&&(++A,Hi(n,1+g-A,1+H-g),H=g,g=-1,o.push(y),a.push(n.length>0?n[n.length-1].prevSpaces:0),p=Math.max(p,y),m++,s.x=0,s.y+=t.lineHeight,d=null,b=0)}const C=h[h.length-1];C!=="\r"&&C!==`
`&&(/(?:\s)/.test(C)&&(f=y),o.push(f),p=Math.max(p,f),a.push(-1));const N=[];for(let H=0;H<=m;H++){let T=0;this._align==="right"?T=p-o[H]:this._align==="center"?T=(p-o[H])/2:this._align==="justify"&&(T=a[H]<0?0:(p-o[H])/a[H]),N.push(T)}const P=n.length,I={},W=[],Z=this._activePagesMeshData;u.push(...Z);for(let H=0;H<P;H++){const T=n[H].texture,F=T.baseTexture.uid;if(!I[F]){let J=u.pop();if(!J){const $=new oS;let j,wt;t.distanceFieldType==="none"?(j=new Kd(it.EMPTY),wt=lt.NORMAL):(j=new Kd(it.EMPTY,{program:ar.from(OS,DS),uniforms:{uFWidth:0}}),wt=lt.NORMAL_NPM);const k=new qd($,j);k.blendMode=wt,J={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:k,vertices:null,uvs:null,indices:null}}J.index=0,J.indexCount=0,J.vertexCount=0,J.uvsCount=0,J.total=0;const{_textureCache:Q}=this;Q[F]=Q[F]||new it(T.baseTexture),J.mesh.texture=Q[F],J.mesh.tint=this._tintColor.value,W.push(J),I[F]=J}I[F].total++}for(let H=0;H<Z.length;H++)W.includes(Z[H])||this.removeChild(Z[H].mesh);for(let H=0;H<W.length;H++)W[H].mesh.parent!==this&&this.addChild(W[H].mesh);this._activePagesMeshData=W;for(const H in I){const T=I[H],F=T.total;if(!(((ct=T.indices)==null?void 0:ct.length)>6*F)||T.vertices.length<qd.BATCHABLE_SIZE*2)T.vertices=new Float32Array(4*2*F),T.uvs=new Float32Array(4*2*F),T.indices=new Uint16Array(6*F);else{const J=T.total,Q=T.vertices;for(let $=J*4*2;$<Q.length;$++)Q[$]=0}T.mesh.size=6*F}for(let H=0;H<P;H++){const T=n[H];let F=T.position.x+N[T.line]*(this._align==="justify"?T.prevSpaces:1);this._roundPixels&&(F=Math.round(F));const J=F*i,Q=T.position.y*i,$=T.texture,j=I[$.baseTexture.uid],wt=$.frame,k=$._uvs,L=j.index++;j.indices[L*6+0]=0+L*4,j.indices[L*6+1]=1+L*4,j.indices[L*6+2]=2+L*4,j.indices[L*6+3]=0+L*4,j.indices[L*6+4]=2+L*4,j.indices[L*6+5]=3+L*4,j.vertices[L*8+0]=J,j.vertices[L*8+1]=Q,j.vertices[L*8+2]=J+wt.width*i,j.vertices[L*8+3]=Q,j.vertices[L*8+4]=J+wt.width*i,j.vertices[L*8+5]=Q+wt.height*i,j.vertices[L*8+6]=J,j.vertices[L*8+7]=Q+wt.height*i,j.uvs[L*8+0]=k.x0,j.uvs[L*8+1]=k.y0,j.uvs[L*8+2]=k.x1,j.uvs[L*8+3]=k.y1,j.uvs[L*8+4]=k.x2,j.uvs[L*8+5]=k.y2,j.uvs[L*8+6]=k.x3,j.uvs[L*8+7]=k.y3}this._textWidth=p*i,this._textHeight=(s.y+t.lineHeight)*i;for(const H in I){const T=I[H];if(this.anchor.x!==0||this.anchor.y!==0){let $=0;const j=this._textWidth*this.anchor.x,wt=this._textHeight*this.anchor.y;for(let k=0;k<T.total;k++)T.vertices[$++]-=j,T.vertices[$++]-=wt,T.vertices[$++]-=j,T.vertices[$++]-=wt,T.vertices[$++]-=j,T.vertices[$++]-=wt,T.vertices[$++]-=j,T.vertices[$++]-=wt}this._maxLineHeight=_*i;const F=T.mesh.geometry.getBuffer("aVertexPosition"),J=T.mesh.geometry.getBuffer("aTextureCoord"),Q=T.mesh.geometry.getIndex();F.data=T.vertices,J.data=T.uvs,Q.data=T.indices,F.update(),J.update(),Q.update()}for(let H=0;H<n.length;H++)rf.push(n[H]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:i,size:s}=yr.available[this._fontName];if(i!=="none"){const{a:n,b:o,c:a,d:l}=this.worldTransform,h=Math.sqrt(n*n+o*o),c=Math.sqrt(a*a+l*l),u=(Math.abs(h)+Math.abs(c))/2,d=this.fontSize/s,f=t._view.resolution;for(const p of this._activePagesMeshData)p.mesh.shader.uniforms.uFWidth=u*e*d*f}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=yr.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(t){if(this.tint!==t){this._tintColor.setValue(t);for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!yr.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??yr.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,i=yr.available[this._fontName].distanceFieldType==="none"?tf:ef;i.push(...this._activePagesMeshData);for(const s of this._activePagesMeshData)this.removeChild(s.mesh);this._activePagesMeshData=[],i.filter(s=>e[s.mesh.texture.baseTexture.uid]).forEach(s=>{s.mesh.texture=it.EMPTY});for(const s in e)e[s].destroy(),delete e[s];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(t)}};NS.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const LS=[".xml",".fnt"],kS={extension:{type:z.LoadParser,priority:Re.Normal},name:"loadBitmapFont",test(r){return LS.includes(Wt.extname(r).toLowerCase())},async testParse(r){return Xn.test(r)||Jl.test(r)},async parse(r,t,e){const i=Xn.test(r)?Xn.parse(r):Jl.parse(r),{src:s}=t,{page:n}=i,o=[];for(let h=0;h<n.length;++h){const c=n[h].file;let u=Wt.join(Wt.dirname(s),c);u=jl(u,s),o.push(u)}const a=await e.load(o),l=o.map(h=>a[h]);return yr.install(i,l,!0)},async load(r,t){return(await K.ADAPTER.fetch(r)).text()},unload(r){r.destroy()}};tt.add(kS);const th=class Ii extends ur{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new Ii(Object.keys(Ii.defaultOptions).reduce((e,i)=>({...e,[i]:t[i]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(t=>{URL.revokeObjectURL(t.src),t.refs--,t.refs===0&&(t.fontFace&&document.fonts.delete(t.fontFace),delete Ii.availableFonts[t.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t,e={}){const{availableFonts:i}=Ii;if(i[t]){const s=i[t];return this._fonts.push(s),s.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return K.ADAPTER.fetch(t).then(s=>s.blob()).then(async s=>new Promise((n,o)=>{const a=URL.createObjectURL(s),l=new FileReader;l.onload=()=>n([a,l.result]),l.onerror=o,l.readAsDataURL(s)})).then(async([s,n])=>{const o=Object.assign({family:Wt.basename(t,Wt.extname(t)),weight:"normal",style:"normal",display:"auto",src:s,dataSrc:n,refs:1,originalUrl:t,fontFace:null},e);i[t]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...t){const e=t.filter(i=>!this._overrides.includes(i));e.length>0&&(this._overrides.push(...e),this.styleID++)}removeOverride(...t){const e=t.filter(i=>this._overrides.includes(i));e.length>0&&(this._overrides=this._overrides.filter(i=>!e.includes(i)),this.styleID++)}toCSS(t){return[`transform: scale(${t})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((t,e)=>`${t}
            @font-face {
                font-family: "${e.family}";
                src: url('${e.dataSrc}');
                font-weight: ${e.weight};
                font-style: ${e.style};
                font-display: ${e.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(t){this._stylesheet!==t&&(this._stylesheet=t,this.styleID++)}normalizeColor(t){return Array.isArray(t)&&(t=IA(t)),typeof t=="number"?CA(t):t}dropShadowToCSS(){let t=this.normalizeColor(this.dropShadowColor);const e=this.dropShadowAlpha,i=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),s=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);t.startsWith("#")&&e<1&&(t+=(e*255|0).toString(16).padStart(2,"0"));const n=`${i}px ${s}px`;return this.dropShadowBlur>0?`text-shadow: ${n} ${this.dropShadowBlur}px ${t}`:`text-shadow: ${n} ${t}`}reset(){Object.assign(this,Ii.defaultOptions)}onBeforeDraw(){const{fontsDirty:t}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&t?new Promise(e=>setTimeout(e,100)):Promise.resolve()}get isSafari(){const{userAgent:t}=K.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}set fillGradientStops(t){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(t){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(t){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(t){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(t){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(t){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(t){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};th.availableFonts={},th.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let Ha=th;const Mn=class Ri extends di{constructor(t="",e={}){super(it.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const i=new Image,s=it.from(i,{scaleMode:K.SCALE_MODE,resourceOptions:{autoLoad:!1}});s.orig=new pt,s.trim=new pt,this.texture=s;const n="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(n,"svg"),l=document.createElementNS(n,"foreignObject"),h=document.createElementNS(o,"div"),c=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=Ri.defaultMaxWidth,this.maxHeight=Ri.defaultMaxHeight,this._domElement=h,this._styleElement=c,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(c),this._foreignObject.appendChild(h),this._image=i,this._loadImage=new Image,this._autoResolution=Ri.defaultAutoResolution,this._resolution=Ri.defaultResolution??K.RESOLUTION,this.text=t,this.style=e}measureText(t){var c,u;const{text:e,style:i,resolution:s}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},t);Object.assign(this._domElement,{innerHTML:e,style:i.toCSS(s)}),this._styleElement.textContent=i.toGlobalCSS(),document.body.appendChild(this._svgRoot);const n=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=n;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const l=Math.min(this.maxWidth,Math.ceil(o)),h=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",h.toString()),e!==this._text&&(this._domElement.innerHTML=this._text),i!==this._style&&(Object.assign(this._domElement,{style:(c=this._style)==null?void 0:c.toCSS(s)}),this._styleElement.textContent=(u=this._style)==null?void 0:u.toGlobalCSS()),{width:l+i.padding*2,height:h+i.padding*2}}async updateText(t=!0){const{style:e,_image:i,_loadImage:s}=this;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;const{width:n,height:o}=this.measureText();i.width=s.width=Math.ceil(Math.max(1,n)),i.height=s.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(l=>{s.onload=async()=>{if(a<this._updateID){l();return}await e.onBeforeDraw(),i.src=s.src,s.onload=null,s.src="",this.updateTexture(),l()};const h=new XMLSerializer().serializeToString(this._svgRoot);s.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(h)}`})}get source(){return this._image}updateTexture(){const{style:t,texture:e,_image:i,resolution:s}=this,{padding:n}=t,{baseTexture:o}=e;e.trim.width=e._frame.width=i.width/s,e.trim.height=e._frame.height=i.height/s,e.trim.x=-n,e.trim.y=-n,e.orig.width=e._frame.width-n*2,e.orig.height=e._frame.height-n*2,this._onTextureUpdate(),o.setRealSize(i.width,i.height,s),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}_renderCanvas(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(t)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds(t)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){var i,s,n,o,a;typeof t=="boolean"&&(t={children:t}),t=Object.assign({},Ri.defaultDestroyOptions,t),super.destroy(t);const e=null;this.ownsStyle&&((i=this._style)==null||i.cleanFonts()),this._style=e,(s=this._svgRoot)==null||s.remove(),this._svgRoot=e,(n=this._domElement)==null||n.remove(),this._domElement=e,(o=this._foreignObject)==null||o.remove(),this._foreignObject=e,(a=this._styleElement)==null||a.remove(),this._styleElement=e,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=e,this._image.src="",this._image=e}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(t){this.updateText(!0);const e=Tr(this.scale.x)||1;this.scale.x=e*t/this._image.width/this.resolution,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(t){this.updateText(!0);const e=Tr(this.scale.y)||1;this.scale.y=e*t/this._image.height/this.resolution,this._height=t}get style(){return this._style}set style(t){this._style!==t&&(t=t||{},t instanceof Ha?(this.ownsStyle=!1,this._style=t):t instanceof ur?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Ha.from(t)):(this.ownsStyle=!0,this._style=new Ha(t)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(t){t=String(t===""||t===null||t===void 0?" ":t),t=this.sanitiseText(t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}sanitiseText(t){return t.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};Mn.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Mn.defaultMaxWidth=2024,Mn.defaultMaxHeight=2024,Mn.defaultAutoResolution=!0;const US={name:"PixiMixin",data:()=>({tickers:{},pixiAppId:"pixi",pixi:null,appConfig:{antialias:!0,resolution:1,background:"rgb(0,0,00)",eventMode:"static",eventFeatures:{move:!0,globalMove:!0,click:!0,wheel:!0}}}),computed:{},methods:{rN(r=10,t=2){return Math.round(r*Math.random(t))},rC(){for(var r="0123456789ABCDEF",t="#",e=0;e<6;e++)t+=r[Math.floor(Math.random()*16)];return t},setTicker(r){return this.tickers[r]=new ne,this.tickers[r]},stage(){const r=document.getElementById(this.pixiAppId),t={...this.appConfig,resizeTo:r,autoResize:!0},e=new Wm(t);return r.appendChild(e.view),this.pixi=e,e}},beforeRouteLeave(r,t,e){this.$destroyPixiApp(this.pixi),this.pixi=null,e()},beforeRouteEnter(r,t,e){this.$destroyPixiApp(this.pixi),this.pixi=null,e()}},GS={name:"RisingWaves",methods:{waveInstance(r,t=10,e=10,i=[2,1],s=1.5){let n=10,o=10,a=Math.random()*20,l=new jh;l.lineStyle(Math.floor(Math.random()*i[0])+i[1],this.rC(),8),l.drawCircle(t,e,a),l.x=t+n,l.y=r.screen.height-100,l.alpha=1,r.stage.addChild(l);const h=`instance${t}${e}`,c=this.setTicker(h);l.id=h,c.add(u=>{(l.alpha<=0||l.y<=Math.random()*-50)&&(l.y=r.screen.height+o,l.x=Math.random()*150,l.alpha=1),l.y-=s,l.x-=Math.cos(t),l.alpha-=Math.random()/1e3}),c.start()},drawWave(r){const t=Array.from(Array(Math.round(r.screen.width)).keys()),e=100,i=1.1;t.map(s=>{s%e==0&&(this.waveInstance(r,s,Math.random()*100,[2,1],.2*i),this.waveInstance(r,s,Math.random()*100,[2,1],.3*i),this.waveInstance(r,s+5,Math.random()*100+50,[3,1],.4*i),this.waveInstance(r,s+10,Math.random()*100+100,[2,.3],.5*i),this.waveInstance(r,s+10,Math.random()*100+200,[2,.5],.6*i),this.waveInstance(r,s+10,Math.random()*100+300,[2,.5],.7*i))})}}},HS="/explore/assets/vuetify-e2c9e15d.png",$S="/explore/assets/postgresql-e938e322.png",WS="/explore/assets/django-a416619b.png",VS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAcZSURBVHhe7ZxbjBNVGMdPW7btwhJvqFG8YdSoJD74BFGJicZIoiQaUTExJBLQBNEA6Wm5SF/gQUhM9EHjJUaNQVmiogYC9MxOu1yewCDINSEB5aKGIKAgyDL1f8Yvddt+xnZ7pu1szy/5p7vtzDnz/b8z59KZqbBYLBaLxWKxWCwWi8XSNixUY2Np9XhU5uZFpHo7klYqKp2d0MGoVCejaec8NOD/LZ0fo2m1JZJ2PsN7i/V+Yp47hkqy1MScdYlYypkCs1fC0CMwstiYlIfX7UjQi2Lu1m6qxVLF1N4YDJ8Jo45Vm2hMB0TamUQ1Wkpk3SS6jdWMYeYlnQvQc1SzRYPu5i3WrOA0IFLqAaq+w8m4t1E/zRkVnKRzWGR743QUnQv6/EWsQc2QHpg7HfT9X7HmNEER6eToMDoXtMId5cYoD0l5XaTdW0Qmd1U00zcL750p38aQpPqTDqNzgREHBpuiF1v0UQk9axm8jUnpJFM1nYkeDMsMke4E+uhfsu4IbHd28HamJNK5m6iWzsQmoMVUJoDtgjLOtMHbmJRNQEUC/EFYquX+IDzPHaOnioENwpBNQFUCmiubAJuA1mIT0GJsAoYJQ01kZQK8fPxwsZAocvIKiYv4/CikPDcxp+iKHtrN0owEVArbHoOepF07m1YkQMvLJy7hzJhNu3curUqAFhIwAD1CRbSArNsTTTnPYwH1MYL6HosnfbfCwOBA21UmEqCF/Y56G8QoKqZJwPhI2lmKQP6oDCwsMpUALey7hIppAqmNt6Ol7+WCCpOMJqAQP178QTThMqe+jivVr1xAYZPJBGhh/4BnRVk3iQFvJxdMGGU6AcV8/CMqKhiiaTWfCySsEgvUtRSaT8NnQCF+hIoKgDnrEmj9J7hAwil1jiIrAQN/5oytR54aVZZUY8RSucf4QMIpzOA2Umg+egDFwsrjTK1HOIsmU5FmiUjnfS6Q0EqqZyk0H29T13jO0HqFs2gxFWmW4TT4ovvJo81HKDSfYiGe4QytV1gVf0FFGiT7zUi0mIt8MCGTdA6LRetvpMh8ikURQfezgzO0XqGcfVSsQaQ7gQ0mbJJql8jkbqWoSmD6OJUzcyjCGfA7FWsOHPjLbEChkTqDMWyZXsdQSCX0dzgYOA9yZg5Zpq8V4ODf4QNrV6lz0KGIVGvwOltkNl1BoZShux4Y1ltlYIMyPhXFlO1bPlCTUscjafVmLNX3kJi/YVzQt49Tv7+CM7BhbUqWrbAbBgZtrzbMkKRzGubPF7O2dVF1geNtFd3oq1ey5hmQt2XUNVSVGWDSbta8RiWd7zDA30DVNAX0909grn6IM86UjF8b0FM31sAGhG6tT6Q2j6YqAgHdTNTb3H2915+8D8YvQavfwxlmUujWTlP15oBheyoNbEjS2S/Sucuo+DL8rwQKXc+glX6CYPZDZ7hA21U43t0Uijl0V8EaOSSpv8QCdTcVXQZa6AwY/xMXWFiEGFZROObAdG4tb2b90jMdKrZEcZsYiZazhgsobEJXJyksc8C09zgz65Z0LmCKWTZDwKIliYNWXDChlJt4mEIzR1T2vcIaWqcw8K6jIkvglF3GBhJSebnRATz2lM7dzxlatzLqJSrRB63lFiTgIhdIGIVYDlBohtH3/kjnEmtqHfJXuYPQU0MukLAK49gKCs08UQO3oYgF7p1UnA8SsJ4LJKzC9PleCs086L8/5UytR1V3IRQSe7lAwig9i6OwgiEqc9M5U+uR8dtA2kenvP74HRRWQGD62OhVseGYAJzFA4hjCoUULBHpfMkZW6uGYQJOeW7iUQqnCaSdSZyxtWq4JEC3en0XnPHv/WsBq+KvOXNrUVgTAMN/03N8DLSrccyveoWR11EILWChGgszf6k0txYZS0ArWl5bkclNxICsH8Rgjf4v2QSYRDrjYWpdlyptAkyTzUZjUj2FcWFVVP+Yqn83Am++lk1AmzHkBJhSpyfSJqDF2AS0GJuAFhNUArBg8qDl/gWfreJKLKJm4P1TldvZBASVgEK86qfPvHzX01Xb2gQElAC3u+rH/4q9Ioaz4mzZtjYBQXVByYlURYmiK0bYBFSAvnlnmSGGhC7oXaqihOd2TavaTnWPpY87E5wBgVwTpkH4DSR4XNHtGeO5iZn4v+oWR2+zCPTe1LYHLfW1SlOaJdR9gg6jc8EZcBda5iXOoKCFBJQ9J9yxIAGfcwYFLa+QnE6H0Nl4/T1XozUe4UwKTPnENj0rokOweP1d9yAJx1mzDAsD8y60/rLnhC3Ac5I3Y0zYwJlmQujqzsH8pfbnJv8HJGEyjFoLneeMrEcw/aRfVj7xAoy/nKqw1IJ+krHoJh70+uNzkZQP0EX1wch9ZOp5aOCfv+OH8Lobr/3Qh9h2of7eR8+w9KOoVJzFYrFYLBaLxWKxWCyWNkCIvwHGUAfcoQ2ZtQAAAABJRU5ErkJggg==",XS="/explore/assets/nodejs-ec23cf2b.png",zS="/explore/assets/docker-79db3e5c.png",jS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAMAAAC3Ycb+AAACLlBMVEVMaXFBuINBuIM8enI/nnxBuINBuINBuIM8enJBuIM8enJBuINBuINBuIM8enJBuIM8enJBuINBuIM7eXFBuINBuIM8eXFBuINBuIM8eHFBuIM8eXFBuIM8eHBBuIM8eHBBuIM8d3BBuINBuIM8d3BBuINBuINBuIM8dnBBuINBuIM8dnBBuINBuIM7dXBBuINBuIM8dG9BuINBuIM8dG9BuIM8dG9BuINBuIM8c29BuINBuIM7cm5BuINBuIM7cW5BuIM7cW9BuINBuINBuIM7cW5BuINBuINBuIM7b21BuINBuIM6b21BuIM7bm1BuINBuIM7bW1BuINBuIM6bGxBuINBuIM6a2xBuIM6a2xBuINBuIM6amxBuIM6aWtBuINBuIM6aGpBuINBuIM6ZmpBuINBuIM5ZGlBuIM5Y2lBuINBuIM5YWhBuINBuIM5YGdBuIM4XmdBuINBuIM4XGZBuINBuIM4WmVBuIM3WGRBuIM3V2RBuINBuIM3VGNBuIM2UmI2UGFBuIM1TWA1SV41Sl41S141TF81TWA2T2A2UWE2U2I3VWM3WGQ4W2U4Xmc5YGc5YWg5ZGk6Zmo6Z2o6aGo6a2w7bW07bm07cG48c287dnA7eHA8enI8fHI9fnM8gXM9g3Q9hnU9iXY+i3c+jHc+j3g+kXk+lHo/l3o/mXs+m3s/nnw/oH0/o31Apn5BqH5Aqn9BrH9BroBBr4BCsYBBs4FBtoJCt4JBuIP7mHZoAAAAhHRSTlMAAQICAwQHCAgLDQ4QEhIVFhcaGh4hIiUoKissLzEzNDc4Oj4/QERFRkhLTVBTVldaXV5iYmZnaW1vcHV3eHx8gIGDhIeJio+Sk5aZm52foaWmqKyusLS1t7m6u7y/wMLHx8zP0NPW1trc3uLi5Obn6urt7+/y8/T29vf4+vv7/P39/v7L5yYnAAAKeElEQVR42uzBgQAAAADDoPtTH2TVAAAAAAAAAAAAAMg6NfegXmu6BVG4tm3btm3btm1bM3bOtm17Xt1pu5OlkfT3v7cxnqp1zio0SFovlZleaQYp/O6odWp90VGv0wxyWGXmsEHSXjvqYmtplrNuGGWKysgUo9xw1ixJ9Q456kOWQc7WVJmoedYgWR8cdaieJI101gOjrFCZWGGU+84aqZ9U2eqob3kGudRG4rW5ZJC8b47aWkU/6+Gs50bZIfF2GOW5s3roV0ud9T+jDBZusFGKnbVUv2l22lFv0w1yrJJglY4ZJP2to0430++mOuuWUWYLNtsot5w1VX+otd9Rn3MMcr6RUI3OGyT7s6P219KfDHLWI6NsEGqDUR45a5D+rOJGR33LN0hGZ4E6Zxgk/5ujNlbUX3R01kuj7BNon1FeOquj/ma+s64aZbQwo41y1Vnz9XcNjzvqfaZBTlUXpPopg2S+d9TxhvqHsc66a5TFgiw2yl1njdU/VdvpqK+5BslqKkTTLIPkfnHUzmr6F32c9dQo24TYZpSnzuqjf7XGWUUGSesrQN80gxQ5a43+XetzjnoTVs0Nttuea60SzIx+zY1it52pktSBa+5HrubWVYrqct32I9xt66hEw4OtuauVotVGeeCs4SpZuDU3s51S0i4z1G67pYpK0S3YmrtbKdkdbLftqlItcdZlowxVCoYa5bKzlqh0TeCa+y7DICeqKGlVThgk4x3cbZsohsnOum2UuUraXKPcdtZkxVJrL1xzsw1yoZGS1OhCqN12bw3FNDA6NTf63XagYquw3lHfCwyS3l1J6Z5ukILvjlpfQXFo76xXRjmgpBwwyitntVdc5jnrmlHGKQnjjHLNWfMUn4ZHAxgoADWX7rZZcLc92lBxGuOse3zN/S+67T1njVG8qoZbc1soQS24bvsV7rZVFbfeznrG19zod9veSsAqZxXzNbe8u22xs1YqES3DrbmVlIBKXLd9A3fblkrIdGfdNMoMJWCGUW46a7oSU+egoz5lG+R8XcWtLjc++OSog3WUoGHB1ty1itvaYLvtMCWqypZgBwodFKcOwY4PtlRWwro460X519zdRnnhrC5KwiJnXTHKCMVlhFGuOGuRktHkZLRrbrjd9mQTJWWSs+4YZYHisCDYbjtRyamxx1FfcrCa21QxNcW6bc4XR+2poST1d9Zjo2xWTJuN8thZ/ZW44GtuL8XQK+Rum7S2wd7NHSi3bpsGd9uLbZWCOc66bpQJKtUEo1x31hylosGRaN7NhXsad6SBUjLKWfeNskylWBZstx2l1FTdDtfcPINktVKJWmUZJA/utturKkU9g625O8rjNO6Zs3oqZcuDrbkDVIIBwXbb5Upd8zNRu5sL9zTuTHMBpgV7Nzcjat12mgi19wdbc+vrX9QPttvuryXEEGc9LNuBwgajPHTWEDEqborS3Vy4p3GbKgrSKUp3c7uDPY3rJMzCYO/mRkSn2y4Up/FxuubSAwV+fEB32+ONBRoffs2lu+0dZ40XqdouR32B7+bCP43bVU2ofs56wtdctts+cVY/sX5g7w4wAoECKIoaALPuwRACIZIgEATR7trEw/ndf7fxeOcPjof52Nc4Hg/zsa9tPB7mY1/bfDzMx76m+XiYj31t8/EwH/ua5uNhPva1zMfDfOxrmY+H+djXNB8POwP7WjfHw3Zrro99TfPxMB/7mubjYT72tc3Hw3zsa5uPh/nY1zQfD/Oxr20+HuZjX9N8PMzHvrb5eJiPfU3z8TAf+9rm42E+9rXNx8N87Guaj4f52Nc2Hw/zsa/AmtvabX08zMe+9vl4mI997fPxMB/7muXjYT72NcjHw1jsa7/bHoyH+djXPvpuzj+N2+bjYT72tc3Hw3zsa5qPh/nY1zYfD/Oxr2k+HuZjX9t8PMzHvqb5eJiPfW3z8TAf+9rm42E+9jXKx8N87GuQj4f52NcgHw/zsa9BPh4GY19AAB7mYF9AAB4GYV9AAB7mYF9AAB4GYV9AAB6GY193zQ3sthIeBmNfQAAe5mBfQAAeBmFfQAAe5mBfQAAeBmFfQAAe5mBfQAAe5mBfQAAeBmFfQAAe5mBfQAAeBmFfQAAe5mBfQAAeBmFfQAAe5mBfQAAe5mBfQAAeBmFfQAAe5mBfQAAeBmFfQAAepmNfg3w8bNDjN459hfCwM7CvEh52AvaVwsNOwb58PGzWG4V93bs5/zSuhYf52FcLD/Oxrxge5mNfLTzMx75ieJiPfbXwMB/7iuFhPvbVwsN87KuFh/nYVwwP87GvFh7mY18xPOzhy8e+UniYj3218DAf+2rhYT72FcPDfOyrhYf52FcAD0Owr7vm3t3Wx8N87KuFh/nYVwsP87GvGB7mY18tPMzHvgJ4mIt93bs5/zQuhof52FcLD/OxrxYe9v/Tx75SeJiPfbXwMB/7+j142HsO+/LxsBj25eNhNezLx8Ni2JePh9WwLx8Pi2FfPh5Ww758PKyGffl4WAz78vGw87GvCB724mNfATwsgH35eJiGfd019+62Ph7278PHvlJ4mI99ZfCwAPbl42GvNezLx8Nq2JePh9WwLx8Pi2FfPh7Wwr58POzZxr78/u7xsBj25eNhMezLx8Ni2JePhx2IfQXwsCcf+0rhYT72FcPDfOyrhYf52FcMD8OxL781HuZjXzE8zMe+aniYj33F8DAf+yrhYRj2de/m7mmciIf52FcND/Oxrxge5mNfDTwMw77umnt3WxcP87GvGB7mY181PMzHvkp4mI99BfCwn/bu6UoSAACi6CqPtW2NbZtxdnaTRON93JdGnVMX9tXCw2BfMTwM9tXCw2BfLTwM9hXDw2BfLTwM9hXDw2BfUTwM9pVec+22Q+jVYAjFsC94WAv7gofFsC94WAv7gofFsC94WAD7cjfnNK6Ch8G+WngY7CuGh8G+WngY7CuJh/WxL3gY7GvYXQyGUAD7gofBvgJ4GOyrhof1sS94GOxr2D0aAh4WwL7gYbCvBh7Wx77gYbCvYbcwGEIB7AseFsC+4GGwr8Caa7dt4GGwrxYeBvuK4WGwrxYeBvuK4WGwrxYeBvtq4WGwrxgeBvuq4WGwr8DdnNO4Kh4G+4rhYbCvFh4G+2rhYbCvHh7Wx77gYX3sCx7Wx77gYbCvYXcL+6rhYS3sS5uwrzAeFsC+9K+Gfbmba53G6W0M+9IJ7KuGh7WwL63UsC9rbmu31XfYVw0Pa2FfehbDvrRXw77gYS3sSzM17Ase1sK+9DGGfem6hn3Bw1rYlzZq2Bc8rIV96U8Y+7Lm2m0DvYphXzquYV/wsBb2paUa9gUPa2Ff+hbGvtzNOY0L9AT2FWsX9hXGw2BfgaZhX2E8DPYV6APsK9YF7CuMh8G+Aq3BvsJ4GOwr0G/YVxgPg30Fegn7inUI+wrjYbCvQAuwrzAeBvsK9AX21V9z7bYZPAz2FWgb9hXGw2Bfgf7DvsJ4GOwr0DvYV6wz2FcXD4N9FVqFfVXv5pzGNfrZxL7gYbCvSs9hX7EOetgXPAz2VWquhn3Bw2BfrT7DviRJkiRJkiRJkiRJkiRJkiQNszucKAuToL+DiQAAAABJRU5ErkJggg==",YS="/explore/assets/pixijs-5de0650b.png",qS="/explore/assets/nginx-9214d962.png",KS="/explore/assets/redis-0d651b12.png",ZS="/explore/assets/github-7d78f177.png",QS={name:"RisingLogos",data:()=>({logos:[{src:ZS,w:50,h:50,url:"https://github.com"},{src:YS,w:100,h:40,url:"https://pixijs.com"},{src:HS,w:50,h:50},{src:XS,w:60,h:40},{src:jS,w:60,h:60},{src:$S,w:50,h:60},{src:VS,w:60,h:60},{src:WS,w:120,h:40},{src:zS,w:70,h:60},{src:qS,w:80,h:40},{src:KS,w:50,h:40}]}),methods:{waveLogoInstance(r,t,e=10,i=10,s=[2,1],n=1.5){let o=40,a=di.from(t.src);a.x=r.screen.width*Math.random(),a.y=r.screen.height-o;let l=Math.random()*200;a.width=t.w*2-t.w/100*l,a.height=t.h*2-t.h/100*l,r.stage.addChild(a),a.hitArea=null,t&&t.url&&a.addListener("pointerdown",()=>{window.location=t.url});const h="logos1";this.setTicker(h).add(u=>{if(a.alpha<=.1||a.y<0||a.x<0||a.x>=r.screen.width){a.y=r.screen.height-100,a.x=r.screen.width*Math.random(),a.alpha=1,a.rotation=Math.random();let d=Math.random()*100;a.width=t.w*2-t.w/100*d,a.height=t.h*2-t.h/100*d}a.y-=Math.random()*n,a.x-=Math.random()<.5?Math.sin(.5):-Math.sin(.5),a.alpha-=Math.random()/300,a.x>=r.screen.width/2?a.rotation+=Math.random()/100:a.rotation-=Math.random()/100}),this.tickers[h].start()},drawLogoWave(r){const t=Array.from(Array(Math.round(r.screen.width)).keys());console.log(t),this.logos.map((e,i)=>{setTimeout(()=>{this.waveLogoInstance(r,e)},i*Math.random()*4e3)})}}},JS={name:"TextMask",data:()=>({matrix:{update:!1,count:0}}),methods:{randomChar(){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";return r.charAt(Math.floor(Math.random()*r.length))},textElements(r,t,e=1,i=0){const n=[];for(let o=0;o<20;o++){const a=new xo(this.randomChar(),{fontFamily:"Arial",fontSize:20,fill:65280});a.x=e*(o*10)+1,a.y=i+10,n[o]=a,a.mask=t,r.stage.addChild(a)}return n},animateText(r,t){r.ticker.add(e=>{if(this.matrix.count>=8){for(let i=0;i<t.length;i++){const s=t[i];s.text=this.randomChar(),s.y+=Math.random()*10,s.y>r.screen.height/5&&(s.y=0)}this.matrix.count=0}this.matrix.count+=1})},drawTextMask(r,t="GROUPEFFECT"){const e=new ur({fontFamily:"Arial",fontSize:80,fontWeight:"bold",fill:["#FFFFFF","0x00ff00"],stroke:"#4a1850",strokeThickness:5,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:4,dropShadowAngle:Math.PI/6,dropShadowDistance:6}),i=new xo(t,e);i.x=0,i.y=0,i.width=r.screen.width,i.height=r.screen.height/4,r.stage.addChild(i),Array.from(Array(5).keys()).map(s=>{setTimeout(()=>{this.animateText(r,this.textElements(r,i,s*2.5,s))},s*2e3)})}}};const ug=(r,t)=>{const e=r.__vccOpts||r;for(const[i,s]of t)e[i]=s;return e},tC={name:"HomeView",mixins:[US,GS,QS,JS],methods:{loadPixiContent(r){this.drawWave(r),this.drawLogoWave(r),this.drawTextMask(r)}},mounted(){this.loadPixiContent(this.stage())}},eC=["id"];function rC(r,t,e,i,s,n){return Vf(),ey("div",null,[Ah("div",{id:r.pixiAppId},null,8,eC)])}const dg=ug(tC,[["render",rC],["__scopeId","data-v-52cc1d04"]]),iC=Object.freeze(Object.defineProperty({__proto__:null,default:dg},Symbol.toStringTag,{value:"Module"}));const sC={name:"App",components:{Home:dg},created(){}};function nC(r,t,e,i,s,n){const o=_0("Home");return Vf(),ry(o)}const oC=ug(sC,[["render",nC]]),fg=Gy(oC);wx(fg);fg.mount("#app");
